{"version":3,"sources":["../src/action.ts","../src/api/queries.ts","../src/api/client.ts","../src/core/stats.ts","../src/themes/registry.ts","../src/core/svg.ts","../src/utils/math.ts","../src/themes/shared.ts","../src/themes/terrain/seasons.ts","../src/themes/terrain/palette.ts","../src/themes/terrain/blocks.ts","../src/themes/terrain/effects.ts","../src/themes/terrain/assets.ts","../src/themes/terrain/biomes.ts","../src/themes/terrain/index.ts"],"sourcesContent":["/**\n * Maeul in the Sky GitHub Action entry point\n *\n * Reads action inputs, fetches contribution data, renders themed SVGs,\n * and writes them to the specified output directory.\n */\n\nimport * as core from '@actions/core';\nimport { writeFile } from 'node:fs/promises';\nimport { join } from 'node:path';\n\nimport { fetchContributions } from './api/client.js';\nimport { computeStats } from './core/stats.js';\nimport { getTheme, listThemes } from './themes/registry.js';\n\n// Import theme modules to trigger self-registration\nimport './themes/terrain/index.js';\n\nasync function run(): Promise<void> {\n  try {\n    // Read inputs\n    const token = core.getInput('github_token');\n    const themeName = core.getInput('theme') || 'terrain';\n    const title = core.getInput('title');\n    const outputDir = core.getInput('output_dir') || './';\n    const yearInput = core.getInput('year');\n    const hemisphereInput = core.getInput('hemisphere') || 'north';\n    const hemisphere = hemisphereInput === 'south' ? 'south' as const : 'north' as const;\n\n    // Determine username from GITHUB_ACTOR\n    const username = process.env.GITHUB_ACTOR;\n    if (!username) {\n      throw new Error('GITHUB_ACTOR environment variable is not set');\n    }\n\n    // Determine year (omit for rolling 52 weeks)\n    const year = yearInput ? parseInt(yearInput, 10) : undefined;\n    if (yearInput && (year == null || isNaN(year))) {\n      throw new Error(`Invalid year: \"${yearInput}\"`);\n    }\n\n    // Validate theme\n    const theme = getTheme(themeName);\n    if (!theme) {\n      throw new Error(\n        `Unknown theme \"${themeName}\". Available themes: ${listThemes().join(', ')}`\n      );\n    }\n\n    const displayTitle = title || `@${username}`;\n\n    const yearLabel = year ?? 'last 52 weeks';\n    core.info(`Fetching contributions for @${username} (${yearLabel})...`);\n\n    // Fetch contribution data\n    const data = await fetchContributions(username, year, token || undefined);\n\n    // Compute stats\n    const stats = computeStats(data.weeks);\n    const fullData = { ...data, stats };\n\n    core.info(`Rendering with ${theme.displayName} theme...`);\n\n    // Render SVGs\n    const output = theme.render(fullData, {\n      title: displayTitle,\n      width: 840,\n      height: 240,\n      hemisphere,\n    });\n\n    // Write output files\n    const darkPath = join(outputDir, `maeul-in-the-sky-dark.svg`);\n    const lightPath = join(outputDir, `maeul-in-the-sky-light.svg`);\n\n    await writeFile(darkPath, output.dark, 'utf-8');\n    await writeFile(lightPath, output.light, 'utf-8');\n\n    core.info(`Written: ${darkPath}`);\n    core.info(`Written: ${lightPath}`);\n\n    // Set outputs\n    core.setOutput('dark_svg_path', darkPath);\n    core.setOutput('light_svg_path', lightPath);\n  } catch (error) {\n    if (error instanceof Error) {\n      core.setFailed(error.message);\n    } else {\n      core.setFailed(String(error));\n    }\n  }\n}\n\nrun();\n","/**\n * GraphQL queries for GitHub contributions API\n */\n\n/**\n * Query to fetch a user's contribution calendar for a specific time period\n *\n * @param $username - GitHub username\n * @param $from - Start date (ISO 8601 DateTime)\n * @param $to - End date (ISO 8601 DateTime)\n */\nexport const CONTRIBUTIONS_QUERY = `\n  query ContributionsCalendar($username: String!, $from: DateTime!, $to: DateTime!) {\n    user(login: $username) {\n      contributionsCollection(from: $from, to: $to) {\n        contributionCalendar {\n          totalContributions\n          weeks {\n            contributionDays {\n              date\n              contributionCount\n              contributionLevel\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n","/**\n * GitHub GraphQL API client for fetching contribution data\n */\n\nimport type { ContributionData, ContributionWeek, ContributionDay } from '../core/types.js';\nimport { CONTRIBUTIONS_QUERY } from './queries.js';\n\n/** GitHub GraphQL API endpoint */\nconst GITHUB_API_ENDPOINT = 'https://api.github.com/graphql';\n\n/** GitHub's contribution level enum values */\ntype GitHubContributionLevel = 'NONE' | 'FIRST_QUARTILE' | 'SECOND_QUARTILE' | 'THIRD_QUARTILE' | 'FOURTH_QUARTILE';\n\n/** GraphQL API response structure */\ninterface GitHubApiResponse {\n  data?: {\n    user?: {\n      contributionsCollection: {\n        contributionCalendar: {\n          totalContributions: number;\n          weeks: Array<{\n            contributionDays: Array<{\n              date: string;\n              contributionCount: number;\n              contributionLevel: GitHubContributionLevel;\n            }>;\n          }>;\n        };\n      };\n    };\n  };\n  errors?: Array<{\n    type?: string;\n    message: string;\n  }>;\n}\n\n/**\n * Map GitHub's contribution level string to numeric 0-4\n */\nfunction mapContributionLevel(level: GitHubContributionLevel): 0 | 1 | 2 | 3 | 4 {\n  switch (level) {\n    case 'NONE':\n      return 0;\n    case 'FIRST_QUARTILE':\n      return 1;\n    case 'SECOND_QUARTILE':\n      return 2;\n    case 'THIRD_QUARTILE':\n      return 3;\n    case 'FOURTH_QUARTILE':\n      return 4;\n    default:\n      return 0;\n  }\n}\n\n/**\n * Sleep for a specified number of milliseconds\n */\nfunction sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n/**\n * Make a GraphQL request with retry logic\n */\nasync function makeGraphQLRequest(\n  query: string,\n  variables: Record<string, unknown>,\n  token?: string\n): Promise<GitHubApiResponse> {\n  const headers: HeadersInit = {\n    'Content-Type': 'application/json',\n    'User-Agent': 'maeul-in-the-sky',\n  };\n\n  if (token) {\n    headers['Authorization'] = `bearer ${token}`;\n  }\n\n  const body = JSON.stringify({ query, variables });\n\n  // Retry with exponential backoff: 1s, 2s, 4s\n  const delays = [1000, 2000, 4000];\n\n  for (let attempt = 0; attempt < 3; attempt++) {\n    try {\n      const response = await fetch(GITHUB_API_ENDPOINT, {\n        method: 'POST',\n        headers,\n        body,\n      });\n\n      // Parse JSON response\n      const data = (await response.json()) as GitHubApiResponse;\n\n      // Check for GraphQL errors\n      if (data.errors && data.errors.length > 0) {\n        const error = data.errors[0];\n\n        // Check if user not found\n        if (error.type === 'NOT_FOUND' || error.message.includes('Could not resolve to a User')) {\n          throw new Error(`GitHub user not found`);\n        }\n\n        // Check for rate limiting\n        if (response.status === 403 || error.message.includes('rate limit')) {\n          throw new Error(`GitHub API rate limit exceeded`);\n        }\n\n        throw new Error(`GitHub API error: ${error.message}`);\n      }\n\n      // Check for HTTP errors\n      if (!response.ok) {\n        if (response.status === 401) {\n          throw new Error(`Authentication failed: invalid GitHub token`);\n        }\n        if (response.status === 403) {\n          throw new Error(`GitHub API rate limit exceeded`);\n        }\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      // Check if user data exists\n      if (!data.data?.user) {\n        throw new Error(`GitHub user not found`);\n      }\n\n      return data;\n    } catch (error) {\n      const isLastAttempt = attempt === 2;\n\n      // Don't retry on user not found or authentication errors\n      if (\n        error instanceof Error &&\n        (error.message.includes('not found') ||\n         error.message.includes('Authentication failed'))\n      ) {\n        throw error;\n      }\n\n      // If last attempt, throw the error\n      if (isLastAttempt) {\n        if (error instanceof Error) {\n          throw new Error(`Network failure: ${error.message}`);\n        }\n        throw new Error(`Network failure: ${String(error)}`);\n      }\n\n      // Wait before retrying\n      await sleep(delays[attempt]);\n    }\n  }\n\n  // This should never be reached, but TypeScript needs it\n  throw new Error('Network failure: maximum retry attempts exceeded');\n}\n\n/**\n * Fetch GitHub contribution data for a specific user.\n *\n * When `year` is provided, fetches the full calendar year (Jan 1 – Dec 31).\n * When `year` is omitted, fetches a rolling 52-week window ending today,\n * matching GitHub's own profile contribution graph.\n *\n * @param username - GitHub username\n * @param year - Optional year to fetch. Omit for rolling 52 weeks.\n * @param token - Optional GitHub personal access token (required for private profiles)\n * @returns Promise resolving to ContributionData\n * @throws Error if user not found, rate limited, or network failure\n */\nexport async function fetchContributions(\n  username: string,\n  year?: number,\n  token?: string\n): Promise<ContributionData> {\n  let from: string;\n  let to: string;\n  let effectiveYear: number;\n\n  if (year != null) {\n    // Fixed calendar year\n    from = `${year}-01-01T00:00:00Z`;\n    to = `${year}-12-31T23:59:59Z`;\n    effectiveYear = year;\n  } else {\n    // Rolling 52-week window ending today\n    const now = new Date();\n    const oneYearAgo = new Date(now);\n    oneYearAgo.setFullYear(now.getFullYear() - 1);\n    from = oneYearAgo.toISOString();\n    to = now.toISOString();\n    effectiveYear = now.getFullYear();\n  }\n\n  // Make the GraphQL request\n  const response = await makeGraphQLRequest(\n    CONTRIBUTIONS_QUERY,\n    { username, from, to },\n    token\n  );\n\n  // Extract contribution calendar data\n  const calendar = response.data!.user!.contributionsCollection.contributionCalendar;\n\n  // Transform GitHub API response to ContributionWeek format\n  const weeks: ContributionWeek[] = calendar.weeks.map((week) => {\n    const days: ContributionDay[] = week.contributionDays.map((day) => ({\n      date: day.date,\n      count: day.contributionCount,\n      level: mapContributionLevel(day.contributionLevel),\n    }));\n\n    return {\n      days,\n      firstDay: days[0].date,\n    };\n  });\n\n  // Return contribution data with placeholder stats\n  // Stats will be computed by the stats module\n  return {\n    weeks,\n    stats: {\n      total: calendar.totalContributions,\n      longestStreak: 0,\n      currentStreak: 0,\n      mostActiveDay: '',\n    },\n    year: effectiveYear,\n    username,\n  };\n}\n","import type { ContributionWeek, ContributionStats } from './types.js';\n\n/**\n * Computes contribution statistics from weekly contribution data.\n *\n * @param weeks - Array of contribution weeks (each week has 7 days, Sunday-Saturday)\n * @returns Computed statistics including total, streaks, and most active day\n */\nexport function computeStats(weeks: ContributionWeek[]): ContributionStats {\n  // Handle empty input\n  if (weeks.length === 0) {\n    return {\n      total: 0,\n      longestStreak: 0,\n      currentStreak: 0,\n      mostActiveDay: 'Monday', // Default for empty data\n    };\n  }\n\n  // Flatten all days from all weeks into a single array\n  const allDays = weeks.flatMap((week) => week.days);\n\n  // 1. Compute total contributions\n  const total = allDays.reduce((sum, day) => sum + day.count, 0);\n\n  // 2. Compute longest streak\n  let longestStreak = 0;\n  let currentStreakCount = 0;\n\n  for (const day of allDays) {\n    if (day.count > 0) {\n      currentStreakCount++;\n      longestStreak = Math.max(longestStreak, currentStreakCount);\n    } else {\n      currentStreakCount = 0;\n    }\n  }\n\n  // 3. Compute current streak (counting backwards from the last day)\n  let currentStreak = 0;\n  for (let i = allDays.length - 1; i >= 0; i--) {\n    if (allDays[i].count > 0) {\n      currentStreak++;\n    } else {\n      break; // Stop at the first day with 0 contributions\n    }\n  }\n\n  // 4. Compute most active day of the week\n  // Accumulate contributions by day of week (0=Sunday, 1=Monday, ..., 6=Saturday)\n  const dayTotals: number[] = [0, 0, 0, 0, 0, 0, 0];\n\n  for (const week of weeks) {\n    for (let dayIndex = 0; dayIndex < week.days.length; dayIndex++) {\n      dayTotals[dayIndex] += week.days[dayIndex].count;\n    }\n  }\n\n  // Find the day with the maximum contributions\n  let maxDayIndex = 0;\n  let maxContributions = dayTotals[0];\n\n  for (let i = 1; i < dayTotals.length; i++) {\n    if (dayTotals[i] > maxContributions) {\n      maxContributions = dayTotals[i];\n      maxDayIndex = i;\n    }\n  }\n\n  // Map day index to day name\n  const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n  const mostActiveDay = dayNames[maxDayIndex];\n\n  return {\n    total,\n    longestStreak,\n    currentStreak,\n    mostActiveDay,\n  };\n}\n","import type { Theme } from '../core/types.js';\n\n/** Internal theme storage */\nconst themes: Map<string, Theme> = new Map();\n\n/**\n * Register a theme in the global registry\n * @param theme - Theme to register\n */\nexport function registerTheme(theme: Theme): void {\n  themes.set(theme.name, theme);\n}\n\n/**\n * Retrieve a theme by its unique name\n * @param name - Theme identifier\n * @returns The theme, or undefined if not found\n */\nexport function getTheme(name: string): Theme | undefined {\n  return themes.get(name);\n}\n\n/**\n * List all registered theme names\n * @returns Array of theme identifiers\n */\nexport function listThemes(): string[] {\n  return [...themes.keys()];\n}\n\n/**\n * Get the default theme name\n * @returns The default theme identifier\n */\nexport function getDefaultTheme(): string {\n  return 'terrain';\n}\n","import type { SvgAttributes } from './types.js';\n\n/**\n * Generate an SVG element string\n * @param tag - SVG element tag name\n * @param attrs - Element attributes\n * @param children - Optional child content\n * @returns SVG element string\n */\nexport function svgElement(\n  tag: string,\n  attrs: SvgAttributes,\n  children?: string\n): string {\n  const attrString = Object.entries(attrs)\n    .map(([key, value]) => `${key}=\"${value}\"`)\n    .join(' ');\n\n  if (children !== undefined) {\n    return `<${tag} ${attrString}>${children}</${tag}>`;\n  }\n  return `<${tag} ${attrString}/>`;\n}\n\n/**\n * Generate the root SVG element\n * @param attrs - SVG attributes\n * @param content - Inner SVG content\n * @returns Complete SVG string\n */\nexport function svgRoot(attrs: SvgAttributes, content: string): string {\n  const mergedAttrs: SvgAttributes = {\n    xmlns: 'http://www.w3.org/2000/svg',\n    viewBox: '0 0 840 240',\n    ...attrs,\n  };\n  return svgElement('svg', mergedAttrs, content);\n}\n\n/**\n * Wrap content in defs tags\n * @param content - Definitions content\n * @returns defs element string\n */\nexport function svgDefs(content: string): string {\n  return `<defs>${content}</defs>`;\n}\n\n/**\n * Wrap CSS in style tags with CDATA for XML safety\n * @param css - CSS content\n * @returns style element string\n */\nexport function svgStyle(css: string): string {\n  return `<style><![CDATA[${css}]]></style>`;\n}\n\n/**\n * Generate an SVG group element\n * @param attrs - Group attributes\n * @param children - Child elements\n * @returns g element string\n */\nexport function svgGroup(attrs: SvgAttributes, children: string): string {\n  return svgElement('g', attrs, children);\n}\n\n/**\n * Generate an SVG text element\n * @param x - X coordinate\n * @param y - Y coordinate\n * @param text - Text content\n * @param attrs - Optional additional attributes\n * @returns text element string\n */\nexport function svgText(\n  x: number,\n  y: number,\n  text: string,\n  attrs?: SvgAttributes\n): string {\n  const mergedAttrs: SvgAttributes = {\n    x,\n    y,\n    ...attrs,\n  };\n  return svgElement('text', mergedAttrs, escapeXml(text));\n}\n\n/**\n * Generate an SVG filter element\n * @param id - Filter ID\n * @param content - Filter primitives\n * @param attrs - Optional additional attributes\n * @returns filter element string\n */\nexport function svgFilter(\n  id: string,\n  content: string,\n  attrs?: SvgAttributes\n): string {\n  const defaultAttrs: SvgAttributes = {\n    id,\n    x: '-50%',\n    y: '-50%',\n    width: '200%',\n    height: '200%',\n  };\n  const mergedAttrs = { ...defaultAttrs, ...attrs };\n  return svgElement('filter', mergedAttrs, content);\n}\n\n/**\n * Generate an SVG gradient definition\n * @param type - Gradient type (linear or radial)\n * @param id - Gradient ID\n * @param stops - Gradient stops\n * @returns gradient element string\n */\nexport function svgGradient(\n  type: 'linear' | 'radial',\n  id: string,\n  stops: Array<{ offset: string; color: string; opacity?: number }>\n): string {\n  const tag = type === 'linear' ? 'linearGradient' : 'radialGradient';\n  const stopsContent = stops\n    .map((stop) => {\n      const attrs: SvgAttributes = {\n        offset: stop.offset,\n        'stop-color': stop.color,\n      };\n      if (stop.opacity !== undefined) {\n        attrs['stop-opacity'] = stop.opacity;\n      }\n      return svgElement('stop', attrs);\n    })\n    .join('');\n\n  return svgElement(tag, { id }, stopsContent);\n}\n\n/**\n * Format a number with comma separators\n * @param n - Number to format\n * @returns Formatted string (e.g., \"1,247\")\n */\nexport function formatNumber(n: number): string {\n  return n.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n\n/**\n * Escape special XML characters\n * @param str - String to escape\n * @returns XML-safe string\n */\nexport function escapeXml(str: string): string {\n  return str\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&apos;');\n}\n","/**\n * Linear interpolation between two values.\n * @param a - Start value\n * @param b - End value\n * @param t - Interpolation factor (0–1)\n * @returns Interpolated value\n */\nexport function lerp(a: number, b: number, t: number): number {\n  return a + (b - a) * t;\n}\n\n/**\n * Clamp a value to a specified range.\n * @param value - Value to clamp\n * @param min - Minimum bound\n * @param max - Maximum bound\n * @returns Clamped value\n */\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\n/**\n * Remap a value from one range to another.\n * @param value - Value to remap\n * @param inMin - Input range minimum\n * @param inMax - Input range maximum\n * @param outMin - Output range minimum\n * @param outMax - Output range maximum\n * @returns Remapped value\n */\nexport function remap(\n  value: number,\n  inMin: number,\n  inMax: number,\n  outMin: number,\n  outMax: number\n): number {\n  const t = (value - inMin) / (inMax - inMin);\n  return lerp(outMin, outMax, t);\n}\n\n/**\n * Simple djb2 hash function for strings.\n * Returns a deterministic number for use as a seed.\n * @param str - String to hash\n * @returns Hash value\n */\nexport function hash(str: string): number {\n  let hash = 5381;\n  for (let i = 0; i < str.length; i++) {\n    hash = (hash * 33) ^ str.charCodeAt(i);\n  }\n  return hash >>> 0; // Convert to unsigned 32-bit integer\n}\n\n/**\n * Create a seeded pseudo-random number generator using mulberry32 algorithm.\n * @param seed - Seed value\n * @returns Function that returns deterministic pseudo-random values in [0, 1)\n */\nexport function seededRandom(seed: number): () => number {\n  return function (): number {\n    let t = (seed += 0x6d2b79f5);\n    t = Math.imul(t ^ (t >>> 15), t | 1);\n    t ^= t + Math.imul(t ^ (t >>> 7), t | 61);\n    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;\n  };\n}\n","import type { ContributionData, ContributionStats, ThemePalette } from '../core/types.js';\nimport { formatNumber } from '../core/svg.js';\nimport { clamp } from '../utils/math.js';\n\n/** 10-level intensity (0 = none, 9 = maximum) */\nexport type Level10 = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9;\n\n/** 100-level intensity (0 = none, 1–99 = min to max) */\nexport type Level100 = number;\n\n/** A positioned contribution cell with 10-level intensity */\nexport interface GridCell10 extends GridCell {\n  /** Fine-grained intensity level (0–9) */\n  level10: Level10;\n}\n\n/** A positioned contribution cell with 100-level intensity */\nexport interface GridCell100 extends GridCell {\n  /** Fine-grained intensity level (0–99) */\n  level100: Level100;\n}\n\n/** System font stack confirmed working in SVG renderers */\nconst FONT_FAMILY = \"'Segoe UI', system-ui, sans-serif\";\n\n/**\n * Render the SVG title text at the top-left of the card\n * @param title - Title text to display\n * @param palette - Theme color palette\n * @returns SVG text element string\n */\nexport function renderTitle(title: string, palette: ThemePalette): string {\n  return [\n    `<text`,\n    ` x=\"24\"`,\n    ` y=\"17\"`,\n    ` font-family=\"${FONT_FAMILY}\"`,\n    ` font-size=\"14\"`,\n    ` fill=\"${palette.text.primary}\"`,\n    ` font-weight=\"600\"`,\n    `>${escapeXml(title)}</text>`,\n  ].join('');\n}\n\n/**\n * Render the stats bar at the bottom of the card\n * @param stats - Computed contribution statistics\n * @param palette - Theme color palette\n * @returns SVG group element string containing stats\n */\nexport function renderStatsBar(stats: ContributionStats, palette: ThemePalette): string {\n  const items = [\n    `${formatNumber(stats.total)} contributions`,\n    `${formatNumber(stats.currentStreak)}d current streak`,\n    `${formatNumber(stats.longestStreak)}d longest streak`,\n    `Most active: ${stats.mostActiveDay}`,\n  ];\n\n  const segments = items\n    .map(\n      (text, i) =>\n        `<text`\n        + ` x=\"${24 + i * 200}\"`\n        + ` y=\"233\"`\n        + ` font-family=\"${FONT_FAMILY}\"`\n        + ` font-size=\"11\"`\n        + ` fill=\"${palette.text.secondary}\"`\n        + `>${escapeXml(text)}</text>`,\n    )\n    .join('');\n\n  return `<g class=\"stats-bar\">${segments}</g>`;\n}\n\n/** A positioned contribution cell ready for rendering */\nexport interface GridCell {\n  /** X coordinate */\n  x: number;\n  /** Y coordinate */\n  y: number;\n  /** Intensity level (0–4) */\n  level: 0 | 1 | 2 | 3 | 4;\n  /** Raw contribution count */\n  count: number;\n  /** ISO date string (YYYY-MM-DD) */\n  date: string;\n}\n\n/**\n * Compute positioned grid cells from contribution data\n * @param data - Complete contribution data for one year\n * @param options - Layout configuration\n * @returns Flat array of positioned cells for themes to render\n */\nexport function contributionGrid(\n  data: ContributionData,\n  options: {\n    cellSize: number;\n    gap: number;\n    offsetX: number;\n    offsetY: number;\n  },\n): GridCell[] {\n  const { cellSize, gap, offsetX, offsetY } = options;\n  const cells: GridCell[] = [];\n\n  for (let week = 0; week < data.weeks.length; week++) {\n    const weekData = data.weeks[week];\n    for (let day = 0; day < weekData.days.length; day++) {\n      const dayData = weekData.days[day];\n      cells.push({\n        x: offsetX + week * (cellSize + gap),\n        y: offsetY + day * (cellSize + gap),\n        level: dayData.level,\n        count: dayData.count,\n        date: dayData.date,\n      });\n    }\n  }\n\n  return cells;\n}\n\n/**\n * Compute a fine-grained 10-level intensity from raw contribution count.\n * Level 0 = no contributions. Levels 1–9 are distributed using the ratio\n * of count to maxCount, with more granularity at lower levels where most data lives.\n * @param count - Raw contribution count for this day\n * @param maxCount - Maximum count across the entire year (for normalization)\n * @returns Level from 0–9\n */\nexport function computeLevel10(count: number, maxCount: number): Level10 {\n  if (count === 0) return 0;\n  if (maxCount <= 0) return 1;\n  const ratio = clamp(count / maxCount, 0, 1);\n  if (ratio <= 0.06) return 1;\n  if (ratio <= 0.12) return 2;\n  if (ratio <= 0.20) return 3;\n  if (ratio <= 0.30) return 4;\n  if (ratio <= 0.42) return 5;\n  if (ratio <= 0.55) return 6;\n  if (ratio <= 0.70) return 7;\n  if (ratio <= 0.85) return 8;\n  return 9;\n}\n\n/**\n * Enrich grid cells with 10-level intensity based on raw contribution counts.\n * @param cells - Positioned grid cells from contributionGrid()\n * @param data - Full contribution data (used to compute maxCount)\n * @returns New array of GridCell10 with level10 assigned\n */\nexport function enrichGridCells(cells: GridCell[], data: ContributionData): GridCell10[] {\n  let maxCount = 0;\n  for (const week of data.weeks) {\n    for (const day of week.days) {\n      if (day.count > maxCount) maxCount = day.count;\n    }\n  }\n\n  return cells.map(cell => ({\n    ...cell,\n    level10: computeLevel10(cell.count, maxCount),\n  }));\n}\n\n/**\n * Compute a fine-grained 100-level intensity from raw contribution count.\n * Level 0 = no contributions. Levels 1–99 use a sqrt curve for a balanced\n * distribution that lets moderate activity reach village/city levels.\n * The effectiveMax should be the P90 of non-zero counts to prevent\n * outlier days from compressing the entire range.\n */\nexport function computeLevel100(count: number, maxCount: number): Level100 {\n  if (count === 0) return 0;\n  if (maxCount <= 0) return 1;\n  const ratio = clamp(count / maxCount, 0, 1);\n  const curved = Math.sqrt(ratio);\n  return clamp(Math.round(curved * 98) + 1, 1, 99);\n}\n\n/**\n * Enrich grid cells with 100-level intensity based on raw contribution counts.\n * Uses the P90 of non-zero counts as the effective max, so outlier days\n * don't compress the entire range into low levels.\n */\nexport function enrichGridCells100(\n  cells: GridCell[],\n  data: ContributionData,\n): GridCell100[] {\n  const nonZeroCounts: number[] = [];\n  for (const week of data.weeks) {\n    for (const day of week.days) {\n      if (day.count > 0) nonZeroCounts.push(day.count);\n    }\n  }\n\n  // P90 of non-zero counts — outliers above this cap at level 99\n  nonZeroCounts.sort((a, b) => a - b);\n  const p90Index = Math.floor(nonZeroCounts.length * 0.9);\n  const effectiveMax = nonZeroCounts.length > 0\n    ? nonZeroCounts[Math.min(p90Index, nonZeroCounts.length - 1)]\n    : 1;\n\n  return cells.map(cell => ({\n    ...cell,\n    level100: computeLevel100(cell.count, effectiveMax),\n  }));\n}\n\n/**\n * Escape special XML characters in text content\n * @param str - String to escape\n * @returns XML-safe string\n */\nfunction escapeXml(str: string): string {\n  return str\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&apos;');\n}\n","/**\n * Seasonal Terrain System\n *\n * Divides the 52-week contribution grid into 8 seasonal zones so the\n * terrain visually transitions through winter -> spring -> summer -> autumn.\n *\n * Zone layout (by rotated week index):\n *   Weeks:  0-6    7-12   13-19  20-25  26-32  33-38  39-45  46-51\n *   Zone:    0      1      2      3      4      5      6     7\n *   Season: WIN   W->Sp   SPR  Sp->Su   SUM  Su->Au   AUT  Au->W\n *\n * A **rotation** offset aligns grid weeks to calendar months:\n *   rotatedWeek = (week + rotation) % 52\n * where `rotation` is computed from the oldest week's actual date\n * relative to December 1 (start of winter in ZONE_BOUNDS).\n *\n * Southern Hemisphere: +26 added to rotation (6-month shift).\n * Summer (zone 4) = base palette (no tinting).\n */\n\nimport { lerp, clamp } from '../../utils/math.js';\n\n// ── Types ────────────────────────────────────────────────────\n\nexport type Hemisphere = 'north' | 'south';\n\n/**\n * Season zone index (0-7).\n * Even zones are peak seasons, odd zones are transitions.\n */\nexport type SeasonZone = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7;\n\n/** Peak season identifiers */\nexport type PeakSeason = 'winter' | 'spring' | 'summer' | 'autumn';\n\n/** Seasonal color tint parameters */\nexport interface SeasonalTint {\n  /** Shift toward a target color (0 = no shift, 1 = full) */\n  colorShift: number;\n  /** Target color for blending [R, G, B] */\n  colorTarget: [number, number, number];\n  /** Green channel multiplier (1 = unchanged) */\n  greenMul: number;\n  /** Warmth: positive adds red and subtracts blue */\n  warmth: number;\n  /** Snow coverage (0-1), blends terrain toward white */\n  snowCoverage: number;\n  /** Saturation multiplier (1 = unchanged, >1 = boost, <1 = desaturate) */\n  saturation: number;\n}\n\n// ── Zone Boundaries ──────────────────────────────────────────\n\ninterface ZoneBound {\n  zone: SeasonZone;\n  start: number;\n  end: number;\n}\n\nconst ZONE_BOUNDS: ZoneBound[] = [\n  { zone: 0, start: 0,  end: 6 },   // Winter\n  { zone: 1, start: 7,  end: 12 },  // Winter -> Spring\n  { zone: 2, start: 13, end: 19 },  // Spring\n  { zone: 3, start: 20, end: 25 },  // Spring -> Summer\n  { zone: 4, start: 26, end: 32 },  // Summer (base)\n  { zone: 5, start: 33, end: 38 },  // Summer -> Autumn\n  { zone: 6, start: 39, end: 45 },  // Autumn\n  { zone: 7, start: 46, end: 51 },  // Autumn -> Winter\n];\n\n// ── Rotation Computation ────────────────────────────────────\n\n/**\n * Compute the season rotation offset from the oldest week's date.\n *\n * The rotation maps grid week 0 (oldest data) to the correct ZONE_BOUNDS\n * position so that calendar months align with seasons.\n *\n * ZONE_BOUNDS start at week 0 = Winter (December).\n * The rotation is the number of weeks between December 1 and the\n * oldest week's date — so week 0 in the data lands on the right zone.\n *\n * Southern hemisphere adds +26 (6-month shift).\n */\nexport function computeSeasonRotation(\n  oldestWeekDate: Date,\n  hemisphere: Hemisphere = 'north',\n): number {\n  const year = oldestWeekDate.getFullYear();\n  const dec1 = new Date(year, 11, 1); // December 1 of that year\n  const refDate = oldestWeekDate < dec1\n    ? new Date(year - 1, 11, 1) // use previous year's Dec 1\n    : dec1;\n  const diffMs = oldestWeekDate.getTime() - refDate.getTime();\n  let rotation = Math.round(diffMs / (7 * 86_400_000));\n  if (hemisphere === 'south') rotation = (rotation + 26) % 52;\n  return ((rotation % 52) + 52) % 52;\n}\n\n// ── Zone Lookup ──────────────────────────────────────────────\n\n/**\n * Get the season zone for a given week using the pre-computed rotation.\n * `rotation` is obtained from `computeSeasonRotation()`.\n */\nexport function getSeasonZone(week: number, rotation: number = 0): SeasonZone {\n  let w = (week + rotation) % 52;\n  w = clamp(w, 0, 51);\n\n  for (const bound of ZONE_BOUNDS) {\n    if (w >= bound.start && w <= bound.end) {\n      return bound.zone;\n    }\n  }\n  return 4; // fallback: summer\n}\n\n/**\n * Get the peak season name for a zone.\n * Transition zones return the \"from\" season.\n */\nexport function getZonePeakSeason(zone: SeasonZone): PeakSeason {\n  switch (zone) {\n    case 0: case 7: return 'winter';\n    case 1: case 2: return 'spring';\n    case 3: case 4: return 'summer';\n    case 5: case 6: return 'autumn';\n  }\n}\n\n/**\n * Get the blend factor within a transition zone (0 = start season, 1 = end season).\n * For peak zones, returns 0 (fully that season).\n */\nexport function getTransitionBlend(week: number, rotation: number = 0): {\n  from: PeakSeason;\n  to: PeakSeason;\n  t: number;\n} {\n  let w = (week + rotation) % 52;\n  w = clamp(w, 0, 51);\n\n  const zone = getSeasonZone(week, rotation);\n\n  switch (zone) {\n    case 0: return { from: 'winter', to: 'winter', t: 0 };\n    case 1: {\n      const bound = ZONE_BOUNDS[1];\n      const t = (w - bound.start) / (bound.end - bound.start);\n      return { from: 'winter', to: 'spring', t };\n    }\n    case 2: return { from: 'spring', to: 'spring', t: 0 };\n    case 3: {\n      const bound = ZONE_BOUNDS[3];\n      const t = (w - bound.start) / (bound.end - bound.start);\n      return { from: 'spring', to: 'summer', t };\n    }\n    case 4: return { from: 'summer', to: 'summer', t: 0 };\n    case 5: {\n      const bound = ZONE_BOUNDS[5];\n      const t = (w - bound.start) / (bound.end - bound.start);\n      return { from: 'summer', to: 'autumn', t };\n    }\n    case 6: return { from: 'autumn', to: 'autumn', t: 0 };\n    case 7: {\n      const bound = ZONE_BOUNDS[7];\n      const t = (w - bound.start) / (bound.end - bound.start);\n      return { from: 'autumn', to: 'winter', t };\n    }\n  }\n}\n\n// ── Seasonal Tints ───────────────────────────────────────────\n\n/** Peak season tint definitions */\nconst SEASON_TINTS: Record<PeakSeason, SeasonalTint> = {\n  winter: {\n    colorShift: 0.35,\n    colorTarget: [238, 242, 248],  // #eef2f8 — snowy white\n    greenMul: 0.60,\n    warmth: -5,\n    snowCoverage: 0.35,\n    saturation: 0.65,\n  },\n  spring: {\n    colorShift: 0.05,\n    colorTarget: [255, 220, 230],  // pink warmth\n    greenMul: 1.15,\n    warmth: 5,\n    snowCoverage: 0,\n    saturation: 1.15,\n  },\n  summer: {\n    colorShift: 0,\n    colorTarget: [0, 0, 0],\n    greenMul: 1.0,\n    warmth: 0,\n    snowCoverage: 0,\n    saturation: 1.0,\n  },\n  autumn: {\n    colorShift: 0.10,\n    colorTarget: [210, 140, 60],   // warm amber\n    greenMul: 0.70,\n    warmth: 20,\n    snowCoverage: 0,\n    saturation: 1.05,\n  },\n};\n\n/**\n * Get the seasonal tint for a given week.\n * Transition zones interpolate between neighboring peak tints.\n */\nexport function getSeasonalTint(week: number, rotation: number = 0): SeasonalTint {\n  const { from, to, t } = getTransitionBlend(week, rotation);\n  const a = SEASON_TINTS[from];\n  const b = SEASON_TINTS[to];\n  return lerpTint(a, b, t);\n}\n\n/**\n * Interpolate between two seasonal tints.\n */\nexport function lerpTint(a: SeasonalTint, b: SeasonalTint, t: number): SeasonalTint {\n  return {\n    colorShift: lerp(a.colorShift, b.colorShift, t),\n    colorTarget: [\n      Math.round(lerp(a.colorTarget[0], b.colorTarget[0], t)),\n      Math.round(lerp(a.colorTarget[1], b.colorTarget[1], t)),\n      Math.round(lerp(a.colorTarget[2], b.colorTarget[2], t)),\n    ],\n    greenMul: lerp(a.greenMul, b.greenMul, t),\n    warmth: lerp(a.warmth, b.warmth, t),\n    snowCoverage: lerp(a.snowCoverage, b.snowCoverage, t),\n    saturation: lerp(a.saturation, b.saturation, t),\n  };\n}\n\n// ── Color Tinting ────────────────────────────────────────────\n\n/**\n * Apply a seasonal tint to an RGB color.\n * This is the core color transform used by getSeasonalPalette100.\n */\nexport function applyTint(r: number, g: number, b: number, tint: SeasonalTint): [number, number, number] {\n  // 1. Apply saturation adjustment\n  const gray = 0.299 * r + 0.587 * g + 0.114 * b;\n  let nr = gray + (r - gray) * tint.saturation;\n  let ng = gray + (g - gray) * tint.saturation;\n  let nb = gray + (b - gray) * tint.saturation;\n\n  // 2. Apply green multiplier\n  ng *= tint.greenMul;\n\n  // 3. Apply warmth (add red, subtract blue)\n  nr += tint.warmth;\n  nb -= tint.warmth;\n\n  // 4. Blend toward color target\n  if (tint.colorShift > 0) {\n    nr = lerp(nr, tint.colorTarget[0], tint.colorShift);\n    ng = lerp(ng, tint.colorTarget[1], tint.colorShift);\n    nb = lerp(nb, tint.colorTarget[2], tint.colorShift);\n  }\n\n  // 5. Snow coverage: blend toward white\n  if (tint.snowCoverage > 0) {\n    nr = lerp(nr, 240, tint.snowCoverage);\n    ng = lerp(ng, 244, tint.snowCoverage);\n    nb = lerp(nb, 250, tint.snowCoverage);\n  }\n\n  return [\n    clamp(Math.round(nr), 0, 255),\n    clamp(Math.round(ng), 0, 255),\n    clamp(Math.round(nb), 0, 255),\n  ];\n}\n\n/**\n * Apply a seasonal tint to a hex color string.\n * Returns a new hex color string.\n */\nexport function applyTintToHex(hex: string, tint: SeasonalTint): string {\n  const r = parseInt(hex.slice(1, 3), 16);\n  const g = parseInt(hex.slice(3, 5), 16);\n  const b = parseInt(hex.slice(5, 7), 16);\n  const [nr, ng, nb] = applyTint(r, g, b, tint);\n  return '#' + [nr, ng, nb].map(c => c.toString(16).padStart(2, '0')).join('');\n}\n\n/**\n * Apply a seasonal tint to an \"rgb(r,g,b)\" string.\n * Returns a new rgb() string. Handles rgba() too (preserves alpha).\n */\nexport function applyTintToRgb(rgb: string, tint: SeasonalTint): string {\n  const m = rgb.match(/(\\d+)/g);\n  if (!m || m.length < 3) return rgb;\n  const [r, g, b] = [+m[0], +m[1], +m[2]];\n  const [nr, ng, nb] = applyTint(r, g, b, tint);\n  if (m.length >= 4) {\n    // rgba\n    return `rgba(${nr},${ng},${nb},${m[3].includes('.') ? m[3] : +m[3]})`;\n  }\n  return `rgb(${nr},${ng},${nb})`;\n}\n\n// ── Seasonal Asset Pool Overrides ────────────────────────────\n\nexport type SeasonalAssetType =\n  // Winter\n  | 'snowPine' | 'snowDeciduous' | 'snowman' | 'snowdrift' | 'igloo'\n  | 'frozenPond' | 'icicle' | 'sled' | 'snowCoveredRock' | 'bareBush'\n  | 'winterBird' | 'firewood'\n  // Spring\n  | 'cherryBlossom' | 'cherryBlossomSmall' | 'cherryPetals' | 'tulip'\n  | 'tulipField' | 'sprout' | 'nest' | 'lamb' | 'crocus' | 'rainPuddle'\n  | 'birdhouse' | 'gardenBed'\n  // Summer\n  | 'parasol' | 'beachTowel' | 'sandcastleSummer' | 'surfboard'\n  | 'iceCreamCart' | 'hammock' | 'sunflower' | 'watermelon' | 'sprinkler'\n  | 'lemonade' | 'fireflies' | 'swimmingPool'\n  // Autumn\n  | 'autumnMaple' | 'autumnOak' | 'autumnBirch' | 'autumnGinkgo'\n  | 'fallenLeaves' | 'leafSwirl' | 'acorn' | 'cornStalk'\n  | 'scarecrowAutumn' | 'harvestBasket' | 'hotDrink' | 'autumnWreath';\n\n/** Assets to remove from pools per season (base assets incompatible with the season) */\nconst SEASON_REMOVE: Record<PeakSeason, Set<string>> = {\n  winter: new Set([\n    'flower', 'butterfly', 'wildflowerPatch', 'tulip', 'tulipField',\n    'cherryBlossom', 'cherryBlossomSmall', 'cherryPetals', 'crocus',\n    'lamb', 'sprout', 'gardenBed', 'birdhouse', 'nest',\n    'parasol', 'beachTowel', 'surfboard', 'swimmingPool',\n    'sunflower', 'watermelon', 'hammock', 'iceCreamCart',\n    'lemonade', 'sprinkler', 'fireflies',\n    'sandcastleSummer',\n  ]),\n  spring: new Set([\n    'snowPine', 'snowDeciduous', 'snowman', 'snowdrift', 'igloo',\n    'frozenPond', 'icicle', 'sled', 'snowCoveredRock', 'bareBush',\n    'winterBird', 'firewood',\n    'parasol', 'beachTowel', 'surfboard', 'swimmingPool',\n    'iceCreamCart', 'lemonade', 'sprinkler',\n    'sandcastleSummer',\n  ]),\n  summer: new Set([\n    'snowPine', 'snowDeciduous', 'snowman', 'snowdrift', 'igloo',\n    'frozenPond', 'icicle', 'sled', 'snowCoveredRock', 'bareBush',\n    'winterBird', 'firewood',\n    'autumnMaple', 'autumnOak', 'autumnBirch', 'autumnGinkgo',\n    'fallenLeaves', 'leafSwirl', 'cornStalk', 'scarecrowAutumn',\n    'harvestBasket', 'hotDrink', 'autumnWreath',\n  ]),\n  autumn: new Set([\n    'snowPine', 'snowDeciduous', 'snowman', 'snowdrift', 'igloo',\n    'frozenPond', 'icicle', 'sled', 'snowCoveredRock', 'bareBush',\n    'winterBird', 'firewood',\n    'flower', 'butterfly', 'wildflowerPatch', 'tulip', 'tulipField',\n    'cherryBlossom', 'cherryBlossomSmall', 'cherryPetals', 'crocus',\n    'lamb', 'sprout', 'gardenBed', 'birdhouse', 'nest',\n    'parasol', 'beachTowel', 'surfboard', 'swimmingPool',\n    'sunflower', 'watermelon', 'hammock', 'iceCreamCart',\n    'lemonade', 'sprinkler', 'fireflies',\n    'sandcastleSummer',\n  ]),\n};\n\n/** Assets to add per season, keyed by level range category */\ninterface SeasonalAdditions {\n  /** Assets for grassland/forest level range (31-65) */\n  nature: string[];\n  /** Assets for farm/village range (66-90) */\n  settlement: string[];\n  /** Assets for any elevated land (23+) */\n  general: string[];\n}\n\nconst SEASON_ADD: Record<PeakSeason, SeasonalAdditions> = {\n  winter: {\n    nature: ['snowPine', 'snowDeciduous', 'snowCoveredRock', 'bareBush', 'winterBird', 'snowdrift'],\n    settlement: ['snowman', 'igloo', 'sled', 'firewood', 'icicle', 'snowdrift'],\n    general: ['snowdrift', 'snowCoveredRock', 'bareBush', 'icicle'],\n  },\n  spring: {\n    nature: ['cherryBlossom', 'cherryBlossomSmall', 'tulip', 'tulipField', 'sprout', 'crocus', 'lamb'],\n    settlement: ['cherryBlossom', 'tulipField', 'nest', 'birdhouse', 'gardenBed', 'rainPuddle', 'cherryPetals'],\n    general: ['sprout', 'crocus', 'cherryPetals', 'rainPuddle'],\n  },\n  summer: {\n    nature: ['sunflower', 'fireflies', 'watermelon'],\n    settlement: ['parasol', 'beachTowel', 'hammock', 'iceCreamCart', 'lemonade', 'sprinkler', 'swimmingPool'],\n    general: ['sunflower', 'watermelon'],\n  },\n  autumn: {\n    nature: ['autumnMaple', 'autumnOak', 'autumnBirch', 'autumnGinkgo', 'fallenLeaves', 'leafSwirl', 'acorn'],\n    settlement: ['cornStalk', 'scarecrowAutumn', 'harvestBasket', 'hotDrink', 'autumnWreath', 'fallenLeaves'],\n    general: ['fallenLeaves', 'leafSwirl', 'acorn'],\n  },\n};\n\n/**\n * Get seasonal pool overrides for a given week.\n * Returns sets of assets to add and remove from the base pool.\n */\nexport function getSeasonalPoolOverrides(\n  week: number,\n  rotation: number = 0,\n  level: number = 50,\n): { add: string[]; remove: Set<string> } {\n  const { from, to, t } = getTransitionBlend(week, rotation);\n\n  // For peak seasons (t === 0 and from === to), use the season directly\n  if (from === to) {\n    const remove = SEASON_REMOVE[from];\n    const additions = SEASON_ADD[from];\n    const add = getLevelAdditions(additions, level);\n    return { add, remove };\n  }\n\n  // For transitions, blend: use \"from\" season removes, but mix additions\n  const remove = new Set<string>();\n  // Include removes from both seasons (conservative)\n  for (const r of SEASON_REMOVE[from]) remove.add(r);\n  for (const r of SEASON_REMOVE[to]) remove.add(r);\n\n  // Blend additions: more from \"to\" as t increases\n  const fromAdd = getLevelAdditions(SEASON_ADD[from], level);\n  const toAdd = getLevelAdditions(SEASON_ADD[to], level);\n\n  // Take proportional mix\n  const fromCount = Math.round(fromAdd.length * (1 - t));\n  const toCount = Math.round(toAdd.length * t);\n  const add = [\n    ...fromAdd.slice(0, fromCount),\n    ...toAdd.slice(0, toCount),\n  ];\n\n  return { add, remove };\n}\n\nfunction getLevelAdditions(additions: SeasonalAdditions, level: number): string[] {\n  const result: string[] = [...additions.general];\n  if (level >= 31 && level <= 65) {\n    result.push(...additions.nature);\n  } else if (level >= 66) {\n    result.push(...additions.settlement);\n  }\n  return result;\n}\n","import type { ColorMode } from '../../core/types.js';\nimport { lerp, clamp } from '../../utils/math.js';\nimport type { SeasonalTint } from './seasons.js';\nimport { getSeasonalTint, applyTintToHex, applyTintToRgb } from './seasons.js';\n\n/** RGB color tuple */\ntype RGB = [number, number, number];\n\n/** Colors for one elevation level: top face, left face, right face */\nexport interface ElevationColors {\n  top: string;\n  left: string;\n  right: string;\n}\n\n/** Cloud rendering properties */\nexport interface CloudColors {\n  fill: string;\n  stroke: string;\n  opacity: number;\n}\n\n/** Colors used for terrain assets */\nexport interface AssetColors {\n  trunk: string;\n  pine: string;\n  leaf: string;\n  bush: string;\n  roofA: string;\n  roofB: string;\n  wall: string;\n  wallShade: string;\n  church: string;\n  fence: string;\n  wheat: string;\n  sheep: string;\n  sheepHead: string;\n  cow: string;\n  cowSpot: string;\n  chicken: string;\n  whale: string;\n  whaleBelly: string;\n  boat: string;\n  sail: string;\n  fish: string;\n  flag: string;\n  windmill: string;\n  windBlade: string;\n  well: string;\n  chimney: string;\n  path: string;\n  water: string;\n  waterLight: string;\n  // New asset colors for 38-type expansion\n  deer: string;\n  horse: string;\n  flower: string;\n  flowerCenter: string;\n  mushroom: string;\n  mushroomCap: string;\n  rock: string;\n  boulder: string;\n  palm: string;\n  willow: string;\n  seagull: string;\n  dock: string;\n  tent: string;\n  tentStripe: string;\n  hut: string;\n  market: string;\n  marketAwning: string;\n  inn: string;\n  innSign: string;\n  blacksmith: string;\n  anvil: string;\n  castle: string;\n  castleRoof: string;\n  tower: string;\n  bridge: string;\n  cart: string;\n  barrel: string;\n  torch: string;\n  torchFlame: string;\n  cobble: string;\n  smoke: string;\n  bird: string;\n  scarecrow: string;\n  scarecrowHat: string;\n  stump: string;\n  riverOverlay: string;\n  pondOverlay: string;\n  reeds: string;\n  fountain: string;\n  fountainWater: string;\n  canal: string;\n  gardenTree: string;\n  ricePaddy: string;\n  ricePaddyWater: string;\n  // New asset colors for 118-type expansion\n  jellyfish: string;\n  coral: string;\n  turtle: string;\n  buoy: string;\n  lighthouse: string;\n  crab: string;\n  driftwood: string;\n  sandcastle: string;\n  tidePools: string;\n  heron: string;\n  shellfish: string;\n  cattail: string;\n  frog: string;\n  lily: string;\n  rabbit: string;\n  fox: string;\n  butterfly: string;\n  butterflyWing: string;\n  beehive: string;\n  wildflower: string;\n  tallGrass: string;\n  birchBark: string;\n  haybale: string;\n  owl: string;\n  squirrel: string;\n  moss: string;\n  fern: string;\n  deadTree: string;\n  log: string;\n  berryBush: string;\n  berry: string;\n  spiderWeb: string;\n  silo: string;\n  pig: string;\n  trough: string;\n  haystack: string;\n  orchard: string;\n  orchardFruit: string;\n  beeFarm: string;\n  pumpkin: string;\n  tavern: string;\n  tavernSign: string;\n  bakery: string;\n  stable: string;\n  gardenFence: string;\n  laundry: string;\n  doghouse: string;\n  shrine: string;\n  wagon: string;\n  cathedral: string;\n  cathedralWindow: string;\n  library: string;\n  clocktower: string;\n  clockFace: string;\n  statue: string;\n  parkBench: string;\n  warehouse: string;\n  gatehouse: string;\n  manor: string;\n  manorGarden: string;\n  signpost: string;\n  lantern: string;\n  lanternGlow: string;\n  woodpile: string;\n  puddle: string;\n  campfire: string;\n  campfireFlame: string;\n  // ── Seasonal Asset Colors ────────────────────────────\n  // Winter\n  snowCap: string;\n  snowGround: string;\n  ice: string;\n  icicle: string;\n  frozenWater: string;\n  igloo: string;\n  sledWood: string;\n  sledRunner: string;\n  scarfRed: string;\n  snowmanCoal: string;\n  snowmanCarrot: string;\n  winterBirdRed: string;\n  winterBirdBrown: string;\n  firewoodLog: string;\n  bareBranch: string;\n  frostWhite: string;\n  // Spring\n  cherryPetalPink: string;\n  cherryPetalWhite: string;\n  cherryTrunk: string;\n  cherryBranch: string;\n  tulipRed: string;\n  tulipYellow: string;\n  tulipPurple: string;\n  tulipStem: string;\n  sproutGreen: string;\n  nestBrown: string;\n  eggBlue: string;\n  eggWhite: string;\n  crocusPurple: string;\n  crocusYellow: string;\n  lambWool: string;\n  birdhouseWood: string;\n  gardenSoil: string;\n  // Summer\n  parasolRed: string;\n  parasolBlue: string;\n  parasolYellow: string;\n  parasolStripe: string;\n  beachTowelA: string;\n  beachTowelB: string;\n  sandcastleWall: string;\n  surfboardBody: string;\n  surfboardStripe: string;\n  iceCreamCart: string;\n  iceCreamUmbrella: string;\n  hammockFabric: string;\n  sunflowerPetal: string;\n  sunflowerCenter: string;\n  watermelonRind: string;\n  watermelonFlesh: string;\n  watermelonSeed: string;\n  lemonadeStand: string;\n  sprinklerMetal: string;\n  poolWater: string;\n  poolEdge: string;\n  // Autumn\n  mapleRed: string;\n  mapleCrimson: string;\n  mapleOrange: string;\n  oakGold: string;\n  oakBrown: string;\n  birchYellow: string;\n  ginkgoYellow: string;\n  fallenLeafRed: string;\n  fallenLeafOrange: string;\n  fallenLeafGold: string;\n  fallenLeafBrown: string;\n  acornBody: string;\n  acornCap: string;\n  cornStalkColor: string;\n  cornEar: string;\n  harvestApple: string;\n  harvestGrape: string;\n  hotDrinkMug: string;\n  hotDrinkSteam: string;\n  wreathGreen: string;\n  wreathBerry: string;\n}\n\n/** A color anchor point for interpolation */\ninterface ColorAnchor {\n  level: number;\n  rgb: RGB;\n}\n\n/** A height anchor point for interpolation */\ninterface HeightAnchor {\n  level: number;\n  height: number;\n}\n\n/** 100-level terrain palette with smooth interpolation */\nexport interface TerrainPalette100 {\n  getElevation(level: number): ElevationColors;\n  getHeight(level: number): number;\n  text: { primary: string; secondary: string; accent: string };\n  bg: { subtle: string };\n  cloud: CloudColors;\n  assets: AssetColors;\n  /** Pre-computed array for backward compatibility (10 sampled elevations) */\n  elevations: ElevationColors[];\n  /** Pre-computed array for backward compatibility (10 sampled heights) */\n  heights: number[];\n}\n\n// ── Interpolation Engine ─────────────────────────────────────\n\nfunction interpolateRGB(anchors: ColorAnchor[], level: number): RGB {\n  const l = clamp(level, 0, 99);\n  // Find surrounding anchors\n  let lower = anchors[0];\n  let upper = anchors[anchors.length - 1];\n  for (let i = 0; i < anchors.length - 1; i++) {\n    if (l >= anchors[i].level && l <= anchors[i + 1].level) {\n      lower = anchors[i];\n      upper = anchors[i + 1];\n      break;\n    }\n  }\n  if (lower.level === upper.level) return lower.rgb;\n  const t = (l - lower.level) / (upper.level - lower.level);\n  return [\n    Math.round(lerp(lower.rgb[0], upper.rgb[0], t)),\n    Math.round(lerp(lower.rgb[1], upper.rgb[1], t)),\n    Math.round(lerp(lower.rgb[2], upper.rgb[2], t)),\n  ];\n}\n\nfunction interpolateHeight(anchors: HeightAnchor[], level: number): number {\n  const l = clamp(level, 0, 99);\n  let lower = anchors[0];\n  let upper = anchors[anchors.length - 1];\n  for (let i = 0; i < anchors.length - 1; i++) {\n    if (l >= anchors[i].level && l <= anchors[i + 1].level) {\n      lower = anchors[i];\n      upper = anchors[i + 1];\n      break;\n    }\n  }\n  if (lower.level === upper.level) return lower.height;\n  const t = (l - lower.level) / (upper.level - lower.level);\n  return Math.round(lerp(lower.height, upper.height, t));\n}\n\nfunction darken(rgb: RGB, factor: number): string {\n  return `rgb(${Math.round(rgb[0] * factor)},${Math.round(rgb[1] * factor)},${Math.round(rgb[2] * factor)})`;\n}\n\nfunction rgbToHex(rgb: RGB): string {\n  return '#' + rgb.map(c => c.toString(16).padStart(2, '0')).join('');\n}\n\nfunction makeElevation(rgb: RGB): ElevationColors {\n  return {\n    top: rgbToHex(rgb),\n    left: darken(rgb, 0.75),\n    right: darken(rgb, 0.60),\n  };\n}\n\n// ── Dark Mode Anchors ────────────────────────────────────────\n\nconst DARK_COLOR_ANCHORS: ColorAnchor[] = [\n  { level: 0,  rgb: [160, 130, 90] },     // Desert sand\n  { level: 4,  rgb: [140, 120, 85] },     // Dry earth\n  { level: 8,  rgb: [100, 115, 100] },    // Scrubland\n  { level: 12, rgb: [40, 80, 130] },      // Shallow water / oasis\n  { level: 18, rgb: [30, 70, 120] },      // Deeper water\n  { level: 24, rgb: [80, 130, 95] },      // Wetland shore\n  { level: 30, rgb: [130, 160, 90] },     // Grassland\n  { level: 40, rgb: [90, 145, 60] },      // Lush grass\n  { level: 52, rgb: [55, 120, 42] },      // Forest\n  { level: 65, rgb: [45, 105, 38] },      // Dense forest\n  { level: 75, rgb: [90, 140, 55] },      // Rich green farmland\n  { level: 85, rgb: [80, 125, 50] },      // Village green\n  { level: 93, rgb: [70, 110, 52] },      // Town with parks\n  { level: 99, rgb: [65, 100, 55] },      // Lush city\n];\n\nconst DARK_HEIGHT_ANCHORS: HeightAnchor[] = [\n  { level: 0,  height: 0 },\n  { level: 8,  height: 0 },\n  { level: 12, height: 0 },    // Water: flat\n  { level: 18, height: 0 },\n  { level: 24, height: 1 },\n  { level: 30, height: 3 },\n  { level: 40, height: 5 },\n  { level: 52, height: 8 },\n  { level: 65, height: 11 },\n  { level: 75, height: 14 },\n  { level: 85, height: 18 },\n  { level: 93, height: 21 },\n  { level: 99, height: 24 },\n];\n\n// ── Light Mode Anchors ───────────────────────────────────────\n\nconst LIGHT_COLOR_ANCHORS: ColorAnchor[] = [\n  { level: 0,  rgb: [195, 170, 130] },    // Desert sand\n  { level: 4,  rgb: [180, 158, 120] },    // Dry earth\n  { level: 8,  rgb: [145, 155, 135] },    // Scrubland\n  { level: 12, rgb: [100, 160, 210] },    // Shallow water / oasis\n  { level: 18, rgb: [85, 148, 200] },     // Deeper water\n  { level: 24, rgb: [120, 168, 140] },    // Wetland shore\n  { level: 30, rgb: [160, 195, 115] },    // Grassland\n  { level: 40, rgb: [115, 175, 80] },     // Lush grass\n  { level: 52, rgb: [75, 150, 58] },      // Forest\n  { level: 65, rgb: [65, 135, 52] },      // Dense forest\n  { level: 75, rgb: [115, 170, 75] },     // Rich green farmland\n  { level: 85, rgb: [100, 155, 68] },     // Village green\n  { level: 93, rgb: [90, 140, 65] },      // Town with parks\n  { level: 99, rgb: [80, 128, 62] },      // Lush city\n];\n\nconst LIGHT_HEIGHT_ANCHORS: HeightAnchor[] = DARK_HEIGHT_ANCHORS;\n\n// ── Asset Colors ─────────────────────────────────────────────\n\nconst DARK_ASSETS: AssetColors = {\n  trunk: '#6b4226',\n  pine: '#2a6e1e',\n  leaf: '#3d8c2a',\n  bush: '#357a22',\n  roofA: '#c45435',\n  roofB: '#d4924a',\n  wall: '#d4c8a0',\n  wallShade: '#b0a078',\n  church: '#e0d8c0',\n  fence: '#9e8a60',\n  wheat: '#d4b840',\n  sheep: '#e8e8e0',\n  sheepHead: '#333',\n  cow: '#8b5e3c',\n  cowSpot: '#f5f0e0',\n  chicken: '#d4a030',\n  whale: '#4a7a9e',\n  whaleBelly: '#8ab4c8',\n  boat: '#8b6840',\n  sail: '#e8e0d0',\n  fish: '#70b0c8',\n  flag: '#cc3333',\n  windmill: '#c8b888',\n  windBlade: '#d8d0b8',\n  well: '#7a6a4a',\n  chimney: '#8a6a4a',\n  path: '#a09068',\n  water: '#3a6a9e',\n  waterLight: '#5a90be',\n  deer: '#8a6030',\n  horse: '#6e4422',\n  flower: '#e06080',\n  flowerCenter: '#f0d040',\n  mushroom: '#e8dcc8',\n  mushroomCap: '#c44030',\n  rock: '#808080',\n  boulder: '#6a6a6a',\n  palm: '#4a8828',\n  willow: '#558838',\n  seagull: '#e0e0e0',\n  dock: '#7a6040',\n  tent: '#c8b888',\n  tentStripe: '#cc4444',\n  hut: '#a08860',\n  market: '#d8c898',\n  marketAwning: '#cc5533',\n  inn: '#c8a878',\n  innSign: '#d4a040',\n  blacksmith: '#555555',\n  anvil: '#444444',\n  castle: '#a0a0a0',\n  castleRoof: '#606080',\n  tower: '#909090',\n  bridge: '#8a7a5a',\n  cart: '#8a6a40',\n  barrel: '#7a5a30',\n  torch: '#6a5030',\n  torchFlame: '#ff9922',\n  cobble: '#888878',\n  smoke: 'rgba(180,180,180,0.4)',\n  bird: '#444444',\n  scarecrow: '#8a7040',\n  scarecrowHat: '#5a4020',\n  stump: '#6b4a26',\n  riverOverlay: 'rgba(35,85,160,0.60)',\n  pondOverlay: 'rgba(25,75,150,0.65)',\n  reeds: '#6a8838',\n  fountain: '#909090',\n  fountainWater: '#70a8d0',\n  canal: '#7a7a6a',\n  gardenTree: '#4a9a3a',\n  ricePaddy: '#8aaa48',\n  ricePaddyWater: '#4a88b0',\n  // New 118-type expansion colors\n  jellyfish: '#9a70c0',\n  coral: '#d06858',\n  turtle: '#5a8848',\n  buoy: '#cc4444',\n  lighthouse: '#d8d0b8',\n  crab: '#c06030',\n  driftwood: '#8a7050',\n  sandcastle: '#d8c890',\n  tidePools: '#5a90b0',\n  heron: '#a0a8b0',\n  shellfish: '#c0a880',\n  cattail: '#6a8838',\n  frog: '#4a8830',\n  lily: '#e088a0',\n  rabbit: '#b0a090',\n  fox: '#c06a28',\n  butterfly: '#d070a0',\n  butterflyWing: '#e0a040',\n  beehive: '#c0a040',\n  wildflower: '#d060d0',\n  tallGrass: '#5a9838',\n  birchBark: '#e0d8c8',\n  haybale: '#c0a848',\n  owl: '#8a7050',\n  squirrel: '#a06030',\n  moss: '#4a7a30',\n  fern: '#3a8828',\n  deadTree: '#6a5a40',\n  log: '#7a5a30',\n  berryBush: '#3a7828',\n  berry: '#cc3030',\n  spiderWeb: 'rgba(200,200,200,0.5)',\n  silo: '#a0a0a0',\n  pig: '#e0a8a0',\n  trough: '#7a6a50',\n  haystack: '#c8a838',\n  orchard: '#4a8828',\n  orchardFruit: '#cc4430',\n  beeFarm: '#c8b060',\n  pumpkin: '#d07020',\n  tavern: '#a08860',\n  tavernSign: '#8a6830',\n  bakery: '#c8a878',\n  stable: '#8a7050',\n  gardenFence: '#e0d8c0',\n  laundry: '#e0d8e8',\n  doghouse: '#8a6030',\n  shrine: '#a0a0a8',\n  wagon: '#8a6840',\n  cathedral: '#c0b8a8',\n  cathedralWindow: '#4080c0',\n  library: '#b0a088',\n  clocktower: '#a0a0a0',\n  clockFace: '#e8e0c8',\n  statue: '#909098',\n  parkBench: '#6a5a40',\n  warehouse: '#8a8078',\n  gatehouse: '#a09888',\n  manor: '#c8b898',\n  manorGarden: '#4a8838',\n  signpost: '#7a6040',\n  lantern: '#6a5a40',\n  lanternGlow: '#ffc840',\n  woodpile: '#7a5a30',\n  puddle: '#5a88b8',\n  campfire: '#6a5030',\n  campfireFlame: '#ff6622',\n  // Seasonal: Winter\n  snowCap: '#e8eef5',\n  snowGround: '#d8e2ee',\n  ice: '#a0c0e0',\n  icicle: '#b0d4f0',\n  frozenWater: '#6090b8',\n  igloo: '#dce8f2',\n  sledWood: '#8a5a30',\n  sledRunner: '#607080',\n  scarfRed: '#cc3030',\n  snowmanCoal: '#2a2a2a',\n  snowmanCarrot: '#e07020',\n  winterBirdRed: '#cc3030',\n  winterBirdBrown: '#8a6040',\n  firewoodLog: '#6a4020',\n  bareBranch: '#6a5a4a',\n  frostWhite: '#e0e8f0',\n  // Seasonal: Spring\n  cherryPetalPink: '#f5a0b8',\n  cherryPetalWhite: '#f8e0e8',\n  cherryTrunk: '#6a4030',\n  cherryBranch: '#7a5040',\n  tulipRed: '#e04050',\n  tulipYellow: '#f0d040',\n  tulipPurple: '#9050c0',\n  tulipStem: '#5a9a40',\n  sproutGreen: '#80d050',\n  nestBrown: '#7a5530',\n  eggBlue: '#a8d8e8',\n  eggWhite: '#f0ece0',\n  crocusPurple: '#8040b0',\n  crocusYellow: '#e8c830',\n  lambWool: '#f0ece5',\n  birdhouseWood: '#a07040',\n  gardenSoil: '#5a4030',\n  // Seasonal: Summer\n  parasolRed: '#e04040',\n  parasolBlue: '#4080d0',\n  parasolYellow: '#e8c820',\n  parasolStripe: '#ffffff',\n  beachTowelA: '#e05050',\n  beachTowelB: '#4090d0',\n  sandcastleWall: '#d8c090',\n  surfboardBody: '#e0e0e0',\n  surfboardStripe: '#e04040',\n  iceCreamCart: '#f0e8d0',\n  iceCreamUmbrella: '#e04040',\n  hammockFabric: '#d09050',\n  sunflowerPetal: '#f0c820',\n  sunflowerCenter: '#5a3a20',\n  watermelonRind: '#40a040',\n  watermelonFlesh: '#e04040',\n  watermelonSeed: '#2a2a2a',\n  lemonadeStand: '#f0d880',\n  sprinklerMetal: '#8090a0',\n  poolWater: '#60b8e0',\n  poolEdge: '#c0c8d0',\n  // Seasonal: Autumn\n  mapleRed: '#c83020',\n  mapleCrimson: '#a02020',\n  mapleOrange: '#d07020',\n  oakGold: '#c8a030',\n  oakBrown: '#8a6030',\n  birchYellow: '#d8c040',\n  ginkgoYellow: '#d8c830',\n  fallenLeafRed: '#c04030',\n  fallenLeafOrange: '#d08030',\n  fallenLeafGold: '#d0a030',\n  fallenLeafBrown: '#8a5a30',\n  acornBody: '#8a6030',\n  acornCap: '#5a3820',\n  cornStalkColor: '#c8a860',\n  cornEar: '#d8c060',\n  harvestApple: '#c83030',\n  harvestGrape: '#6030a0',\n  hotDrinkMug: '#c8a060',\n  hotDrinkSteam: '#d0d8e0',\n  wreathGreen: '#507038',\n  wreathBerry: '#c03030',\n};\n\nconst LIGHT_ASSETS: AssetColors = {\n  trunk: '#7a5030',\n  pine: '#358025',\n  leaf: '#4a9e35',\n  bush: '#40882a',\n  roofA: '#d05a3a',\n  roofB: '#daa055',\n  wall: '#f0e8d0',\n  wallShade: '#d0c498',\n  church: '#f0e8d8',\n  fence: '#b09a68',\n  wheat: '#dac040',\n  sheep: '#f5f5f0',\n  sheepHead: '#444',\n  cow: '#9a6e45',\n  cowSpot: '#fff',\n  chicken: '#daa835',\n  whale: '#4580aa',\n  whaleBelly: '#90bcd0',\n  boat: '#9a7848',\n  sail: '#fff',\n  fish: '#60a0b8',\n  flag: '#dd3838',\n  windmill: '#d8c898',\n  windBlade: '#eee',\n  well: '#8a7a55',\n  chimney: '#9a7a55',\n  path: '#b8a078',\n  water: '#4578aa',\n  waterLight: '#65a0cc',\n  deer: '#9a7038',\n  horse: '#7e5430',\n  flower: '#f07090',\n  flowerCenter: '#ffe050',\n  mushroom: '#f0e8d8',\n  mushroomCap: '#d05040',\n  rock: '#909090',\n  boulder: '#7a7a7a',\n  palm: '#55a030',\n  willow: '#609840',\n  seagull: '#f0f0f0',\n  dock: '#8a7050',\n  tent: '#d8c898',\n  tentStripe: '#dd5555',\n  hut: '#b09870',\n  market: '#e8d8a8',\n  marketAwning: '#dd6644',\n  inn: '#d8b888',\n  innSign: '#e4b050',\n  blacksmith: '#666666',\n  anvil: '#555555',\n  castle: '#b0b0b0',\n  castleRoof: '#707090',\n  tower: '#a0a0a0',\n  bridge: '#9a8a6a',\n  cart: '#9a7a50',\n  barrel: '#8a6a38',\n  torch: '#7a6038',\n  torchFlame: '#ffaa33',\n  cobble: '#989888',\n  smoke: 'rgba(160,160,160,0.35)',\n  bird: '#555555',\n  scarecrow: '#9a8050',\n  scarecrowHat: '#6a5030',\n  stump: '#7a5a30',\n  riverOverlay: 'rgba(60,130,210,0.55)',\n  pondOverlay: 'rgba(50,120,200,0.60)',\n  reeds: '#7a9848',\n  fountain: '#a0a0a0',\n  fountainWater: '#80b8e0',\n  canal: '#8a8a7a',\n  gardenTree: '#55aa45',\n  ricePaddy: '#9aba58',\n  ricePaddyWater: '#5a98c0',\n  // New 118-type expansion colors\n  jellyfish: '#b080d8',\n  coral: '#e07868',\n  turtle: '#6a9858',\n  buoy: '#dd5555',\n  lighthouse: '#f0e8d8',\n  crab: '#d07040',\n  driftwood: '#9a8060',\n  sandcastle: '#e8d8a0',\n  tidePools: '#6aa0c0',\n  heron: '#b0b8c0',\n  shellfish: '#d0b890',\n  cattail: '#7a9848',\n  frog: '#5a9838',\n  lily: '#f098b0',\n  rabbit: '#c0b0a0',\n  fox: '#d07a38',\n  butterfly: '#e080b0',\n  butterflyWing: '#f0b050',\n  beehive: '#d0b050',\n  wildflower: '#e070e0',\n  tallGrass: '#6aa848',\n  birchBark: '#f0e8d8',\n  haybale: '#d0b858',\n  owl: '#9a8060',\n  squirrel: '#b07040',\n  moss: '#5a8a38',\n  fern: '#4a9838',\n  deadTree: '#7a6a50',\n  log: '#8a6a40',\n  berryBush: '#4a8838',\n  berry: '#dd4040',\n  spiderWeb: 'rgba(180,180,180,0.45)',\n  silo: '#b0b0b0',\n  pig: '#f0b8b0',\n  trough: '#8a7a60',\n  haystack: '#d8b848',\n  orchard: '#55a038',\n  orchardFruit: '#dd5540',\n  beeFarm: '#d8c070',\n  pumpkin: '#e08030',\n  tavern: '#b09870',\n  tavernSign: '#9a7838',\n  bakery: '#d8b888',\n  stable: '#9a8060',\n  gardenFence: '#f0e8d0',\n  laundry: '#f0e8f0',\n  doghouse: '#9a7040',\n  shrine: '#b0b0b8',\n  wagon: '#9a7850',\n  cathedral: '#d0c8b8',\n  cathedralWindow: '#5090d0',\n  library: '#c0b098',\n  clocktower: '#b0b0b0',\n  clockFace: '#f8f0d8',\n  statue: '#a0a0a8',\n  parkBench: '#7a6a50',\n  warehouse: '#9a9088',\n  gatehouse: '#b0a898',\n  manor: '#d8c8a8',\n  manorGarden: '#55a048',\n  signpost: '#8a7050',\n  lantern: '#7a6a50',\n  lanternGlow: '#ffd850',\n  woodpile: '#8a6a40',\n  puddle: '#6a98c8',\n  campfire: '#7a6038',\n  campfireFlame: '#ff7733',\n  // Seasonal: Winter\n  snowCap: '#f0f4f8',\n  snowGround: '#e4ecf4',\n  ice: '#b0d0e8',\n  icicle: '#c0e0f8',\n  frozenWater: '#70a0c8',\n  igloo: '#e8f0f8',\n  sledWood: '#9a6a38',\n  sledRunner: '#708090',\n  scarfRed: '#dd4040',\n  snowmanCoal: '#333333',\n  snowmanCarrot: '#f08030',\n  winterBirdRed: '#dd4040',\n  winterBirdBrown: '#9a7050',\n  firewoodLog: '#7a5030',\n  bareBranch: '#7a6a5a',\n  frostWhite: '#eef4f8',\n  // Seasonal: Spring\n  cherryPetalPink: '#f8b0c8',\n  cherryPetalWhite: '#fce8f0',\n  cherryTrunk: '#7a5040',\n  cherryBranch: '#8a6050',\n  tulipRed: '#f05060',\n  tulipYellow: '#f8e050',\n  tulipPurple: '#a060d0',\n  tulipStem: '#6aaa50',\n  sproutGreen: '#90e060',\n  nestBrown: '#8a6540',\n  eggBlue: '#b8e8f0',\n  eggWhite: '#f8f4e8',\n  crocusPurple: '#9050c0',\n  crocusYellow: '#f0d838',\n  lambWool: '#f8f4ed',\n  birdhouseWood: '#b08050',\n  gardenSoil: '#6a5040',\n  // Seasonal: Summer\n  parasolRed: '#f05050',\n  parasolBlue: '#5090e0',\n  parasolYellow: '#f0d030',\n  parasolStripe: '#ffffff',\n  beachTowelA: '#f06060',\n  beachTowelB: '#50a0e0',\n  sandcastleWall: '#e8d0a0',\n  surfboardBody: '#f0f0f0',\n  surfboardStripe: '#f05050',\n  iceCreamCart: '#f8f0e0',\n  iceCreamUmbrella: '#f05050',\n  hammockFabric: '#e0a060',\n  sunflowerPetal: '#f8d030',\n  sunflowerCenter: '#6a4a30',\n  watermelonRind: '#50b050',\n  watermelonFlesh: '#f05050',\n  watermelonSeed: '#333333',\n  lemonadeStand: '#f8e890',\n  sprinklerMetal: '#90a0b0',\n  poolWater: '#70c8f0',\n  poolEdge: '#d0d8e0',\n  // Seasonal: Autumn\n  mapleRed: '#d84030',\n  mapleCrimson: '#b03030',\n  mapleOrange: '#e08030',\n  oakGold: '#d8b040',\n  oakBrown: '#9a7040',\n  birchYellow: '#e8d050',\n  ginkgoYellow: '#e8d840',\n  fallenLeafRed: '#d05040',\n  fallenLeafOrange: '#e09040',\n  fallenLeafGold: '#e0b040',\n  fallenLeafBrown: '#9a6a40',\n  acornBody: '#9a7040',\n  acornCap: '#6a4830',\n  cornStalkColor: '#d8b870',\n  cornEar: '#e8d070',\n  harvestApple: '#d84040',\n  harvestGrape: '#7040b0',\n  hotDrinkMug: '#d8b070',\n  hotDrinkSteam: '#e0e8f0',\n  wreathGreen: '#608048',\n  wreathBerry: '#d04040',\n};\n\n// ── Palette Factory ──────────────────────────────────────────\n\nexport function getTerrainPalette100(mode: ColorMode): TerrainPalette100 {\n  const colorAnchors = mode === 'dark' ? DARK_COLOR_ANCHORS : LIGHT_COLOR_ANCHORS;\n  const heightAnchors = mode === 'dark' ? DARK_HEIGHT_ANCHORS : LIGHT_HEIGHT_ANCHORS;\n\n  const getElevation = (level: number): ElevationColors => {\n    const rgb = interpolateRGB(colorAnchors, level);\n    return makeElevation(rgb);\n  };\n\n  const getHeight = (level: number): number => {\n    return interpolateHeight(heightAnchors, level);\n  };\n\n  // Pre-compute 10 sampled elevations for backward compatibility\n  const sampleLevels = [0, 5, 12, 25, 40, 55, 70, 82, 92, 99];\n  const elevations = sampleLevels.map(l => getElevation(l));\n  const heights = sampleLevels.map(l => getHeight(l));\n\n  return {\n    getElevation,\n    getHeight,\n    elevations,\n    heights,\n    text: mode === 'dark'\n      ? { primary: '#e6edf3', secondary: '#8b949e', accent: '#58a6ff' }\n      : { primary: '#1f2328', secondary: '#656d76', accent: '#0969da' },\n    bg: { subtle: mode === 'dark' ? '#161b22' : '#f6f8fa' },\n    cloud: mode === 'dark'\n      ? { fill: 'rgba(200,210,220,0.12)', stroke: 'rgba(200,210,220,0.06)', opacity: 0.8 }\n      : { fill: 'rgba(190,205,220,0.35)', stroke: 'rgba(160,175,195,0.30)', opacity: 0.85 },\n    assets: mode === 'dark' ? DARK_ASSETS : LIGHT_ASSETS,\n  };\n}\n\n// ── Seasonal Palette ─────────────────────────────────────────\n\n/**\n * Apply a seasonal tint to all asset colors.\n * Returns a new AssetColors object with tinted hex/rgb values.\n * Colors that are not standard hex or rgb() are passed through unchanged.\n */\nfunction tintAssetColors(assets: AssetColors, tint: SeasonalTint): AssetColors {\n  const result: Record<string, string> = {};\n  for (const [key, value] of Object.entries(assets)) {\n    if (typeof value === 'string') {\n      if (value.startsWith('#') && value.length === 7) {\n        result[key] = applyTintToHex(value, tint);\n      } else if (value.startsWith('rgb')) {\n        result[key] = applyTintToRgb(value, tint);\n      } else {\n        result[key] = value;\n      }\n    }\n  }\n  return result as unknown as AssetColors;\n}\n\n/**\n * Get a seasonal terrain palette for a specific week.\n * Wraps getTerrainPalette100 and applies seasonal tinting to\n * all elevation colors and asset colors.\n *\n * Summer (zone 4) returns the base palette unchanged.\n */\nexport function getSeasonalPalette100(\n  mode: ColorMode,\n  week: number,\n  rotation: number = 0,\n): TerrainPalette100 {\n  const base = getTerrainPalette100(mode);\n  const tint = getSeasonalTint(week, rotation);\n\n  // Summer has no tinting — return base palette\n  if (tint.colorShift === 0 && tint.warmth === 0 && tint.snowCoverage === 0\n      && tint.greenMul === 1 && tint.saturation === 1) {\n    return base;\n  }\n\n  const colorAnchors = mode === 'dark' ? DARK_COLOR_ANCHORS : LIGHT_COLOR_ANCHORS;\n  const heightAnchors = mode === 'dark' ? DARK_HEIGHT_ANCHORS : LIGHT_HEIGHT_ANCHORS;\n\n  const getElevation = (level: number): ElevationColors => {\n    const rgb = interpolateRGB(colorAnchors, level);\n    const tinted = [\n      clamp(Math.round(applyTintValues(rgb[0], rgb[1], rgb[2], tint)[0]), 0, 255),\n      clamp(Math.round(applyTintValues(rgb[0], rgb[1], rgb[2], tint)[1]), 0, 255),\n      clamp(Math.round(applyTintValues(rgb[0], rgb[1], rgb[2], tint)[2]), 0, 255),\n    ] as [number, number, number];\n    return makeElevation(tinted);\n  };\n\n  const getHeight = (level: number): number => {\n    return interpolateHeight(heightAnchors, level);\n  };\n\n  const sampleLevels = [0, 5, 12, 25, 40, 55, 70, 82, 92, 99];\n  const elevations = sampleLevels.map(l => getElevation(l));\n  const heights = sampleLevels.map(l => getHeight(l));\n\n  return {\n    getElevation,\n    getHeight,\n    elevations,\n    heights,\n    text: base.text,\n    bg: base.bg,\n    cloud: base.cloud,\n    assets: tintAssetColors(base.assets, tint),\n  };\n}\n\n/** Internal helper — applies tint to raw RGB without hex conversion */\nfunction applyTintValues(r: number, g: number, b: number, tint: SeasonalTint): [number, number, number] {\n  // 1. Saturation\n  const gray = 0.299 * r + 0.587 * g + 0.114 * b;\n  let nr = gray + (r - gray) * tint.saturation;\n  let ng = gray + (g - gray) * tint.saturation;\n  let nb = gray + (b - gray) * tint.saturation;\n\n  // 2. Green multiplier\n  ng *= tint.greenMul;\n\n  // 3. Warmth\n  nr += tint.warmth;\n  nb -= tint.warmth;\n\n  // 4. Color shift\n  if (tint.colorShift > 0) {\n    nr = lerp(nr, tint.colorTarget[0], tint.colorShift);\n    ng = lerp(ng, tint.colorTarget[1], tint.colorShift);\n    nb = lerp(nb, tint.colorTarget[2], tint.colorShift);\n  }\n\n  // 5. Snow coverage\n  if (tint.snowCoverage > 0) {\n    nr = lerp(nr, 240, tint.snowCoverage);\n    ng = lerp(ng, 244, tint.snowCoverage);\n    nb = lerp(nb, 250, tint.snowCoverage);\n  }\n\n  return [\n    clamp(Math.round(nr), 0, 255),\n    clamp(Math.round(ng), 0, 255),\n    clamp(Math.round(nb), 0, 255),\n  ];\n}\n\n// ── Legacy API ────────────────────────────────────────────────\n\n/** @deprecated Use getTerrainPalette100 instead */\nexport interface TerrainPalette {\n  elevations: ElevationColors[];\n  heights: number[];\n  text: { primary: string; secondary: string; accent: string };\n  bg: { subtle: string };\n  cloud: string;\n  assets: AssetColors;\n}\n\n/** @deprecated Use getTerrainPalette100 instead */\nexport function getTerrainPalette(mode: ColorMode): TerrainPalette {\n  const p100 = getTerrainPalette100(mode);\n  return {\n    elevations: p100.elevations,\n    heights: p100.heights,\n    text: p100.text,\n    bg: p100.bg,\n    cloud: mode === 'dark' ? 'rgba(200,210,220,0.10)' : 'rgba(255,255,255,0.45)',\n    assets: p100.assets,\n  };\n}\n","import type { GridCell100 } from '../shared.js';\nimport type { TerrainPalette100, ElevationColors } from './palette.js';\nimport type { BiomeContext } from './biomes.js';\nimport { getSeasonZone } from './seasons.js';\n\n// ── Isometric Constants ──────────────────────────────────────\n\n/** Half-width of one isometric tile (x-axis) */\nconst THW = 8;\n/** Half-height of one isometric tile (y-axis) */\nconst THH = 3.5;\n\n// ── Isometric Projection ─────────────────────────────────────\n\nexport interface IsoCell {\n  /** Grid week index (0–51) */\n  week: number;\n  /** Grid day index (0–6) */\n  day: number;\n  /** 100-level intensity (0–99) */\n  level100: number;\n  /** Block height in pixels */\n  height: number;\n  /** Screen X of the isometric diamond center */\n  isoX: number;\n  /** Screen Y of the isometric diamond center */\n  isoY: number;\n  /** Pre-computed elevation colors for this cell */\n  colors: ElevationColors;\n}\n\n/**\n * Convert grid cells to isometric coordinates with elevation.\n * Cells are sorted in drawing order (back to front).\n */\nexport function toIsoCells(\n  cells: GridCell100[],\n  palette: TerrainPalette100,\n  originX: number,\n  originY: number,\n): IsoCell[] {\n  const isoCells: IsoCell[] = [];\n  let cellIndex = 0;\n  const numWeeks = Math.ceil(cells.length / 7);\n\n  for (let week = 0; week < numWeeks; week++) {\n    for (let day = 0; day < 7; day++) {\n      if (cellIndex >= cells.length) break;\n      const cell = cells[cellIndex++];\n\n      const isoX = originX + (week - day) * THW;\n      const isoY = originY + (week + day) * THH;\n      const height = palette.getHeight(cell.level100);\n      const colors = palette.getElevation(cell.level100);\n\n      isoCells.push({\n        week,\n        day,\n        level100: cell.level100,\n        height,\n        isoX,\n        isoY,\n        colors,\n      });\n    }\n  }\n\n  // Sort by drawing order: back to front\n  isoCells.sort((a, b) => {\n    const sumA = a.week + a.day;\n    const sumB = b.week + b.day;\n    if (sumA !== sumB) return sumA - sumB;\n    return a.week - b.week;\n  });\n\n  return isoCells;\n}\n\n// ── Water Color Blending ─────────────────────────────────────\n\n/** Parse a hex color like \"#aabbcc\" or \"rgb(r,g,b)\" to [r,g,b] */\nfunction parseColor(color: string): [number, number, number] {\n  if (color.startsWith('#')) {\n    const hex = color.slice(1);\n    return [\n      parseInt(hex.slice(0, 2), 16),\n      parseInt(hex.slice(2, 4), 16),\n      parseInt(hex.slice(4, 6), 16),\n    ];\n  }\n  const m = color.match(/(\\d+)/g);\n  if (m && m.length >= 3) return [+m[0], +m[1], +m[2]];\n  return [128, 128, 128];\n}\n\nfunction toHex(r: number, g: number, b: number): string {\n  return '#' + [r, g, b].map(c => Math.round(c).toString(16).padStart(2, '0')).join('');\n}\n\nfunction toRgb(r: number, g: number, b: number): string {\n  return `rgb(${Math.round(r)},${Math.round(g)},${Math.round(b)})`;\n}\n\n/** Blend a color string toward a water blue target by strength (0-1) */\nfunction blendColorTowardWater(color: string, waterRgb: [number, number, number], strength: number): string {\n  const [r, g, b] = parseColor(color);\n  const nr = r + (waterRgb[0] - r) * strength;\n  const ng = g + (waterRgb[1] - g) * strength;\n  const nb = b + (waterRgb[2] - b) * strength;\n  return color.startsWith('#') ? toHex(nr, ng, nb) : toRgb(nr, ng, nb);\n}\n\n/** Get water blend strength based on level and type (6d: depth variation) */\nfunction getWaterBlendStrength(level: number, isRiver: boolean): number {\n  if (isRiver) return 0.40;      // consistent river look\n  if (level <= 14) return 0.25;  // shallow: subtle blend (oasis/lagoon)\n  return 0.45;                   // deep: strong blend (ocean depth)\n}\n\n/** Blend an ElevationColors set toward water blue */\nfunction blendWithWater(colors: ElevationColors, isDark: boolean, level?: number, isRiver?: boolean): ElevationColors {\n  const waterRgb: [number, number, number] = isDark ? [40, 80, 140] : [70, 140, 200];\n  const strength = (level !== undefined) ? getWaterBlendStrength(level, !!isRiver) : 0.35;\n  return {\n    top: blendColorTowardWater(colors.top, waterRgb, strength),\n    left: blendColorTowardWater(colors.left, waterRgb, strength),\n    right: blendColorTowardWater(colors.right, waterRgb, strength),\n  };\n}\n\n// ── Block Rendering ──────────────────────────────────────────\n\nfunction renderBlock(cell: IsoCell, isWater = false): string {\n  const { isoX: cx, isoY: cy, height: h, colors } = cell;\n\n  if (h === 0) {\n    const topPoints = [\n      `${cx},${cy - THH}`,\n      `${cx + THW},${cy}`,\n      `${cx},${cy + THH}`,\n      `${cx - THW},${cy}`,\n    ].join(' ');\n\n    if (isWater) {\n      // 6a: Multi-layer water surface — base, lighter inner diamond, specular highlight\n      const inset = 1.5;\n      const innerPoints = [\n        `${cx},${cy - THH + inset}`,\n        `${cx + THW - inset * 1.5},${cy}`,\n        `${cx},${cy + THH - inset}`,\n        `${cx - THW + inset * 1.5},${cy}`,\n      ].join(' ');\n      return `<polygon points=\"${topPoints}\" fill=\"${colors.top}\" stroke=\"${colors.left}\" stroke-width=\"0.3\"/>`\n        + `<polygon points=\"${innerPoints}\" fill=\"${colors.top}\" opacity=\"0.3\" style=\"filter:brightness(1.3)\"/>`\n        + `<ellipse cx=\"${cx + 1}\" cy=\"${cy - 0.5}\" rx=\"1.5\" ry=\"0.6\" fill=\"#fff\" opacity=\"0.15\"/>`;\n    }\n\n    return `<polygon points=\"${topPoints}\" fill=\"${colors.top}\" stroke=\"${colors.left}\" stroke-width=\"0.3\"/>`;\n  }\n\n  const parts: string[] = [];\n\n  // Left face\n  const leftPoints = [\n    `${cx - THW},${cy}`,\n    `${cx},${cy + THH}`,\n    `${cx},${cy + THH + h}`,\n    `${cx - THW},${cy + h}`,\n  ].join(' ');\n  parts.push(`<polygon points=\"${leftPoints}\" fill=\"${colors.left}\"/>`);\n\n  // 6e: Side face water tinting — gradient overlay for elevated water cells\n  if (isWater && h > 0) {\n    // Darker overlay at the bottom half of left face for water depth\n    const midY = cy + THH + h * 0.5;\n    const leftGradPoints = [\n      `${cx - THW},${cy + h * 0.5}`,\n      `${cx},${midY}`,\n      `${cx},${cy + THH + h}`,\n      `${cx - THW},${cy + h}`,\n    ].join(' ');\n    parts.push(`<polygon points=\"${leftGradPoints}\" fill=\"#1a3a6a\" opacity=\"0.15\"/>`);\n  }\n\n  // Right face\n  const rightPoints = [\n    `${cx + THW},${cy}`,\n    `${cx},${cy + THH}`,\n    `${cx},${cy + THH + h}`,\n    `${cx + THW},${cy + h}`,\n  ].join(' ');\n  parts.push(`<polygon points=\"${rightPoints}\" fill=\"${colors.right}\"/>`);\n\n  if (isWater && h > 0) {\n    const midY = cy + THH + h * 0.5;\n    const rightGradPoints = [\n      `${cx + THW},${cy + h * 0.5}`,\n      `${cx},${midY}`,\n      `${cx},${cy + THH + h}`,\n      `${cx + THW},${cy + h}`,\n    ].join(' ');\n    parts.push(`<polygon points=\"${rightGradPoints}\" fill=\"#1a3a6a\" opacity=\"0.12\"/>`);\n  }\n\n  // Top face (drawn last)\n  const topPoints = [\n    `${cx},${cy - THH}`,\n    `${cx + THW},${cy}`,\n    `${cx},${cy + THH}`,\n    `${cx - THW},${cy}`,\n  ].join(' ');\n\n  if (isWater) {\n    // 6a: Multi-layer water surface on elevated water blocks\n    const inset = 1.5;\n    const innerPoints = [\n      `${cx},${cy - THH + inset}`,\n      `${cx + THW - inset * 1.5},${cy}`,\n      `${cx},${cy + THH - inset}`,\n      `${cx - THW + inset * 1.5},${cy}`,\n    ].join(' ');\n    parts.push(`<polygon points=\"${topPoints}\" fill=\"${colors.top}\" stroke=\"${colors.left}\" stroke-width=\"0.3\"/>`);\n    parts.push(`<polygon points=\"${innerPoints}\" fill=\"${colors.top}\" opacity=\"0.3\" style=\"filter:brightness(1.3)\"/>`);\n    parts.push(`<ellipse cx=\"${cx + 1}\" cy=\"${cy - 0.5}\" rx=\"1.5\" ry=\"0.6\" fill=\"#fff\" opacity=\"0.15\"/>`);\n  } else {\n    parts.push(`<polygon points=\"${topPoints}\" fill=\"${colors.top}\" stroke=\"${colors.left}\" stroke-width=\"0.3\"/>`);\n  }\n\n  return parts.join('');\n}\n\n// ── Public API ───────────────────────────────────────────────\n\n/**\n * Render all isometric terrain blocks.\n * When biomeMap is provided, river/pond cells get blue-tinted block colors.\n */\nexport function renderTerrainBlocks(\n  cells: GridCell100[],\n  palette: TerrainPalette100,\n  originX: number,\n  originY: number,\n  biomeMap?: Map<string, BiomeContext>,\n): string {\n  const isoCells = toIsoCells(cells, palette, originX, originY);\n  // Detect dark mode from palette text color\n  const isDark = palette.text.primary.startsWith('#e');\n  const blocks = isoCells.map(cell => {\n    if (biomeMap) {\n      const biome = biomeMap.get(`${cell.week},${cell.day}`);\n      if (biome && (biome.isRiver || biome.isPond)) {\n        const blended = blendWithWater(cell.colors, isDark, cell.level100, biome.isRiver);\n        return renderBlock({ ...cell, colors: blended }, true);\n      }\n    }\n    // Natural water zone cells (levels 9-22) also get water treatment\n    if (cell.level100 >= 9 && cell.level100 <= 22) {\n      const blended = blendWithWater(cell.colors, isDark, cell.level100, false);\n      return renderBlock({ ...cell, colors: blended }, true);\n    }\n    return renderBlock(cell);\n  });\n  return `<g class=\"terrain-blocks\">${blocks.join('')}</g>`;\n}\n\n/**\n * Get the computed isometric cells (for use by effects and assets).\n */\nexport function getIsoCells(\n  cells: GridCell100[],\n  palette: TerrainPalette100,\n  originX: number,\n  originY: number,\n): IsoCell[] {\n  return toIsoCells(cells, palette, originX, originY);\n}\n\n/**\n * Render seasonal terrain blocks.\n * Uses per-week palettes for seasonal coloring.\n * Winter zones get frozen water (ice surface instead of blue).\n * All zones get seasonal tinting via their per-week palette.\n */\nexport function renderSeasonalTerrainBlocks(\n  cells: GridCell100[],\n  weekPalettes: TerrainPalette100[],\n  originX: number,\n  originY: number,\n  seasonRotation: number,\n  biomeMap?: Map<string, BiomeContext>,\n): string {\n  // Build isometric cells using a reference palette (week 26 = summer)\n  // The actual colors will be overridden per-week\n  const refPalette = weekPalettes[26] || weekPalettes[0];\n  const isoCells = toIsoCells(cells, refPalette, originX, originY);\n  const isDark = refPalette.text.primary.startsWith('#e');\n\n  const blocks = isoCells.map(cell => {\n    // Get the per-week palette for this cell\n    const weekIdx = Math.min(cell.week, weekPalettes.length - 1);\n    const weekPalette = weekPalettes[weekIdx];\n    const zone = getSeasonZone(cell.week, seasonRotation);\n\n    // Recompute colors using the week-specific palette\n    const colors = weekPalette.getElevation(cell.level100);\n    const height = weekPalette.getHeight(cell.level100);\n    const tintedCell = { ...cell, colors, height };\n\n    // Determine if this is a water cell\n    const biome = biomeMap?.get(`${cell.week},${cell.day}`);\n    const isNaturalWater = cell.level100 >= 9 && cell.level100 <= 22;\n    const isBiomeWater = biome && (biome.isRiver || biome.isPond);\n\n    if (isBiomeWater || isNaturalWater) {\n      // Winter zones (0) and near-winter transitions (7, 1) get frozen water\n      const isWinterish = zone === 0 || zone === 7 || zone === 1;\n      if (isWinterish && isNaturalWater) {\n        // Frozen: use ice-like colors from the tinted palette\n        const iceColors: ElevationColors = {\n          top: weekPalette.assets.ice || colors.top,\n          left: weekPalette.assets.frozenWater || colors.left,\n          right: weekPalette.assets.frozenWater || colors.right,\n        };\n        return renderBlock({ ...tintedCell, colors: iceColors }, false);\n      }\n      // Non-winter water: blend with water as normal\n      const blended = blendWithWater(colors, isDark, cell.level100, !!biome?.isRiver);\n      return renderBlock({ ...tintedCell, colors: blended }, true);\n    }\n\n    return renderBlock(tintedCell);\n  });\n\n  return `<g class=\"terrain-blocks\">${blocks.join('')}</g>`;\n}\n\nexport { THW, THH };\n","import type { IsoCell } from './blocks.js';\nimport type { TerrainPalette100 } from './palette.js';\nimport { THW, THH } from './blocks.js';\nimport { seededRandom } from '../../utils/math.js';\nimport type { BiomeContext } from './biomes.js';\nimport { getSeasonZone } from './seasons.js';\n\n// ── Animation Budget ─────────────────────────────────────────\n// Total: 50 max\n//   Water shimmer:    up to 15\n//   Town sparkle:     up to 10\n//   Clouds:           4 (SMIL animateTransform)\n//   Windmill:         4 (SMIL animateTransform)\n//   Flag wave:        4 (CSS @keyframes)\n//   (waterfalls removed — freed ~4 SMIL slots)\n// Total animated:     ~38/50  →  12 slots available for new assets\n\nconst MAX_WATER = 15;\nconst MAX_SPARKLE = 10;\nconst NUM_CLOUDS = 2;\n\n// ── CSS Animations ───────────────────────────────────────────\n\nexport function renderTerrainCSS(isoCells: IsoCell[], biomeMap?: Map<string, BiomeContext>): string {\n  const blocks: string[] = [];\n\n  const hasWater = isoCells.some(c => c.level100 >= 10 && c.level100 <= 22);\n  const hasTown = isoCells.some(c => c.level100 >= 90);\n\n  if (hasWater) {\n    blocks.push(\n      `@keyframes water-shimmer {`\n      + ` 0% { opacity: 0.7; }`\n      + ` 50% { opacity: 1; }`\n      + ` 100% { opacity: 0.7; }`\n      + ` }`,\n    );\n\n    const waterCells = isoCells.filter(c => c.level100 >= 10 && c.level100 <= 22);\n    const selected = selectEvenly(waterCells, MAX_WATER);\n    for (let i = 0; i < selected.length; i++) {\n      const dur = (3 + (i % 3) * 0.8).toFixed(1);\n      const delay = ((i * 0.7) % 4).toFixed(1);\n      blocks.push(\n        `.water-${i} { animation: water-shimmer ${dur}s ease-in-out ${delay}s infinite; }`,\n      );\n    }\n  }\n\n  if (hasTown) {\n    blocks.push(\n      `@keyframes town-sparkle {`\n      + ` 0% { opacity: 1; }`\n      + ` 40% { opacity: 0.5; }`\n      + ` 100% { opacity: 1; }`\n      + ` }`,\n    );\n\n    const townCells = isoCells.filter(c => c.level100 >= 90);\n    const selected = selectEvenly(townCells, MAX_SPARKLE);\n    for (let i = 0; i < selected.length; i++) {\n      const dur = (2 + (i % 4) * 0.5).toFixed(1);\n      const delay = ((i * 0.9) % 3.5).toFixed(1);\n      blocks.push(\n        `.sparkle-${i} { animation: town-sparkle ${dur}s ease-in-out ${delay}s infinite; }`,\n      );\n    }\n  }\n\n\n  // River shimmer for river cells outside the natural water zone\n  if (biomeMap) {\n    const riverCells = isoCells.filter(c => {\n      const biome = biomeMap.get(`${c.week},${c.day}`);\n      return biome && (biome.isRiver || biome.isPond) && c.level100 > 22;\n    });\n    const selectedRiver = selectEvenly(riverCells, 8);\n    if (selectedRiver.length > 0) {\n      // Reuse the water-shimmer keyframe (already defined above if hasWater)\n      if (!hasWater) {\n        blocks.push(\n          `@keyframes water-shimmer {`\n          + ` 0% { opacity: 0.7; }`\n          + ` 50% { opacity: 1; }`\n          + ` 100% { opacity: 0.7; }`\n          + ` }`,\n        );\n      }\n      for (let i = 0; i < selectedRiver.length; i++) {\n        const dur = (3.5 + (i % 3) * 0.6).toFixed(1);\n        const delay = ((i * 0.8) % 3.5).toFixed(1);\n        blocks.push(\n          `.river-shimmer-${i} { animation: water-shimmer ${dur}s ease-in-out ${delay}s infinite; }`,\n        );\n      }\n    }\n  }\n\n  // Windmill rotation (SMIL handles this, but flag wave needs CSS)\n  blocks.push(\n    `@keyframes flag-wave {`\n    + ` 0% { transform: scaleX(1); }`\n    + ` 50% { transform: scaleX(0.7); }`\n    + ` 100% { transform: scaleX(1); }`\n    + ` }`,\n  );\n\n  // Gentle sway for tallGrass, cattail\n  blocks.push(\n    `@keyframes sway-gentle {`\n    + ` 0% { transform: rotate(-2deg); }`\n    + ` 50% { transform: rotate(2deg); }`\n    + ` 100% { transform: rotate(-2deg); }`\n    + ` }`,\n  );\n  blocks.push(\n    `.sway-gentle { animation: sway-gentle 3s ease-in-out infinite; transform-origin: bottom center; }`,\n  );\n\n  // Slow sway for laundry\n  blocks.push(\n    `@keyframes sway-slow {`\n    + ` 0% { transform: rotate(-1deg); }`\n    + ` 50% { transform: rotate(1deg); }`\n    + ` 100% { transform: rotate(-1deg); }`\n    + ` }`,\n  );\n  blocks.push(\n    `.sway-slow { animation: sway-slow 4s ease-in-out infinite; transform-origin: bottom center; }`,\n  );\n\n  return blocks.join('\\n');\n}\n\n// ── Animated Overlays ────────────────────────────────────────\n\nexport function renderAnimatedOverlays(\n  isoCells: IsoCell[],\n  palette: TerrainPalette100,\n): string {\n  const overlays: string[] = [];\n\n  // Water shimmer overlays (level 0-5)\n  const waterCells = isoCells.filter(c => c.level100 >= 10 && c.level100 <= 22);\n  const selectedWater = selectEvenly(waterCells, MAX_WATER);\n  for (let i = 0; i < selectedWater.length; i++) {\n    const cell = selectedWater[i];\n    const { isoX: cx, isoY: cy } = cell;\n    const points = [\n      `${cx},${cy - THH + 1}`,\n      `${cx + THW - 2},${cy}`,\n      `${cx},${cy + THH - 1}`,\n      `${cx - THW + 2},${cy}`,\n    ].join(' ');\n    overlays.push(\n      `<polygon points=\"${points}\" fill=\"${palette.text.accent}\" opacity=\"0.15\" class=\"water-${i}\"/>`,\n    );\n  }\n\n  // Town sparkle overlays (level 90+)\n  const townCells = isoCells.filter(c => c.level100 >= 90);\n  const selectedTown = selectEvenly(townCells, MAX_SPARKLE);\n  for (let i = 0; i < selectedTown.length; i++) {\n    const cell = selectedTown[i];\n    const { isoX: cx, isoY: cy, height: h } = cell;\n    overlays.push(\n      `<circle cx=\"${cx}\" cy=\"${cy - h - 1}\" r=\"1\" fill=\"#ffe080\" opacity=\"0.7\" class=\"sparkle-${i}\"/>`,\n    );\n  }\n\n  return `<g class=\"terrain-overlays\">${overlays.join('')}</g>`;\n}\n\n// ── Celestial Bodies ─────────────────────────────────────────\n\n/**\n * Render celestial bodies in the sky area.\n * Dark mode: scattered stars + crescent moon.\n * Light mode: sun with rays.\n */\nexport function renderCelestials(seed: number, palette: TerrainPalette100, isDark: boolean): string {\n  const rng = seededRandom(seed + 3331);\n  const parts: string[] = [];\n\n  if (isDark) {\n    // Stars: small dots scattered in the upper sky area\n    const numStars = 18 + Math.floor(rng() * 10);\n    for (let i = 0; i < numStars; i++) {\n      const sx = 30 + rng() * 780;\n      const sy = 5 + rng() * 55;\n      const sr = 0.3 + rng() * 0.6;\n      const opacity = 0.3 + rng() * 0.5;\n      parts.push(\n        `<circle cx=\"${sx.toFixed(1)}\" cy=\"${sy.toFixed(1)}\" r=\"${sr.toFixed(1)}\" fill=\"#fff\" opacity=\"${opacity.toFixed(2)}\"/>`,\n      );\n    }\n\n    // A few brighter stars (cross shape)\n    for (let i = 0; i < 3; i++) {\n      const bx = 60 + rng() * 720;\n      const by = 8 + rng() * 40;\n      const len = 1.2 + rng() * 0.8;\n      parts.push(\n        `<g opacity=\"${(0.5 + rng() * 0.3).toFixed(2)}\">`\n        + `<line x1=\"${bx - len}\" y1=\"${by}\" x2=\"${bx + len}\" y2=\"${by}\" stroke=\"#fff\" stroke-width=\"0.4\"/>`\n        + `<line x1=\"${bx}\" y1=\"${by - len}\" x2=\"${bx}\" y2=\"${by + len}\" stroke=\"#fff\" stroke-width=\"0.4\"/>`\n        + `</g>`,\n      );\n    }\n\n    // Crescent moon\n    const mx = 750 + rng() * 60;\n    const my = 18 + rng() * 15;\n    const mr = 8;\n    parts.push(\n      `<g>`\n      // Full moon circle\n      + `<circle cx=\"${mx}\" cy=\"${my}\" r=\"${mr}\" fill=\"#e8e4d0\" opacity=\"0.85\"/>`\n      // Dark circle overlapping to create crescent\n      + `<circle cx=\"${mx + 3.5}\" cy=\"${my - 1.5}\" r=\"${mr - 0.5}\" fill=\"${palette.bg.subtle}\"/>`\n      // Subtle glow\n      + `<circle cx=\"${mx}\" cy=\"${my}\" r=\"${mr + 3}\" fill=\"#e8e4d0\" opacity=\"0.04\"/>`\n      + `</g>`,\n    );\n  } else {\n    // Sun: circle with radiating lines\n    const sx = 770 + rng() * 50;\n    const sy = 20 + rng() * 12;\n    const sr = 7;\n\n    // Outer glow\n    parts.push(\n      `<circle cx=\"${sx}\" cy=\"${sy}\" r=\"${sr + 6}\" fill=\"#ffeebb\" opacity=\"0.1\"/>`,\n    );\n    parts.push(\n      `<circle cx=\"${sx}\" cy=\"${sy}\" r=\"${sr + 3}\" fill=\"#ffdd88\" opacity=\"0.15\"/>`,\n    );\n    // Sun body\n    parts.push(\n      `<circle cx=\"${sx}\" cy=\"${sy}\" r=\"${sr}\" fill=\"#ffe066\" opacity=\"0.9\"/>`,\n    );\n    // Core highlight\n    parts.push(\n      `<circle cx=\"${sx - 1.5}\" cy=\"${sy - 1.5}\" r=\"${sr * 0.45}\" fill=\"#fff8cc\" opacity=\"0.6\"/>`,\n    );\n    // Rays (8 lines radiating outward)\n    for (let r = 0; r < 8; r++) {\n      const angle = (r / 8) * Math.PI * 2;\n      const innerR = sr + 2;\n      const outerR = sr + 5 + (r % 2) * 2; // alternating long/short\n      const x1 = sx + Math.cos(angle) * innerR;\n      const y1 = sy + Math.sin(angle) * innerR;\n      const x2 = sx + Math.cos(angle) * outerR;\n      const y2 = sy + Math.sin(angle) * outerR;\n      parts.push(\n        `<line x1=\"${x1.toFixed(1)}\" y1=\"${y1.toFixed(1)}\" x2=\"${x2.toFixed(1)}\" y2=\"${y2.toFixed(1)}\" `\n        + `stroke=\"#ffdd66\" stroke-width=\"0.8\" opacity=\"0.5\" stroke-linecap=\"round\"/>`,\n      );\n    }\n  }\n\n  return `<g class=\"celestials\">${parts.join('')}</g>`;\n}\n\n// ── Composite Clouds ─────────────────────────────────────────\n\n/**\n * Render drifting composite clouds with structured cumulus shapes.\n * Each cloud has a flat base + billowing top built from carefully\n * placed ellipses. Y-squashed ×0.45 for isometric perspective.\n * Uses SMIL animateTransform for drift animation.\n */\nexport function renderClouds(seed: number, palette: TerrainPalette100): string {\n  const rng = seededRandom(seed);\n  const clouds: string[] = [];\n\n  for (let i = 0; i < NUM_CLOUDS; i++) {\n    const baseCx = 250 + rng() * 500;\n    const baseCy = 20 + rng() * 60;\n    const scale = 0.8 + rng() * 0.5; // size variation\n    const dur = (35 + rng() * 20).toFixed(0);\n    const driftX = 60 + rng() * 50;\n\n    const ellipses: string[] = [];\n    const f = palette.cloud.fill;\n    const s = palette.cloud.stroke;\n    const o = palette.cloud.opacity;\n\n    // Flat base: wide, short ellipse\n    ellipses.push(\n      `<ellipse cx=\"${baseCx}\" cy=\"${baseCy}\" rx=\"${(28 * scale).toFixed(1)}\" ry=\"${(5 * scale).toFixed(1)}\" fill=\"${f}\" stroke=\"${s}\" stroke-width=\"0.4\" opacity=\"${o}\"/>`,\n    );\n    // Left billow\n    ellipses.push(\n      `<ellipse cx=\"${(baseCx - 14 * scale).toFixed(1)}\" cy=\"${(baseCy - 3 * scale).toFixed(1)}\" rx=\"${(12 * scale).toFixed(1)}\" ry=\"${(6 * scale).toFixed(1)}\" fill=\"${f}\" stroke=\"${s}\" stroke-width=\"0.3\" opacity=\"${o}\"/>`,\n    );\n    // Center billow (tallest)\n    ellipses.push(\n      `<ellipse cx=\"${(baseCx - 2 * scale).toFixed(1)}\" cy=\"${(baseCy - 6 * scale).toFixed(1)}\" rx=\"${(14 * scale).toFixed(1)}\" ry=\"${(8 * scale).toFixed(1)}\" fill=\"${f}\" stroke=\"${s}\" stroke-width=\"0.3\" opacity=\"${o}\"/>`,\n    );\n    // Right billow\n    ellipses.push(\n      `<ellipse cx=\"${(baseCx + 12 * scale).toFixed(1)}\" cy=\"${(baseCy - 3.5 * scale).toFixed(1)}\" rx=\"${(11 * scale).toFixed(1)}\" ry=\"${(5.5 * scale).toFixed(1)}\" fill=\"${f}\" stroke=\"${s}\" stroke-width=\"0.3\" opacity=\"${o}\"/>`,\n    );\n    // Top highlight (small bright bump)\n    ellipses.push(\n      `<ellipse cx=\"${(baseCx - 4 * scale).toFixed(1)}\" cy=\"${(baseCy - 9 * scale).toFixed(1)}\" rx=\"${(7 * scale).toFixed(1)}\" ry=\"${(4 * scale).toFixed(1)}\" fill=\"${f}\" stroke=\"none\" opacity=\"${(o * 0.7).toFixed(2)}\"/>`,\n    );\n\n    clouds.push(\n      `<g>`\n      + ellipses.join('')\n      + `<animateTransform attributeName=\"transform\" type=\"translate\"`\n      + ` values=\"0,0;${driftX.toFixed(0)},0;0,0\"`\n      + ` dur=\"${dur}s\" repeatCount=\"indefinite\"/>`\n      + `</g>`,\n    );\n  }\n\n  return `<g class=\"terrain-clouds\">${clouds.join('')}</g>`;\n}\n\n\n// ── Water Overlays (Rivers & Ponds) ─────────────────────────\n\n/**\n * Render semi-transparent water overlays on river and pond cells.\n * These sit on top of block faces, creating water flowing across\n * terrain at any elevation level.\n */\nexport function renderWaterOverlays(\n  isoCells: IsoCell[],\n  palette: TerrainPalette100,\n  biomeMap: Map<string, BiomeContext>,\n): string {\n  const overlays: string[] = [];\n  let shimmerIdx = 0;\n\n  for (const cell of isoCells) {\n    const biome = biomeMap.get(`${cell.week},${cell.day}`);\n    if (!biome || (!biome.isRiver && !biome.isPond)) continue;\n\n    const { isoX: cx, isoY: cy } = cell;\n    const color = biome.isPond\n      ? palette.assets.pondOverlay\n      : palette.assets.riverOverlay;\n\n    // 6b: Two-tone water overlay — outer edge darker, inner area lighter\n    // Outer diamond (slightly inset from block edge)\n    const outerPoints = [\n      `${cx},${cy - THH + 0.5}`,\n      `${cx + THW - 1},${cy}`,\n      `${cx},${cy + THH - 0.5}`,\n      `${cx - THW + 1},${cy}`,\n    ].join(' ');\n\n    // Inner diamond (further inset — lighter water surface)\n    const innerInset = 2.2;\n    const innerPoints = [\n      `${cx},${cy - THH + innerInset}`,\n      `${cx + THW - innerInset * 1.2},${cy}`,\n      `${cx},${cy + THH - innerInset}`,\n      `${cx - THW + innerInset * 1.2},${cy}`,\n    ].join(' ');\n\n    const shimmerClass = cell.level100 > 22 && shimmerIdx < 8\n      ? ` class=\"river-shimmer-${shimmerIdx++}\"`\n      : '';\n\n    // Outer: darker edge\n    overlays.push(\n      `<polygon points=\"${outerPoints}\" fill=\"${color}\"${shimmerClass}/>`,\n    );\n    // Inner: lighter surface (reduced opacity for lighter feel)\n    overlays.push(\n      `<polygon points=\"${innerPoints}\" fill=\"${palette.assets.waterLight}\" opacity=\"0.18\"/>`,\n    );\n  }\n\n  return overlays.length > 0\n    ? `<g class=\"water-overlays\">${overlays.join('')}</g>`\n    : '';\n}\n\n\n// ── Water Ripple Lines ──────────────────────────────────────\n\n/**\n * Render static wavy SVG paths on the top face of water cells.\n * 6c: 3 ripple lines per cell, varied curve amplitude,\n * isometric diamond orientation, staggered positions, thinner strokes.\n */\nexport function renderWaterRipples(\n  isoCells: IsoCell[],\n  palette: TerrainPalette100,\n  biomeMap: Map<string, BiomeContext>,\n): string {\n  const ripples: string[] = [];\n  const color = palette.assets.waterLight;\n  const rng = seededRandom(isoCells.length * 7 + 31);\n\n  for (const cell of isoCells) {\n    const biome = biomeMap.get(`${cell.week},${cell.day}`);\n    if (!biome || (!biome.isRiver && !biome.isPond)) continue;\n\n    const { isoX: cx, isoY: cy } = cell;\n    // Stagger horizontal offset per cell using seeded RNG\n    const jitterX = (rng() - 0.5) * 2;\n    const jitterY = (rng() - 0.5) * 0.8;\n\n    // Ripple 1: upper-left to center-right, following isometric diamond\n    const amp1 = 0.3 + rng() * 0.15;\n    ripples.push(\n      `<path d=\"M${cx - THW * 0.55 + jitterX},${cy - THH * 0.05 + jitterY} `\n      + `Q${cx - THW * 0.1},${cy - THH * amp1} ${cx + THW * 0.4},${cy - THH * 0.12}\" `\n      + `stroke=\"${color}\" fill=\"none\" stroke-width=\"0.25\" opacity=\"0.28\"/>`,\n    );\n\n    // Ripple 2: center, varied amplitude, isometric angle\n    const amp2 = 0.15 + rng() * 0.2;\n    ripples.push(\n      `<path d=\"M${cx - THW * 0.35 + jitterX * 0.5},${cy + THH * 0.15 + jitterY} `\n      + `Q${cx + THW * 0.05},${cy - THH * amp2} ${cx + THW * 0.45},${cy + THH * 0.05}\" `\n      + `stroke=\"${color}\" fill=\"none\" stroke-width=\"0.2\" opacity=\"0.22\"/>`,\n    );\n\n    // Ripple 3: lower region, gentler curve\n    const amp3 = 0.1 + rng() * 0.12;\n    ripples.push(\n      `<path d=\"M${cx - THW * 0.2 + jitterX * 0.3},${cy + THH * 0.35 + jitterY} `\n      + `Q${cx + THW * 0.15},${cy + THH * amp3} ${cx + THW * 0.35},${cy + THH * 0.28}\" `\n      + `stroke=\"${color}\" fill=\"none\" stroke-width=\"0.2\" opacity=\"0.18\"/>`,\n    );\n  }\n\n  return ripples.length > 0\n    ? `<g class=\"water-ripples\">${ripples.join('')}</g>`\n    : '';\n}\n\n// ── Seasonal Particle Effects ────────────────────────────────\n\n/**\n * Render snow particles for winter zones.\n * Scattered small white circles/dots drifting downward in columns\n * that correspond to winter-zone weeks.\n */\nexport function renderSnowParticles(\n  isoCells: IsoCell[],\n  seed: number,\n  seasonRotation: number = 0,\n): string {\n  const rng = seededRandom(seed + 9991);\n  const particles: string[] = [];\n  const maxParticles = 40;\n  let count = 0;\n\n  // Collect cells in winter zones (0, 1, 7)\n  const winterCells = isoCells.filter(c => {\n    const zone = getSeasonZone(c.week, seasonRotation);\n    return zone === 0 || zone === 1 || zone === 7;\n  });\n\n  if (winterCells.length === 0) return '';\n\n  const selected = selectEvenly(winterCells, maxParticles);\n  for (const cell of selected) {\n    if (count >= maxParticles) break;\n    const zone = getSeasonZone(cell.week, seasonRotation);\n    // More particles in peak winter (zone 0), fewer in transitions\n    const density = zone === 0 ? 0.8 : 0.4;\n    if (rng() > density) continue;\n\n    const px = cell.isoX + (rng() - 0.5) * 10;\n    const py = cell.isoY - cell.height - 5 - rng() * 20;\n    const r = 0.3 + rng() * 0.4;\n    const opacity = 0.3 + rng() * 0.4;\n\n    particles.push(\n      `<circle cx=\"${px.toFixed(1)}\" cy=\"${py.toFixed(1)}\" r=\"${r.toFixed(1)}\" fill=\"#fff\" opacity=\"${opacity.toFixed(2)}\"/>`,\n    );\n    count++;\n  }\n\n  return particles.length > 0\n    ? `<g class=\"snow-particles\">${particles.join('')}</g>`\n    : '';\n}\n\n/**\n * Render falling cherry blossom petals for spring zones.\n * Small pink ellipses scattered in spring-zone columns.\n */\nexport function renderFallingPetals(\n  isoCells: IsoCell[],\n  seed: number,\n  palette: TerrainPalette100,\n  seasonRotation: number = 0,\n): string {\n  const rng = seededRandom(seed + 7771);\n  const petals: string[] = [];\n  const maxPetals = 30;\n  let count = 0;\n\n  const petalColor = palette.assets.cherryPetalPink || '#f5a0b8';\n\n  // Collect cells in spring zones (1, 2, 3)\n  const springCells = isoCells.filter(c => {\n    const zone = getSeasonZone(c.week, seasonRotation);\n    return zone === 2 || zone === 1 || zone === 3;\n  });\n\n  if (springCells.length === 0) return '';\n\n  const selected = selectEvenly(springCells, maxPetals);\n  for (const cell of selected) {\n    if (count >= maxPetals) break;\n    const zone = getSeasonZone(cell.week, seasonRotation);\n    const density = zone === 2 ? 0.7 : 0.35;\n    if (rng() > density) continue;\n\n    const px = cell.isoX + (rng() - 0.5) * 8;\n    const py = cell.isoY - cell.height - 3 - rng() * 15;\n    const rx = 0.3 + rng() * 0.2;\n    const ry = 0.12 + rng() * 0.08;\n    const rotation = Math.floor(rng() * 180);\n    const opacity = 0.35 + rng() * 0.3;\n\n    petals.push(\n      `<ellipse cx=\"${px.toFixed(1)}\" cy=\"${py.toFixed(1)}\" rx=\"${rx.toFixed(1)}\" ry=\"${ry.toFixed(2)}\" `\n      + `fill=\"${petalColor}\" opacity=\"${opacity.toFixed(2)}\" transform=\"rotate(${rotation},${px.toFixed(1)},${py.toFixed(1)})\"/>`,\n    );\n    count++;\n  }\n\n  return petals.length > 0\n    ? `<g class=\"falling-petals\">${petals.join('')}</g>`\n    : '';\n}\n\n/**\n * Render falling leaves for autumn zones.\n * Small colored ellipses in red/orange/gold scattered in autumn-zone columns.\n */\nexport function renderFallingLeaves(\n  isoCells: IsoCell[],\n  seed: number,\n  palette: TerrainPalette100,\n  seasonRotation: number = 0,\n): string {\n  const rng = seededRandom(seed + 5551);\n  const leaves: string[] = [];\n  const maxLeaves = 30;\n  let count = 0;\n\n  const leafColors = [\n    palette.assets.fallenLeafRed || '#c04030',\n    palette.assets.fallenLeafOrange || '#d08030',\n    palette.assets.fallenLeafGold || '#d0a030',\n    palette.assets.mapleRed || '#c83020',\n    palette.assets.oakGold || '#c8a030',\n  ];\n\n  // Collect cells in autumn zones (5, 6, 7)\n  const autumnCells = isoCells.filter(c => {\n    const zone = getSeasonZone(c.week, seasonRotation);\n    return zone === 6 || zone === 5 || zone === 7;\n  });\n\n  if (autumnCells.length === 0) return '';\n\n  const selected = selectEvenly(autumnCells, maxLeaves);\n  for (const cell of selected) {\n    if (count >= maxLeaves) break;\n    const zone = getSeasonZone(cell.week, seasonRotation);\n    const density = zone === 6 ? 0.7 : 0.35;\n    if (rng() > density) continue;\n\n    const px = cell.isoX + (rng() - 0.5) * 8;\n    const py = cell.isoY - cell.height - 2 - rng() * 12;\n    const rx = 0.4 + rng() * 0.3;\n    const ry = 0.15 + rng() * 0.1;\n    const rotation = Math.floor(rng() * 360);\n    const opacity = 0.4 + rng() * 0.3;\n    const color = leafColors[Math.floor(rng() * leafColors.length)];\n\n    leaves.push(\n      `<ellipse cx=\"${px.toFixed(1)}\" cy=\"${py.toFixed(1)}\" rx=\"${rx.toFixed(1)}\" ry=\"${ry.toFixed(2)}\" `\n      + `fill=\"${color}\" opacity=\"${opacity.toFixed(2)}\" transform=\"rotate(${rotation},${px.toFixed(1)},${py.toFixed(1)})\"/>`,\n    );\n    count++;\n  }\n\n  return leaves.length > 0\n    ? `<g class=\"falling-leaves\">${leaves.join('')}</g>`\n    : '';\n}\n\n// ── Helpers ──────────────────────────────────────────────────\n\nfunction selectEvenly<T>(items: T[], max: number): T[] {\n  if (items.length <= max) return items;\n  const step = items.length / max;\n  const result: T[] = [];\n  for (let i = 0; i < max; i++) {\n    result.push(items[Math.floor(i * step)]);\n  }\n  return result;\n}\n","import type { IsoCell } from './blocks.js';\nimport type { TerrainPalette100, AssetColors } from './palette.js';\nimport type { BiomeContext } from './biomes.js';\nimport { seededRandom } from '../../utils/math.js';\nimport { getSeasonalPoolOverrides } from './seasons.js';\n\n// ── Asset Type Definitions (38 total) ───────────────────────\n\ntype AssetType =\n  // Water (9–22)\n  | 'whale' | 'fish' | 'fishSchool' | 'boat' | 'seagull' | 'dock' | 'waves'\n  | 'kelp' | 'coral' | 'jellyfish' | 'turtle' | 'buoy' | 'sailboat' | 'lighthouse' | 'crab'\n  // Shore/Wetland (23–30)\n  | 'rock' | 'boulder' | 'flower' | 'bush'\n  | 'driftwood' | 'sandcastle' | 'tidePools' | 'heron' | 'shellfish' | 'cattail' | 'frog' | 'lily'\n  // Grassland (31–42)\n  | 'pine' | 'deciduous' | 'mushroom' | 'stump' | 'deer'\n  | 'rabbit' | 'fox' | 'butterfly' | 'beehive' | 'wildflowerPatch' | 'tallGrass' | 'birch' | 'haybale'\n  // Forest (43–65)\n  | 'willow' | 'palm' | 'bird'\n  | 'owl' | 'squirrel' | 'moss' | 'fern' | 'deadTree' | 'log' | 'berryBush' | 'spider'\n  // Farm (66–78)\n  | 'wheat' | 'fence' | 'scarecrow' | 'barn' | 'sheep' | 'cow' | 'chicken' | 'horse' | 'ricePaddy'\n  | 'silo' | 'pigpen' | 'trough' | 'haystack' | 'orchard' | 'beeFarm' | 'pumpkin'\n  // Village (79–90)\n  | 'tent' | 'hut' | 'house' | 'houseB' | 'church' | 'windmill' | 'well'\n  | 'tavern' | 'bakery' | 'stable' | 'garden' | 'laundry' | 'doghouse' | 'shrine' | 'wagon'\n  // Town/City (91–99)\n  | 'market' | 'inn' | 'blacksmith' | 'castle' | 'tower' | 'bridge'\n  | 'cathedral' | 'library' | 'clocktower' | 'statue' | 'park' | 'warehouse' | 'gatehouse' | 'manor'\n  // Biome blend\n  | 'reeds' | 'fountain' | 'canal' | 'watermill' | 'gardenTree' | 'pondLily'\n  // Cross-level decorations\n  | 'cart' | 'barrel' | 'torch' | 'flag' | 'cobblePath' | 'smoke'\n  | 'signpost' | 'lantern' | 'woodpile' | 'puddle' | 'campfire'\n  // Seasonal: Winter\n  | 'snowPine' | 'snowDeciduous' | 'snowman' | 'snowdrift' | 'igloo'\n  | 'frozenPond' | 'icicle' | 'sled' | 'snowCoveredRock' | 'bareBush'\n  | 'winterBird' | 'firewood'\n  // Seasonal: Spring\n  | 'cherryBlossom' | 'cherryBlossomSmall' | 'cherryPetals' | 'tulip'\n  | 'tulipField' | 'sprout' | 'nest' | 'lamb' | 'crocus' | 'rainPuddle'\n  | 'birdhouse' | 'gardenBed'\n  // Seasonal: Summer\n  | 'parasol' | 'beachTowel' | 'sandcastleSummer' | 'surfboard'\n  | 'iceCreamCart' | 'hammock' | 'sunflower' | 'watermelon' | 'sprinkler'\n  | 'lemonade' | 'fireflies' | 'swimmingPool'\n  // Seasonal: Autumn\n  | 'autumnMaple' | 'autumnOak' | 'autumnBirch' | 'autumnGinkgo'\n  | 'fallenLeaves' | 'leafSwirl' | 'acorn' | 'cornStalk'\n  | 'scarecrowAutumn' | 'harvestBasket' | 'hotDrink' | 'autumnWreath';\n\ninterface PlacedAsset {\n  cell: IsoCell;\n  type: AssetType;\n  cx: number;\n  cy: number;\n  ox: number;\n  oy: number;\n  variant: number;  // 0, 1, or 2 — selected by variantSeed\n}\n\n// ── Level100 → Asset Pool ───────────────────────────────────\n\ninterface AssetPool {\n  types: AssetType[];\n  chance: number;\n}\n\nfunction getLevelPool100(level: number): AssetPool {\n  // Desert (0–8): barren, rocks, occasional cactus-like features\n  if (level <= 4)  return { types: ['rock', 'boulder', 'stump', 'deadTree', 'puddle'], chance: 0.06 };\n  if (level <= 8)  return { types: ['rock', 'boulder', 'bush', 'stump', 'deadTree', 'signpost'], chance: 0.10 };\n  // Water / Oasis (9–22): aquatic life\n  if (level <= 14) return { types: ['whale', 'fish', 'fishSchool', 'boat', 'seagull', 'dock', 'waves', 'kelp', 'coral', 'jellyfish', 'turtle', 'crab', 'buoy'], chance: 0.16 };\n  if (level <= 22) return { types: ['fish', 'fishSchool', 'boat', 'seagull', 'waves', 'dock', 'kelp', 'coral', 'turtle', 'sailboat', 'lighthouse', 'crab', 'buoy'], chance: 0.18 };\n  // Shore / Wetland (23–30): transition to green\n  if (level <= 27) return { types: ['rock', 'boulder', 'flower', 'bush', 'bird', 'driftwood', 'sandcastle', 'tidePools', 'heron', 'shellfish', 'cattail', 'frog', 'lily'], chance: 0.16 };\n  if (level <= 30) return { types: ['bush', 'flower', 'rock', 'fence', 'driftwood', 'tidePools', 'heron', 'cattail', 'frog', 'lily', 'puddle'], chance: 0.18 };\n  // Grassland (31–42): open plains\n  if (level <= 36) return { types: ['bush', 'flower', 'mushroom', 'deer', 'bird', 'rabbit', 'fox', 'butterfly', 'wildflowerPatch', 'tallGrass', 'signpost', 'puddle'], chance: 0.22 };\n  if (level <= 42) return { types: ['pine', 'deciduous', 'bush', 'mushroom', 'flower', 'deer', 'rabbit', 'fox', 'butterfly', 'beehive', 'birch', 'haybale', 'tallGrass', 'lantern'], chance: 0.25 };\n  // Forest (43–65): dense green\n  if (level <= 52) return { types: ['pine', 'pine', 'deciduous', 'willow', 'bird', 'bush', 'owl', 'squirrel', 'moss', 'fern', 'berryBush', 'log', 'woodpile'], chance: 0.30 };\n  if (level <= 58) return { types: ['pine', 'deciduous', 'willow', 'palm', 'bird', 'pine', 'stump', 'owl', 'moss', 'fern', 'deadTree', 'log', 'spider', 'campfire'], chance: 0.32 };\n  if (level <= 65) return { types: ['deciduous', 'willow', 'pine', 'palm', 'bird', 'mushroom', 'squirrel', 'berryBush', 'fern', 'moss', 'log', 'woodpile'], chance: 0.28 };\n  // Farm (66–78): livestock + crops\n  if (level <= 70) return { types: ['wheat', 'fence', 'sheep', 'chicken', 'bush', 'ricePaddy', 'pumpkin', 'orchard', 'trough', 'haystack', 'signpost'], chance: 0.30 };\n  if (level <= 75) return { types: ['wheat', 'fence', 'scarecrow', 'cow', 'sheep', 'chicken', 'horse', 'ricePaddy', 'silo', 'pigpen', 'trough', 'orchard', 'beeFarm', 'pumpkin'], chance: 0.35 };\n  if (level <= 78) return { types: ['barn', 'sheep', 'cow', 'horse', 'wheat', 'fence', 'chicken', 'cart', 'ricePaddy', 'silo', 'pigpen', 'haystack', 'orchard', 'beeFarm', 'haybale'], chance: 0.38 };\n  // Village (79–90): buildings emerge\n  if (level <= 84) return { types: ['tent', 'hut', 'house', 'well', 'fence', 'sheep', 'barrel', 'tavern', 'bakery', 'stable', 'garden', 'doghouse', 'shrine', 'lantern', 'woodpile'], chance: 0.38 };\n  if (level <= 90) return { types: ['house', 'houseB', 'church', 'windmill', 'well', 'barrel', 'torch', 'tavern', 'bakery', 'stable', 'garden', 'laundry', 'wagon', 'shrine', 'lantern', 'signpost'], chance: 0.42 };\n  // Town / City (91–99): dense civilization with nature\n  if (level <= 95) return { types: ['house', 'houseB', 'market', 'inn', 'windmill', 'flag', 'cobblePath', 'torch', 'gardenTree', 'flower', 'bush', 'cathedral', 'library', 'clocktower', 'statue', 'park', 'warehouse', 'lantern'], chance: 0.48 };\n  return { types: ['castle', 'tower', 'church', 'market', 'inn', 'blacksmith', 'bridge', 'flag', 'cobblePath', 'gardenTree', 'flower', 'fountain', 'cathedral', 'library', 'clocktower', 'statue', 'park', 'gatehouse', 'manor', 'warehouse', 'lantern'], chance: 0.55 };\n}\n\n// ── Biome-Aware Blending ─────────────────────────────────────\n\nfunction blendWithBiome(pool: AssetPool, ctx: BiomeContext, level: number): AssetPool {\n  const types = [...pool.types];\n  let chance = pool.chance;\n\n  if (ctx.isRiver) {\n    // River cells get water assets adapted to surrounding level\n    if (level >= 91)      types.push('bridge', 'canal');\n    else if (level >= 66) types.push('watermill', 'canal', 'reeds', 'heron');\n    else if (level >= 31) types.push('reeds', 'reeds', 'willow', 'frog', 'heron', 'cattail');\n    else                  types.push('reeds', 'pondLily', 'lily', 'frog');\n    chance = Math.max(chance, 0.35);\n  } else if (ctx.isPond) {\n    // Pond cells get pond-specific decorations\n    if (level >= 79) types.push('fountain', 'pondLily', 'reeds', 'lily');\n    else             types.push('pondLily', 'pondLily', 'reeds', 'lily', 'frog', 'cattail');\n    chance = Math.max(chance, 0.30);\n  } else if (ctx.nearWater) {\n    // Adjacent to water: edge vegetation\n    if (level >= 79) types.push('fountain', 'gardenTree');\n    else             types.push('willow', 'reeds', 'bush', 'driftwood', 'heron');\n    chance += 0.05;\n  }\n\n  if (ctx.forestDensity > 0.3) {\n    // Forest overlay: add trees adapted to the level\n    const treesToAdd = ctx.forestDensity > 0.6 ? 3 : 1;\n    for (let i = 0; i < treesToAdd; i++) {\n      if (level >= 91)      types.push('gardenTree', 'flower');\n      else if (level >= 79) types.push('gardenTree');\n      else if (level >= 43) types.push('pine', 'deciduous', 'owl', 'squirrel', 'moss', 'fern');\n      else                  types.push('pine', 'birch');\n    }\n    chance += ctx.forestDensity * 0.08;\n  }\n\n  // Unconditional high-level greenery: towns and cities always get some nature\n  if (level >= 96) {\n    types.push('gardenTree', 'fountain', 'park');\n  } else if (level >= 91) {\n    types.push('gardenTree', 'lantern');\n  }\n\n  return { types, chance: Math.min(chance, 0.65) };\n}\n\n// ── Neighbor Richness ───────────────────────────────────────\n\nfunction computeRichness(cell: IsoCell, cellMap: Map<string, IsoCell>): number {\n  let neighborSum = 0;\n  let count = 0;\n  for (let dw = -1; dw <= 1; dw++) {\n    for (let dd = -1; dd <= 1; dd++) {\n      if (dw === 0 && dd === 0) continue;\n      const key = `${cell.week + dw},${cell.day + dd}`;\n      const n = cellMap.get(key);\n      if (n) {\n        neighborSum += n.level100;\n        count++;\n      }\n    }\n  }\n  if (count === 0) return 0;\n  return neighborSum / (count * 99);\n}\n\n// ── Animation Budget ────────────────────────────────────────\n\n/** Asset types that use SMIL animation elements (animate, animateTransform, animateMotion) */\nconst SMIL_ANIMATED_TYPES = new Set<AssetType>([\n  'seagull', 'waves', 'bird', 'windmill', 'smoke', 'fountain',\n  'watermill', 'jellyfish', 'turtle', 'butterfly', 'bakery',\n  'clocktower', 'campfire',\n]);\n\n/** Asset types that use CSS animation classes (sway-gentle, sway-slow) */\nconst CSS_ANIMATED_TYPES = new Set<AssetType>([\n  'cattail', 'tallGrass', 'laundry',\n]);\n\n// ── Asset Selection ─────────────────────────────────────────\n\nexport function selectAssets(\n  isoCells: IsoCell[],\n  seed: number,\n  variantSeed?: number,\n  biomeMap?: Map<string, BiomeContext>,\n  seasonRotation?: number,\n): PlacedAsset[] {\n  const rng = seededRandom(seed);\n  const variantRng = seededRandom(variantSeed ?? seed);\n  const assets: PlacedAsset[] = [];\n  const smokeBudget = { remaining: 5 };\n  const animBudget = { smil: 12, css: 10 };\n\n  const cellMap = new Map<string, IsoCell>();\n  for (const cell of isoCells) {\n    cellMap.set(`${cell.week},${cell.day}`, cell);\n  }\n\n  for (const cell of isoCells) {\n    let pool = getLevelPool100(cell.level100);\n    const biomeCtx = biomeMap?.get(`${cell.week},${cell.day}`);\n    if (biomeCtx) pool = blendWithBiome(pool, biomeCtx, cell.level100);\n\n    // Apply seasonal overrides if rotation is provided\n    if (seasonRotation != null) {\n      const { add, remove } = getSeasonalPoolOverrides(cell.week, seasonRotation, cell.level100);\n      pool = {\n        types: [...pool.types.filter(t => !remove.has(t)), ...add] as AssetType[],\n        chance: pool.chance,\n      };\n    }\n\n    const richness = computeRichness(cell, cellMap);\n    const finalChance = pool.chance + richness * 0.20;\n\n    if (pool.types.length === 0) continue; // skip if seasonal filtering emptied the pool\n\n    if (rng() < finalChance) {\n      let type = pool.types[Math.floor(rng() * pool.types.length)];\n\n      // Enforce smoke budget\n      if (type === 'smoke' && smokeBudget.remaining <= 0) {\n        type = 'barrel';\n      } else if (type === 'smoke') {\n        smokeBudget.remaining--;\n      }\n\n      const ox = (rng() - 0.5) * 3;\n      const oy = (rng() - 0.5) * 1.5;\n      let variant = Math.floor(variantRng() * 3);\n\n      // Enforce animation budget: swap animated types to static fallback when exhausted\n      if (SMIL_ANIMATED_TYPES.has(type)) {\n        if (animBudget.smil > 0) animBudget.smil--;\n        else type = 'barrel';  // swap to static asset\n      }\n      if (CSS_ANIMATED_TYPES.has(type)) {\n        if (animBudget.css > 0) animBudget.css--;\n        else variant = 0;  // v=0 is always the static default\n      }\n\n      assets.push({ cell, type, cx: cell.isoX, cy: cell.isoY, ox, oy, variant });\n\n      // High richness areas can get a second asset\n      if (richness > 0.5 && cell.level100 >= 30 && rng() < 0.3) {\n        let type2 = pool.types[Math.floor(rng() * pool.types.length)];\n        if (type2 === 'smoke' && smokeBudget.remaining <= 0) type2 = 'torch';\n        else if (type2 === 'smoke') smokeBudget.remaining--;\n\n        // Animation budget for second asset\n        if (SMIL_ANIMATED_TYPES.has(type2)) {\n          if (animBudget.smil > 0) animBudget.smil--;\n          else type2 = 'barrel';\n        }\n\n        let variant2 = Math.floor(variantRng() * 3);\n        if (CSS_ANIMATED_TYPES.has(type2)) {\n          if (animBudget.css > 0) animBudget.css--;\n          else variant2 = 0;\n        }\n\n        assets.push({\n          cell, type: type2,\n          cx: cell.isoX, cy: cell.isoY,\n          ox: (rng() - 0.5) * 4, oy: (rng() - 0.5) * 2,\n          variant: variant2,\n        });\n      }\n    }\n  }\n\n  return assets;\n}\n\n// ── SVG Renderers ─────────────────────────────────────────\n\n// Water assets\n\nfunction svgWhale(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Diving variant — tail up, no spout\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"3\" ry=\"1.5\" fill=\"${c.whale}\" transform=\"rotate(-15)\"/>`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"2\" ry=\"0.8\" fill=\"${c.whaleBelly}\" opacity=\"0.5\"/>`\n      + `<path d=\"M2.5,-1.5 Q4,-3 5,-3.5 M2.5,-1.5 Q4,-2 5,-1\" stroke=\"${c.whale}\" fill=\"none\" stroke-width=\"0.8\"/>`\n      + `<ellipse cx=\"5\" cy=\"-3.5\" rx=\"1\" ry=\"0.4\" fill=\"${c.whale}\"/>`\n      + `<ellipse cx=\"5\" cy=\"-1\" rx=\"1\" ry=\"0.4\" fill=\"${c.whale}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Baby whale variant — smaller, rounder\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"2.2\" ry=\"1.3\" fill=\"${c.whale}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-0.3\" rx=\"1.5\" ry=\"0.6\" fill=\"${c.whaleBelly}\" opacity=\"0.5\"/>`\n      + `<path d=\"M2,-0.8 Q3,-0.8 3.5,-1.8 M2,-0.8 Q3,-0.8 3.5,0.2\" stroke=\"${c.whale}\" fill=\"none\" stroke-width=\"0.7\"/>`\n      + `<ellipse cx=\"3.5\" cy=\"-1.8\" rx=\"0.8\" ry=\"0.3\" fill=\"${c.whale}\"/>`\n      + `<ellipse cx=\"3.5\" cy=\"0.2\" rx=\"0.8\" ry=\"0.3\" fill=\"${c.whale}\"/>`\n      + `<circle cx=\"-1.2\" cy=\"-1\" r=\"0.3\" fill=\"#fff\"/>`\n      + `<circle cx=\"-1.2\" cy=\"-1\" r=\"0.15\" fill=\"#222\"/>`\n      + `</g>`;\n  }\n  // Redesigned: rounder body, HORIZONTAL tail fluke, water spout\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-1.2\" rx=\"3.5\" ry=\"2\" fill=\"${c.whale}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"2.5\" ry=\"1\" fill=\"${c.whaleBelly}\" opacity=\"0.5\"/>`\n    // Horizontal tail fluke (key identifier)\n    + `<path d=\"M3,-1.2 Q4.5,-1.2 5,-2.5 M3,-1.2 Q4.5,-1.2 5,0\" stroke=\"${c.whale}\" fill=\"none\" stroke-width=\"1\"/>`\n    + `<ellipse cx=\"5\" cy=\"-2.5\" rx=\"1.2\" ry=\"0.4\" fill=\"${c.whale}\"/>`\n    + `<ellipse cx=\"5\" cy=\"0\" rx=\"1.2\" ry=\"0.4\" fill=\"${c.whale}\"/>`\n    // Eye\n    + `<circle cx=\"-2\" cy=\"-1.5\" r=\"0.4\" fill=\"#fff\"/>`\n    + `<circle cx=\"-2\" cy=\"-1.5\" r=\"0.2\" fill=\"#222\"/>`\n    // Spout (3 diverging lines)\n    + `<line x1=\"-0.5\" y1=\"-3.2\" x2=\"-1.2\" y2=\"-4.5\" stroke=\"${c.waterLight}\" stroke-width=\"0.3\" opacity=\"0.6\"/>`\n    + `<line x1=\"-0.5\" y1=\"-3.2\" x2=\"-0.5\" y2=\"-4.8\" stroke=\"${c.waterLight}\" stroke-width=\"0.3\" opacity=\"0.6\"/>`\n    + `<line x1=\"-0.5\" y1=\"-3.2\" x2=\"0.2\" y2=\"-4.5\" stroke=\"${c.waterLight}\" stroke-width=\"0.3\" opacity=\"0.6\"/>`\n    + `</g>`;\n}\n\nfunction svgFish(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Pair variant — two fish\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"-1\" cy=\"-0.5\" rx=\"1.3\" ry=\"0.5\" fill=\"${c.fish}\"/>`\n      + `<polygon points=\"0.3,-0.5 1,-1.3 1,0.3\" fill=\"${c.fish}\"/>`\n      + `<ellipse cx=\"1\" cy=\"-1.5\" rx=\"1.1\" ry=\"0.4\" fill=\"${c.fish}\" opacity=\"0.8\"/>`\n      + `<polygon points=\"2.1,-1.5 2.6,-2.1 2.6,-0.9\" fill=\"${c.fish}\" opacity=\"0.8\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Striped large variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1\" rx=\"2.2\" ry=\"0.9\" fill=\"${c.fish}\"/>`\n      + `<polygon points=\"2.2,-1 3.2,-2.2 3.2,0.2\" fill=\"${c.fish}\"/>`\n      + `<line x1=\"-0.5\" y1=\"-0.3\" x2=\"-0.5\" y2=\"-1.7\" stroke=\"${c.whaleBelly}\" stroke-width=\"0.3\" opacity=\"0.4\"/>`\n      + `<line x1=\"0.5\" y1=\"-0.3\" x2=\"0.5\" y2=\"-1.7\" stroke=\"${c.whaleBelly}\" stroke-width=\"0.3\" opacity=\"0.4\"/>`\n      + `<circle cx=\"-1.3\" cy=\"-1.1\" r=\"0.3\" fill=\"#fff\"/>`\n      + `</g>`;\n  }\n  // Redesigned: slender body, VERTICAL tail fin\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"1.8\" ry=\"0.7\" fill=\"${c.fish}\"/>`\n    // Vertical tail fin (key differentiator from whale)\n    + `<polygon points=\"1.8,-0.8 2.8,-2 2.8,0.4\" fill=\"${c.fish}\"/>`\n    + `<circle cx=\"-1\" cy=\"-0.9\" r=\"0.25\" fill=\"#fff\"/>`\n    + `</g>`;\n}\n\nfunction svgFishSchool(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"-1\" cy=\"-0.5\" rx=\"1\" ry=\"0.4\" fill=\"${c.fish}\" opacity=\"0.8\"/>`\n    + `<ellipse cx=\"1\" cy=\"-1.2\" rx=\"0.8\" ry=\"0.35\" fill=\"${c.fish}\" opacity=\"0.7\"/>`\n    + `<ellipse cx=\"0.5\" cy=\"0\" rx=\"0.9\" ry=\"0.4\" fill=\"${c.fish}\" opacity=\"0.6\"/>`\n    + `</g>`;\n}\n\nfunction svgBoat(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Sailboat variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<polygon points=\"-3,0 -2,-1.5 3,-1.5 3.5,0\" fill=\"${c.boat}\"/>`\n      + `<line x1=\"0\" y1=\"-1.5\" x2=\"0\" y2=\"-6\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n      + `<polygon points=\"0,-5.5 0,-2 2.5,-2.5\" fill=\"${c.sail}\" opacity=\"0.9\"/>`\n      + `<polygon points=\"0,-5 0,-2.5 -2,-3\" fill=\"${c.sail}\" opacity=\"0.7\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Fishing boat variant (no sail, fishing rod)\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<polygon points=\"-2.5,0 -1.5,-1 2.5,-1 3,0\" fill=\"${c.boat}\"/>`\n      + `<line x1=\"2\" y1=\"-1\" x2=\"3.5\" y2=\"-3\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"3.5\" y1=\"-3\" x2=\"4\" y2=\"-1.5\" stroke=\"${c.waterLight}\" stroke-width=\"0.2\" opacity=\"0.6\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-3,0 -2,-1.5 3,-1.5 3.5,0\" fill=\"${c.boat}\"/>`\n    + `<line x1=\"0\" y1=\"-1.5\" x2=\"0\" y2=\"-6\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `<polygon points=\"0,-5.5 0,-2 2.5,-2.5\" fill=\"${c.sail}\" opacity=\"0.9\"/>`\n    + `</g>`;\n}\n\nfunction svgSeagull(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Sitting variant — perched on water\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1\" rx=\"1.2\" ry=\"0.7\" fill=\"${c.seagull}\"/>`\n      + `<circle cx=\"-0.8\" cy=\"-1.5\" r=\"0.4\" fill=\"${c.seagull}\"/>`\n      + `<polygon points=\"-1.2,-1.4 -1.7,-1.3 -1.2,-1.2\" fill=\"${c.wheat}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Pair variant — two flying\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<g>`\n      + `<path d=\"M-1.5,-3 Q-0.5,-4.5 0.5,-3\" stroke=\"${c.seagull}\" fill=\"none\" stroke-width=\"0.5\"/>`\n      + `<path d=\"M1,-4.5 Q2,-5.5 3,-4.5\" stroke=\"${c.seagull}\" fill=\"none\" stroke-width=\"0.4\" opacity=\"0.7\"/>`\n      + `<animateMotion path=\"M0,0 C2,-1 3,0 2,1 C1,2 -1,1 -2,0 C-3,-1 -1,-2 0,0\" dur=\"10s\" repeatCount=\"indefinite\"/>`\n      + `</g>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<g>`\n    + `<path d=\"M-2,-3 Q-1,-4.5 0,-3 Q1,-4.5 2,-3\" stroke=\"${c.seagull}\" fill=\"none\" stroke-width=\"0.6\"/>`\n    + `<circle cx=\"0\" cy=\"-3\" r=\"0.4\" fill=\"${c.seagull}\"/>`\n    + `<animateMotion path=\"M0,0 C2,-1 3,0 2,1 C1,2 -1,1 -2,0 C-3,-1 -1,-2 0,0\" dur=\"10s\" repeatCount=\"indefinite\"/>`\n    + `</g>`\n    + `</g>`;\n}\n\nfunction svgDock(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-3\" y=\"-0.5\" width=\"6\" height=\"1\" fill=\"${c.dock}\" rx=\"0.2\"/>`\n    + `<line x1=\"-2\" y1=\"0.5\" x2=\"-2\" y2=\"1.5\" stroke=\"${c.dock}\" stroke-width=\"0.5\"/>`\n    + `<line x1=\"2\" y1=\"0.5\" x2=\"2\" y2=\"1.5\" stroke=\"${c.dock}\" stroke-width=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgWaves(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<path d=\"M-3,-0.5 Q-1.5,-1.5 0,-0.5 Q1.5,0.5 3,-0.5\" stroke=\"${c.waterLight}\" fill=\"none\" stroke-width=\"0.4\" opacity=\"0.5\">`\n    + `<animate attributeName=\"d\" values=\"M-3,-0.5 Q-1.5,-1.5 0,-0.5 Q1.5,0.5 3,-0.5;M-3,-0.3 Q-1.5,-1.2 0,-0.8 Q1.5,0.2 3,-0.3;M-3,-0.5 Q-1.5,-1.5 0,-0.5 Q1.5,0.5 3,-0.5\" dur=\"4s\" repeatCount=\"indefinite\"/>`\n    + `</path>`\n    + `</g>`;\n}\n\n// Shore assets\n\nfunction svgRock(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Rounded variant\n    return `<ellipse cx=\"${x}\" cy=\"${y - 1}\" rx=\"1.8\" ry=\"1.2\" fill=\"${c.rock}\"/>`;\n  }\n  if (v === 2) {\n    // Flat/stacked variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-0.4\" rx=\"2.2\" ry=\"0.6\" fill=\"${c.rock}\"/>`\n      + `<ellipse cx=\"0.3\" cy=\"-1\" rx=\"1.5\" ry=\"0.5\" fill=\"${c.boulder}\"/>`\n      + `</g>`;\n  }\n  return `<polygon points=\"${x - 1.5},${y} ${x - 1},${y - 2} ${x + 0.5},${y - 2.3} ${x + 1.5},${y - 1} ${x + 1},${y}\" fill=\"${c.rock}\"/>`;\n}\n\nfunction svgBoulder(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"2.5\" ry=\"1.8\" fill=\"${c.boulder}\"/>`\n    + `<ellipse cx=\"-0.5\" cy=\"-2\" rx=\"1.5\" ry=\"1\" fill=\"${c.rock}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgFlower(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Yellow flower variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-2.5\" stroke=\"${c.pine}\" stroke-width=\"0.3\"/>`\n      + `<circle cx=\"0\" cy=\"-3\" r=\"1\" fill=\"${c.flowerCenter}\"/>`\n      + `<circle cx=\"0\" cy=\"-3\" r=\"0.4\" fill=\"${c.flower}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Purple cluster variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"-0.8\" y1=\"0\" x2=\"-0.8\" y2=\"-2\" stroke=\"${c.pine}\" stroke-width=\"0.25\"/>`\n      + `<line x1=\"0.8\" y1=\"0\" x2=\"0.8\" y2=\"-2.2\" stroke=\"${c.pine}\" stroke-width=\"0.25\"/>`\n      + `<circle cx=\"-0.8\" cy=\"-2.5\" r=\"0.7\" fill=\"${c.wildflower}\"/>`\n      + `<circle cx=\"0.8\" cy=\"-2.7\" r=\"0.7\" fill=\"${c.wildflower}\"/>`\n      + `<circle cx=\"0\" cy=\"-2.3\" r=\"0.5\" fill=\"${c.wildflower}\" opacity=\"0.8\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-2.5\" stroke=\"${c.pine}\" stroke-width=\"0.3\"/>`\n    + `<circle cx=\"0\" cy=\"-3\" r=\"1\" fill=\"${c.flower}\"/>`\n    + `<circle cx=\"0\" cy=\"-3\" r=\"0.4\" fill=\"${c.flowerCenter}\"/>`\n    + `</g>`;\n}\n\nfunction svgBush(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Wide/flat variant\n    return `<ellipse cx=\"${x}\" cy=\"${y - 1}\" rx=\"3\" ry=\"1\" fill=\"${c.bush}\"/>`;\n  }\n  if (v === 2) {\n    // Flowering variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"2\" ry=\"1.5\" fill=\"${c.bush}\"/>`\n      + `<circle cx=\"-0.8\" cy=\"-2\" r=\"0.3\" fill=\"${c.flower}\"/>`\n      + `<circle cx=\"0.5\" cy=\"-2.3\" r=\"0.3\" fill=\"${c.flower}\"/>`\n      + `<circle cx=\"0.8\" cy=\"-1.5\" r=\"0.25\" fill=\"${c.flower}\"/>`\n      + `</g>`;\n  }\n  return `<ellipse cx=\"${x}\" cy=\"${y - 1.5}\" rx=\"2\" ry=\"1.5\" fill=\"${c.bush}\"/>`;\n}\n\n// Grassland assets\n\nfunction svgPine(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Short/bushy variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-1.5\" stroke=\"${c.trunk}\" stroke-width=\"0.7\"/>`\n      + `<polygon points=\"0,-5 -3,-1.5 3,-1.5\" fill=\"${c.pine}\"/>`\n      + `<polygon points=\"0,-6.5 -2.2,-3 2.2,-3\" fill=\"${c.pine}\" opacity=\"0.85\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Wind-bent variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<path d=\"M0,0 Q0.5,-2 1,-3\" stroke=\"${c.trunk}\" fill=\"none\" stroke-width=\"0.6\"/>`\n      + `<polygon points=\"1,-8 -1.5,-3 3.5,-3\" fill=\"${c.pine}\"/>`\n      + `<polygon points=\"1.2,-9.5 -0.5,-5.5 2.8,-5.5\" fill=\"${c.pine}\" opacity=\"0.85\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-2\" stroke=\"${c.trunk}\" stroke-width=\"0.6\"/>`\n    + `<polygon points=\"0,-8 -2.5,-2 2.5,-2\" fill=\"${c.pine}\"/>`\n    + `<polygon points=\"0,-10 -1.8,-5 1.8,-5\" fill=\"${c.pine}\" opacity=\"0.85\"/>`\n    + `</g>`;\n}\n\nfunction svgDeciduous(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Oval tall variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-4\" stroke=\"${c.trunk}\" stroke-width=\"0.6\"/>`\n      + `<ellipse cx=\"0\" cy=\"-7\" rx=\"2\" ry=\"3.5\" fill=\"${c.leaf}\"/>`\n      + `<ellipse cx=\"-0.5\" cy=\"-6.5\" rx=\"1.3\" ry=\"2.5\" fill=\"${c.bush}\" opacity=\"0.7\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Multi-branch spread variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-2.5\" stroke=\"${c.trunk}\" stroke-width=\"0.7\"/>`\n      + `<line x1=\"0\" y1=\"-2.5\" x2=\"-2\" y2=\"-4\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"-2.5\" x2=\"2\" y2=\"-4\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n      + `<circle cx=\"-2\" cy=\"-5\" r=\"2\" fill=\"${c.leaf}\"/>`\n      + `<circle cx=\"2\" cy=\"-5\" r=\"2\" fill=\"${c.leaf}\"/>`\n      + `<circle cx=\"0\" cy=\"-5.5\" r=\"1.8\" fill=\"${c.bush}\" opacity=\"0.7\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-3\" stroke=\"${c.trunk}\" stroke-width=\"0.6\"/>`\n    + `<circle cx=\"0\" cy=\"-5.5\" r=\"2.8\" fill=\"${c.leaf}\"/>`\n    + `<circle cx=\"-1.2\" cy=\"-5\" r=\"2\" fill=\"${c.bush}\" opacity=\"0.7\"/>`\n    + `</g>`;\n}\n\nfunction svgMushroom(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Brown cluster variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-1.2\" y=\"-1.5\" width=\"0.6\" height=\"1.5\" fill=\"${c.mushroom}\"/>`\n      + `<ellipse cx=\"-0.9\" cy=\"-1.7\" rx=\"1\" ry=\"0.7\" fill=\"${c.trunk}\"/>`\n      + `<rect x=\"0.5\" y=\"-1.8\" width=\"0.5\" height=\"1.8\" fill=\"${c.mushroom}\"/>`\n      + `<ellipse cx=\"0.75\" cy=\"-2\" rx=\"0.8\" ry=\"0.6\" fill=\"${c.trunk}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Tall/thin variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-0.3\" y=\"-3\" width=\"0.6\" height=\"3\" fill=\"${c.mushroom}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-3.2\" rx=\"1\" ry=\"0.6\" fill=\"${c.mushroomCap}\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-0.4\" y=\"-2\" width=\"0.8\" height=\"2\" fill=\"${c.mushroom}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-2.2\" rx=\"1.5\" ry=\"1\" fill=\"${c.mushroomCap}\"/>`\n    + `<circle cx=\"-0.5\" cy=\"-2.5\" r=\"0.3\" fill=\"${c.mushroom}\" opacity=\"0.7\"/>`\n    + `</g>`;\n}\n\nfunction svgStump(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // With mushrooms variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"1.5\" ry=\"0.8\" fill=\"${c.stump}\"/>`\n      + `<rect x=\"-1.5\" y=\"-1.5\" width=\"3\" height=\"1.5\" fill=\"${c.trunk}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"1.5\" ry=\"0.6\" fill=\"${c.stump}\" opacity=\"0.7\"/>`\n      + `<circle cx=\"1.2\" cy=\"-1.2\" r=\"0.4\" fill=\"${c.mushroom}\"/>`\n      + `<circle cx=\"1.5\" cy=\"-0.8\" r=\"0.3\" fill=\"${c.mushroom}\" opacity=\"0.8\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Mossy variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"1.5\" ry=\"0.8\" fill=\"${c.stump}\"/>`\n      + `<rect x=\"-1.5\" y=\"-1.5\" width=\"3\" height=\"1.5\" fill=\"${c.trunk}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"1.5\" ry=\"0.6\" fill=\"${c.moss}\" opacity=\"0.6\"/>`\n      + `<ellipse cx=\"-0.5\" cy=\"-1\" rx=\"0.8\" ry=\"0.3\" fill=\"${c.moss}\" opacity=\"0.4\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"1.5\" ry=\"0.8\" fill=\"${c.stump}\"/>`\n    + `<rect x=\"-1.5\" y=\"-1.5\" width=\"3\" height=\"1.5\" fill=\"${c.trunk}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"1.5\" ry=\"0.6\" fill=\"${c.stump}\" opacity=\"0.7\"/>`\n    + `</g>`;\n}\n\nfunction svgDeer(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Grazing variant — head down\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-2\" rx=\"2.2\" ry=\"1.2\" fill=\"${c.deer}\"/>`\n      + `<circle cx=\"-2.2\" cy=\"-1.8\" r=\"0.6\" fill=\"${c.deer}\"/>`\n      + `<line x1=\"-2.5\" y1=\"-2.4\" x2=\"-2.8\" y2=\"-3.2\" stroke=\"${c.trunk}\" stroke-width=\"0.25\"/>`\n      + `<line x1=\"-1.9\" y1=\"-2.4\" x2=\"-1.5\" y2=\"-3.2\" stroke=\"${c.trunk}\" stroke-width=\"0.25\"/>`\n      + `<line x1=\"-1\" y1=\"-0.8\" x2=\"-1\" y2=\"0\" stroke=\"${c.deer}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"1\" y1=\"-0.8\" x2=\"1\" y2=\"0\" stroke=\"${c.deer}\" stroke-width=\"0.4\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Walking variant — legs spread\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-2\" rx=\"2.2\" ry=\"1.2\" fill=\"${c.deer}\"/>`\n      + `<circle cx=\"-2\" cy=\"-3\" r=\"0.7\" fill=\"${c.deer}\"/>`\n      + `<line x1=\"-2.3\" y1=\"-3.7\" x2=\"-3\" y2=\"-4.8\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"-1.7\" y1=\"-3.7\" x2=\"-1\" y2=\"-4.8\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"-1.2\" y1=\"-0.8\" x2=\"-1.8\" y2=\"0.3\" stroke=\"${c.deer}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0.8\" y1=\"-0.8\" x2=\"1.5\" y2=\"0.3\" stroke=\"${c.deer}\" stroke-width=\"0.4\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-2\" rx=\"2.2\" ry=\"1.2\" fill=\"${c.deer}\"/>`\n    + `<circle cx=\"-2\" cy=\"-3\" r=\"0.7\" fill=\"${c.deer}\"/>`\n    // Antlers (key identifier)\n    + `<line x1=\"-2.3\" y1=\"-3.7\" x2=\"-3\" y2=\"-5\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"-3\" y1=\"-5\" x2=\"-3.5\" y2=\"-5.3\" stroke=\"${c.trunk}\" stroke-width=\"0.25\"/>`\n    + `<line x1=\"-1.7\" y1=\"-3.7\" x2=\"-1\" y2=\"-5\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"-1\" y1=\"-5\" x2=\"-0.5\" y2=\"-5.3\" stroke=\"${c.trunk}\" stroke-width=\"0.25\"/>`\n    // Legs\n    + `<line x1=\"-1\" y1=\"-0.8\" x2=\"-1\" y2=\"0\" stroke=\"${c.deer}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"1\" y1=\"-0.8\" x2=\"1\" y2=\"0\" stroke=\"${c.deer}\" stroke-width=\"0.4\"/>`\n    + `</g>`;\n}\n\n// Forest assets\n\nfunction svgWillow(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Short wide variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-3\" stroke=\"${c.trunk}\" stroke-width=\"0.9\"/>`\n      + `<circle cx=\"0\" cy=\"-4\" r=\"2.5\" fill=\"${c.willow}\"/>`\n      + `<path d=\"M-2.5,-3 Q-4,-1 -4,0\" stroke=\"${c.willow}\" fill=\"none\" stroke-width=\"0.6\" opacity=\"0.7\"/>`\n      + `<path d=\"M2.5,-3 Q4,-1 4,0\" stroke=\"${c.willow}\" fill=\"none\" stroke-width=\"0.6\" opacity=\"0.7\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Gnarled trunk variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<path d=\"M0,0 Q-1,-2.5 0.5,-5\" stroke=\"${c.trunk}\" fill=\"none\" stroke-width=\"1\"/>`\n      + `<circle cx=\"0.5\" cy=\"-6\" r=\"1.8\" fill=\"${c.willow}\"/>`\n      + `<path d=\"M-1,-5 Q-2.5,-3 -3,-1\" stroke=\"${c.willow}\" fill=\"none\" stroke-width=\"0.5\" opacity=\"0.7\"/>`\n      + `<path d=\"M2,-5 Q2.5,-3 2,-1\" stroke=\"${c.willow}\" fill=\"none\" stroke-width=\"0.5\" opacity=\"0.7\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-5\" stroke=\"${c.trunk}\" stroke-width=\"0.8\"/>`\n    + `<circle cx=\"0\" cy=\"-6\" r=\"2\" fill=\"${c.willow}\"/>`\n    + `<path d=\"M-2,-5 Q-3,-3 -3,-1\" stroke=\"${c.willow}\" fill=\"none\" stroke-width=\"0.6\" opacity=\"0.7\"/>`\n    + `<path d=\"M2,-5 Q3,-3 3,-1\" stroke=\"${c.willow}\" fill=\"none\" stroke-width=\"0.6\" opacity=\"0.7\"/>`\n    + `<path d=\"M-1,-5.5 Q-2,-3.5 -2.5,-2\" stroke=\"${c.willow}\" fill=\"none\" stroke-width=\"0.4\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgPalm(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Curved trunk variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<path d=\"M0,0 Q-2,-4 -1,-8\" stroke=\"${c.trunk}\" fill=\"none\" stroke-width=\"0.7\"/>`\n      + `<path d=\"M-1,-8 Q2,-9 3,-7\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.8\"/>`\n      + `<path d=\"M-1,-8 Q-3,-9 -4,-7\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.8\"/>`\n      + `<path d=\"M-1,-8 Q1,-10 2,-9\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.6\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Pair variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<path d=\"M-1.5,0 Q-2,-3 -1,-6\" stroke=\"${c.trunk}\" fill=\"none\" stroke-width=\"0.6\"/>`\n      + `<path d=\"M-1,-6 Q1,-7 2,-5.5\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.7\"/>`\n      + `<path d=\"M-1,-6 Q-3,-7 -3.5,-5.5\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.7\"/>`\n      + `<path d=\"M1.5,0 Q1,-3 2,-7\" stroke=\"${c.trunk}\" fill=\"none\" stroke-width=\"0.6\"/>`\n      + `<path d=\"M2,-7 Q4,-8 4.5,-6.5\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.7\"/>`\n      + `<path d=\"M2,-7 Q0,-8 -0.5,-6.5\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.7\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<path d=\"M0,0 Q-0.5,-4 0.5,-8\" stroke=\"${c.trunk}\" fill=\"none\" stroke-width=\"0.7\"/>`\n    + `<path d=\"M0.5,-8 Q3,-9 4,-7\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.8\"/>`\n    + `<path d=\"M0.5,-8 Q-2,-9 -3,-7\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.8\"/>`\n    + `<path d=\"M0.5,-8 Q2,-10 3,-9\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.6\"/>`\n    + `<path d=\"M0.5,-8 Q-1,-10 -2,-9\" stroke=\"${c.palm}\" fill=\"none\" stroke-width=\"0.6\"/>`\n    + `</g>`;\n}\n\nfunction svgBird(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Perched variant — sitting on invisible branch\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<circle cx=\"0\" cy=\"-4\" r=\"0.6\" fill=\"${c.bird}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-3.5\" rx=\"0.5\" ry=\"0.8\" fill=\"${c.bird}\"/>`\n      + `<polygon points=\"-0.6,-4 -1,-3.9 -0.6,-3.8\" fill=\"${c.wheat}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Pair variant — two V-shapes\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<g>`\n      + `<path d=\"M-1.5,-4 Q0,-5.5 1.5,-4\" stroke=\"${c.bird}\" fill=\"none\" stroke-width=\"0.5\"/>`\n      + `<path d=\"M0,-5.5 Q1.5,-7 3,-5.5\" stroke=\"${c.bird}\" fill=\"none\" stroke-width=\"0.4\" opacity=\"0.7\"/>`\n      + `<animateTransform attributeName=\"transform\" type=\"translate\" values=\"0,0;4,-1;0,0\" dur=\"12s\" repeatCount=\"indefinite\"/>`\n      + `</g>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<g>`\n    + `<path d=\"M-1.5,-4 Q0,-5.5 1.5,-4\" stroke=\"${c.bird}\" fill=\"none\" stroke-width=\"0.5\"/>`\n    + `<animateTransform attributeName=\"transform\" type=\"translate\" values=\"0,0;4,-1;0,0\" dur=\"12s\" repeatCount=\"indefinite\"/>`\n    + `</g>`\n    + `</g>`;\n}\n\n// Farm assets\n\nfunction svgWheat(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Ripe golden variant — denser, drooping heads\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"-1.5\" y1=\"0\" x2=\"-1.5\" y2=\"-4\" stroke=\"${c.wheat}\" stroke-width=\"0.35\"/>`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-4.5\" stroke=\"${c.wheat}\" stroke-width=\"0.35\"/>`\n      + `<line x1=\"1.5\" y1=\"0\" x2=\"1.5\" y2=\"-3.8\" stroke=\"${c.wheat}\" stroke-width=\"0.35\"/>`\n      + `<line x1=\"-0.7\" y1=\"0\" x2=\"-0.7\" y2=\"-4.2\" stroke=\"${c.wheat}\" stroke-width=\"0.25\" opacity=\"0.7\"/>`\n      + `<ellipse cx=\"-1.5\" cy=\"-4.3\" rx=\"0.4\" ry=\"0.7\" fill=\"${c.wheat}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-4.8\" rx=\"0.4\" ry=\"0.7\" fill=\"${c.wheat}\"/>`\n      + `<ellipse cx=\"1.5\" cy=\"-4.1\" rx=\"0.4\" ry=\"0.7\" fill=\"${c.wheat}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Harvested stubble variant — short cut stalks\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"-2\" y1=\"0\" x2=\"-2\" y2=\"-1.2\" stroke=\"${c.wheat}\" stroke-width=\"0.3\" opacity=\"0.6\"/>`\n      + `<line x1=\"-0.5\" y1=\"0\" x2=\"-0.5\" y2=\"-1\" stroke=\"${c.wheat}\" stroke-width=\"0.3\" opacity=\"0.6\"/>`\n      + `<line x1=\"1\" y1=\"0\" x2=\"1\" y2=\"-1.3\" stroke=\"${c.wheat}\" stroke-width=\"0.3\" opacity=\"0.6\"/>`\n      + `<line x1=\"2.5\" y1=\"0\" x2=\"2.5\" y2=\"-0.8\" stroke=\"${c.wheat}\" stroke-width=\"0.3\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"-1.5\" y1=\"0\" x2=\"-1.5\" y2=\"-4\" stroke=\"${c.wheat}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-4.5\" stroke=\"${c.wheat}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"1.5\" y1=\"0\" x2=\"1.5\" y2=\"-3.8\" stroke=\"${c.wheat}\" stroke-width=\"0.3\"/>`\n    + `<circle cx=\"-1.5\" cy=\"-4.2\" r=\"0.5\" fill=\"${c.wheat}\"/>`\n    + `<circle cx=\"0\" cy=\"-4.8\" r=\"0.5\" fill=\"${c.wheat}\"/>`\n    + `<circle cx=\"1.5\" cy=\"-4\" r=\"0.5\" fill=\"${c.wheat}\"/>`\n    + `</g>`;\n}\n\nfunction svgFence(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // L-corner variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"-3\" y1=\"-1.5\" x2=\"0\" y2=\"-1.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"-3\" y1=\"-2.5\" x2=\"0\" y2=\"-2.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"-3\" y1=\"0\" x2=\"-3\" y2=\"-3\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-3\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"-1.5\" x2=\"0\" y2=\"-1.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"-1.5\" x2=\"0\" y2=\"0\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"-2.5\" x2=\"3\" y2=\"-2.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"-1.5\" x2=\"3\" y2=\"-1.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"3\" y1=\"0\" x2=\"3\" y2=\"-3\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Gate variant — gap in middle\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"-3\" y1=\"-1.5\" x2=\"-0.5\" y2=\"-1.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0.5\" y1=\"-1.5\" x2=\"3\" y2=\"-1.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"-3\" y1=\"-2.5\" x2=\"-0.5\" y2=\"-2.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0.5\" y1=\"-2.5\" x2=\"3\" y2=\"-2.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"-3\" y1=\"0\" x2=\"-3\" y2=\"-3\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"-0.5\" y1=\"0\" x2=\"-0.5\" y2=\"-3.3\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0.5\" y1=\"0\" x2=\"0.5\" y2=\"-3.3\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"3\" y1=\"0\" x2=\"3\" y2=\"-3\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"-3\" y1=\"-1.5\" x2=\"3\" y2=\"-1.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"-3\" y1=\"-2.5\" x2=\"3\" y2=\"-2.5\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"-3\" y1=\"0\" x2=\"-3\" y2=\"-3\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-3\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"3\" y1=\"0\" x2=\"3\" y2=\"-3\" stroke=\"${c.fence}\" stroke-width=\"0.4\"/>`\n    + `</g>`;\n}\n\nfunction svgScarecrow(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // With crow variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-6\" stroke=\"${c.scarecrow}\" stroke-width=\"0.5\"/>`\n      + `<line x1=\"-2.5\" y1=\"-4\" x2=\"2.5\" y2=\"-4\" stroke=\"${c.scarecrow}\" stroke-width=\"0.4\"/>`\n      + `<circle cx=\"0\" cy=\"-7\" r=\"1\" fill=\"${c.scarecrowHat}\"/>`\n      + `<rect x=\"-1.5\" y=\"-8.2\" width=\"3\" height=\"0.8\" fill=\"${c.scarecrowHat}\" rx=\"0.2\"/>`\n      + `<path d=\"M2,-4.5 Q2.5,-5.5 3,-4.5\" stroke=\"${c.bird}\" fill=\"${c.bird}\" stroke-width=\"0.3\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Tattered variant — tilted, ragged\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0.3\" y2=\"-5.5\" stroke=\"${c.scarecrow}\" stroke-width=\"0.5\"/>`\n      + `<line x1=\"-2\" y1=\"-3.5\" x2=\"2.5\" y2=\"-4.2\" stroke=\"${c.scarecrow}\" stroke-width=\"0.4\"/>`\n      + `<circle cx=\"0.3\" cy=\"-6.5\" r=\"0.9\" fill=\"${c.scarecrowHat}\"/>`\n      + `<rect x=\"-1\" y=\"-7.6\" width=\"2.8\" height=\"0.7\" fill=\"${c.scarecrowHat}\" rx=\"0.2\" transform=\"rotate(-8 0.3 -7)\"/>`\n      + `<path d=\"M-2,-3.5 L-2.5,-2.5\" stroke=\"${c.scarecrow}\" stroke-width=\"0.3\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-6\" stroke=\"${c.scarecrow}\" stroke-width=\"0.5\"/>`\n    + `<line x1=\"-2.5\" y1=\"-4\" x2=\"2.5\" y2=\"-4\" stroke=\"${c.scarecrow}\" stroke-width=\"0.4\"/>`\n    + `<circle cx=\"0\" cy=\"-7\" r=\"1\" fill=\"${c.scarecrowHat}\"/>`\n    + `<rect x=\"-1.5\" y=\"-8.2\" width=\"3\" height=\"0.8\" fill=\"${c.scarecrowHat}\" rx=\"0.2\"/>`\n    + `</g>`;\n}\n\nfunction svgBarn(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Large red barn variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<polygon points=\"-4,0 0,2 4,0 4,-4.5 0,-2.5 -4,-4.5\" fill=\"${c.roofA}\" opacity=\"0.9\"/>`\n      + `<polygon points=\"-4,0 0,2 0,-2.5 -4,-4.5\" fill=\"${c.wallShade}\"/>`\n      + `<polygon points=\"0,-7.5 -4.5,-4 0,-2.2 4.5,-4\" fill=\"${c.roofA}\"/>`\n      + `<rect x=\"-0.5\" y=\"-1.5\" width=\"1\" height=\"1.5\" fill=\"${c.trunk}\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Small shed variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-2\" y=\"-2.5\" width=\"4\" height=\"2.5\" fill=\"${c.wallShade}\"/>`\n      + `<polygon points=\"-2.5,-2.5 0,-4 2.5,-2.5\" fill=\"${c.roofB}\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-3,0 0,1.5 3,0 3,-3.5 0,-2 -3,-3.5\" fill=\"${c.roofA}\" opacity=\"0.8\"/>`\n    + `<polygon points=\"-3,0 0,1.5 0,-2 -3,-3.5\" fill=\"${c.wallShade}\"/>`\n    + `<polygon points=\"0,-6 -3.5,-3.2 0,-1.8 3.5,-3.2\" fill=\"${c.roofA}\"/>`\n    + `</g>`;\n}\n\nfunction svgSheep(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Lying down variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"2\" ry=\"1\" fill=\"${c.sheep}\"/>`\n      + `<circle cx=\"-1.8\" cy=\"-1.2\" r=\"0.7\" fill=\"${c.sheepHead}\"/>`\n      + `<circle cx=\"-1.8\" cy=\"-1.4\" r=\"0.12\" fill=\"#fff\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Grazing (head down) variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<circle cx=\"0\" cy=\"-2\" r=\"1.6\" fill=\"${c.sheep}\"/>`\n      + `<circle cx=\"-1.2\" cy=\"-2.2\" r=\"1.3\" fill=\"${c.sheep}\"/>`\n      + `<circle cx=\"1.2\" cy=\"-2.2\" r=\"1.3\" fill=\"${c.sheep}\"/>`\n      + `<circle cx=\"-2\" cy=\"-1.5\" r=\"0.7\" fill=\"${c.sheepHead}\"/>`\n      + `<ellipse cx=\"-2.5\" cy=\"-1.2\" rx=\"0.5\" ry=\"0.3\" fill=\"${c.sheepHead}\"/>`\n      + `<line x1=\"-1\" y1=\"-0.8\" x2=\"-1\" y2=\"0.3\" stroke=\"${c.sheepHead}\" stroke-width=\"0.35\"/>`\n      + `<line x1=\"1\" y1=\"-0.8\" x2=\"1\" y2=\"0.3\" stroke=\"${c.sheepHead}\" stroke-width=\"0.35\"/>`\n      + `</g>`;\n  }\n  // Fluffy multi-bump wool body with detailed head and 4 legs\n  return `<g transform=\"translate(${x},${y})\">`\n    // Wool body: 5 overlapping circles for fluffy texture\n    + `<circle cx=\"0\" cy=\"-2\" r=\"1.6\" fill=\"${c.sheep}\"/>`\n    + `<circle cx=\"-1.2\" cy=\"-2.2\" r=\"1.3\" fill=\"${c.sheep}\"/>`\n    + `<circle cx=\"1.2\" cy=\"-2.2\" r=\"1.3\" fill=\"${c.sheep}\"/>`\n    + `<circle cx=\"-0.5\" cy=\"-3\" r=\"1.1\" fill=\"${c.sheep}\"/>`\n    + `<circle cx=\"0.6\" cy=\"-3\" r=\"1.1\" fill=\"${c.sheep}\"/>`\n    // Head with elliptical snout extending left\n    + `<circle cx=\"-2\" cy=\"-2.8\" r=\"0.9\" fill=\"${c.sheepHead}\"/>`\n    + `<ellipse cx=\"-2.8\" cy=\"-2.6\" rx=\"0.6\" ry=\"0.4\" fill=\"${c.sheepHead}\"/>`\n    // Ears (angled)\n    + `<ellipse cx=\"-1.5\" cy=\"-3.7\" rx=\"0.3\" ry=\"0.5\" fill=\"${c.sheepHead}\" transform=\"rotate(-20 -1.5 -3.7)\"/>`\n    + `<ellipse cx=\"-2.3\" cy=\"-3.6\" rx=\"0.3\" ry=\"0.5\" fill=\"${c.sheepHead}\" transform=\"rotate(15 -2.3 -3.6)\"/>`\n    // Eye\n    + `<circle cx=\"-2.1\" cy=\"-3\" r=\"0.15\" fill=\"#fff\"/>`\n    // 4 legs\n    + `<line x1=\"-1.2\" y1=\"-0.8\" x2=\"-1.2\" y2=\"0.3\" stroke=\"${c.sheepHead}\" stroke-width=\"0.35\"/>`\n    + `<line x1=\"-0.3\" y1=\"-0.6\" x2=\"-0.3\" y2=\"0.3\" stroke=\"${c.sheepHead}\" stroke-width=\"0.35\"/>`\n    + `<line x1=\"0.5\" y1=\"-0.6\" x2=\"0.5\" y2=\"0.3\" stroke=\"${c.sheepHead}\" stroke-width=\"0.35\"/>`\n    + `<line x1=\"1.2\" y1=\"-0.8\" x2=\"1.2\" y2=\"0.3\" stroke=\"${c.sheepHead}\" stroke-width=\"0.35\"/>`\n    + `</g>`;\n}\n\nfunction svgCow(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Right-facing variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1.8\" rx=\"2.5\" ry=\"1.5\" fill=\"${c.cow}\"/>`\n      + `<ellipse cx=\"-0.8\" cy=\"-2.2\" rx=\"0.8\" ry=\"0.6\" fill=\"${c.cowSpot}\"/>`\n      + `<ellipse cx=\"0.5\" cy=\"-1.3\" rx=\"0.6\" ry=\"0.5\" fill=\"${c.cowSpot}\"/>`\n      + `<circle cx=\"2.2\" cy=\"-2.5\" r=\"0.9\" fill=\"${c.cow}\"/>`\n      + `<circle cx=\"2.2\" cy=\"-2.3\" r=\"0.4\" fill=\"${c.cowSpot}\" opacity=\"0.5\"/>`\n      + `<line x1=\"2.8\" y1=\"-3.3\" x2=\"3.2\" y2=\"-3.8\" stroke=\"${c.fence}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"1.8\" y1=\"-3.3\" x2=\"1.4\" y2=\"-3.8\" stroke=\"${c.fence}\" stroke-width=\"0.3\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Grazing variant — head down\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1.8\" rx=\"2.5\" ry=\"1.5\" fill=\"${c.cow}\"/>`\n      + `<ellipse cx=\"0.8\" cy=\"-2.2\" rx=\"0.8\" ry=\"0.6\" fill=\"${c.cowSpot}\"/>`\n      + `<ellipse cx=\"-0.5\" cy=\"-1.3\" rx=\"0.6\" ry=\"0.5\" fill=\"${c.cowSpot}\"/>`\n      + `<circle cx=\"-2.3\" cy=\"-1.5\" r=\"0.8\" fill=\"${c.cow}\"/>`\n      + `<line x1=\"-2.8\" y1=\"-2.2\" x2=\"-3.1\" y2=\"-2.6\" stroke=\"${c.fence}\" stroke-width=\"0.25\"/>`\n      + `<line x1=\"-1.9\" y1=\"-2.2\" x2=\"-1.6\" y2=\"-2.6\" stroke=\"${c.fence}\" stroke-width=\"0.25\"/>`\n      + `</g>`;\n  }\n  // Redesigned: distinctive spots, proper head shape\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-1.8\" rx=\"2.5\" ry=\"1.5\" fill=\"${c.cow}\"/>`\n    // Spots\n    + `<ellipse cx=\"0.8\" cy=\"-2.2\" rx=\"0.8\" ry=\"0.6\" fill=\"${c.cowSpot}\"/>`\n    + `<ellipse cx=\"-0.5\" cy=\"-1.3\" rx=\"0.6\" ry=\"0.5\" fill=\"${c.cowSpot}\"/>`\n    // Head\n    + `<circle cx=\"-2.2\" cy=\"-2.5\" r=\"0.9\" fill=\"${c.cow}\"/>`\n    + `<circle cx=\"-2.2\" cy=\"-2.3\" r=\"0.4\" fill=\"${c.cowSpot}\" opacity=\"0.5\"/>`\n    // Horns\n    + `<line x1=\"-2.8\" y1=\"-3.3\" x2=\"-3.2\" y2=\"-3.8\" stroke=\"${c.fence}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"-1.8\" y1=\"-3.3\" x2=\"-1.4\" y2=\"-3.8\" stroke=\"${c.fence}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgChicken(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Standing upright variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1.2\" rx=\"1\" ry=\"1\" fill=\"${c.chicken}\"/>`\n      + `<circle cx=\"0\" cy=\"-2.2\" r=\"0.5\" fill=\"${c.chicken}\"/>`\n      + `<path d=\"M0,-2.7 Q0.2,-3.1 0.4,-2.7 Q0.6,-3 0.7,-2.6\" fill=\"${c.flag}\" stroke=\"none\"/>`\n      + `<polygon points=\"-0.5,-2.1 -0.9,-2 -0.5,-1.9\" fill=\"${c.wheat}\"/>`\n      + `<line x1=\"-0.3\" y1=\"-0.2\" x2=\"-0.5\" y2=\"0.3\" stroke=\"${c.wheat}\" stroke-width=\"0.25\"/>`\n      + `<line x1=\"0.3\" y1=\"-0.2\" x2=\"0.5\" y2=\"0.3\" stroke=\"${c.wheat}\" stroke-width=\"0.25\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With chicks variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1\" rx=\"1.2\" ry=\"0.9\" fill=\"${c.chicken}\"/>`\n      + `<circle cx=\"-1\" cy=\"-1.6\" r=\"0.6\" fill=\"${c.chicken}\"/>`\n      + `<path d=\"M-1,-2.2 Q-0.8,-2.8 -0.6,-2.2\" fill=\"${c.flag}\" stroke=\"none\"/>`\n      + `<polygon points=\"-1.5,-1.5 -2,-1.3 -1.5,-1.2\" fill=\"${c.wheat}\"/>`\n      + `<circle cx=\"2\" cy=\"-0.3\" r=\"0.3\" fill=\"${c.wheat}\"/>`\n      + `<circle cx=\"2.8\" cy=\"-0.4\" r=\"0.25\" fill=\"${c.wheat}\"/>`\n      + `</g>`;\n  }\n  // Redesigned: red comb is key identifier\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-1\" rx=\"1.2\" ry=\"0.9\" fill=\"${c.chicken}\"/>`\n    + `<circle cx=\"-1\" cy=\"-1.6\" r=\"0.6\" fill=\"${c.chicken}\"/>`\n    // Red comb (key identifier)\n    + `<path d=\"M-1,-2.2 Q-0.8,-2.8 -0.6,-2.2 Q-0.4,-2.7 -0.3,-2.1\" fill=\"${c.flag}\" stroke=\"none\"/>`\n    // Beak\n    + `<polygon points=\"-1.5,-1.5 -2,-1.3 -1.5,-1.2\" fill=\"${c.wheat}\"/>`\n    + `</g>`;\n}\n\nfunction svgHorse(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Walking variant — legs apart\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-2.2\" rx=\"2.5\" ry=\"1.3\" fill=\"${c.horse}\"/>`\n      + `<path d=\"M-2,-2.5 Q-2.5,-4 -2,-5\" stroke=\"${c.horse}\" fill=\"${c.horse}\" stroke-width=\"1\"/>`\n      + `<ellipse cx=\"-1.8\" cy=\"-5.2\" rx=\"1\" ry=\"0.5\" fill=\"${c.horse}\"/>`\n      + `<line x1=\"-1.2\" y1=\"-1\" x2=\"-1.8\" y2=\"0.3\" stroke=\"${c.horse}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0.8\" y1=\"-1\" x2=\"1.5\" y2=\"0.3\" stroke=\"${c.horse}\" stroke-width=\"0.4\"/>`\n      + `<path d=\"M2.5,-2.5 Q3.5,-3 3,-1.5\" stroke=\"${c.horse}\" fill=\"none\" stroke-width=\"0.4\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Rearing variant — front legs up\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-2.5\" rx=\"2.3\" ry=\"1.3\" fill=\"${c.horse}\" transform=\"rotate(-15)\"/>`\n      + `<path d=\"M-1.5,-3.5 Q-2,-5 -1.5,-6.5\" stroke=\"${c.horse}\" fill=\"${c.horse}\" stroke-width=\"1\"/>`\n      + `<ellipse cx=\"-1.3\" cy=\"-6.8\" rx=\"0.9\" ry=\"0.45\" fill=\"${c.horse}\"/>`\n      + `<line x1=\"-0.5\" y1=\"-1.5\" x2=\"-0.8\" y2=\"-0.2\" stroke=\"${c.horse}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"1.5\" y1=\"-1.5\" x2=\"1.5\" y2=\"0\" stroke=\"${c.horse}\" stroke-width=\"0.4\"/>`\n      + `<path d=\"M2,-3 Q3,-3.5 2.5,-2\" stroke=\"${c.horse}\" fill=\"none\" stroke-width=\"0.4\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-2.2\" rx=\"2.5\" ry=\"1.3\" fill=\"${c.horse}\"/>`\n    // Neck + head\n    + `<path d=\"M-2,-2.5 Q-2.5,-4 -2,-5\" stroke=\"${c.horse}\" fill=\"${c.horse}\" stroke-width=\"1\"/>`\n    + `<ellipse cx=\"-1.8\" cy=\"-5.2\" rx=\"1\" ry=\"0.5\" fill=\"${c.horse}\"/>`\n    // Legs\n    + `<line x1=\"-1\" y1=\"-1\" x2=\"-1\" y2=\"0\" stroke=\"${c.horse}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"1\" y1=\"-1\" x2=\"1\" y2=\"0\" stroke=\"${c.horse}\" stroke-width=\"0.4\"/>`\n    // Tail\n    + `<path d=\"M2.5,-2.5 Q3.5,-3 3,-1.5\" stroke=\"${c.horse}\" fill=\"none\" stroke-width=\"0.4\"/>`\n    + `</g>`;\n}\n\nfunction svgRicePaddy(x: number, y: number, c: AssetColors, v: number): string {\n  // Isometric parallelogram terrace with water fill and rice plant stubs\n  return `<g transform=\"translate(${x},${y})\">`\n    // Terrace edge (outer parallelogram)\n    + `<polygon points=\"-4,-1 0,-3 4,-1 0,1\" fill=\"${c.ricePaddy}\" stroke=\"${c.ricePaddy}\" stroke-width=\"0.3\"/>`\n    // Inner water fill\n    + `<polygon points=\"-3,-0.8 0,-2.4 3,-0.8 0,0.6\" fill=\"${c.ricePaddyWater}\" opacity=\"0.6\"/>`\n    // Reflection lines\n    + `<line x1=\"-1.5\" y1=\"-0.6\" x2=\"1.5\" y2=\"-1.8\" stroke=\"#fff\" stroke-width=\"0.2\" opacity=\"0.25\"/>`\n    + `<line x1=\"-1\" y1=\"0\" x2=\"2\" y2=\"-1.2\" stroke=\"#fff\" stroke-width=\"0.2\" opacity=\"0.2\"/>`\n    + `<line x1=\"-2\" y1=\"-0.3\" x2=\"1\" y2=\"-1.5\" stroke=\"#fff\" stroke-width=\"0.2\" opacity=\"0.15\"/>`\n    // Rice plant stubs along edges\n    + `<line x1=\"-2.5\" y1=\"-0.5\" x2=\"-2.5\" y2=\"-2\" stroke=\"${c.reeds}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"-0.8\" y1=\"-1.8\" x2=\"-0.8\" y2=\"-3.3\" stroke=\"${c.reeds}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"1\" y1=\"-1.5\" x2=\"1\" y2=\"-3\" stroke=\"${c.reeds}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"2.5\" y1=\"-0.5\" x2=\"2.5\" y2=\"-2\" stroke=\"${c.reeds}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\n// Village assets\n\nfunction svgTent(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"0,-6 -3.5,0 3.5,0\" fill=\"${c.tent}\"/>`\n    + `<polygon points=\"0,-6 -1.5,0 1.5,0\" fill=\"${c.tentStripe}\" opacity=\"0.6\"/>`\n    + `<line x1=\"0\" y1=\"-6\" x2=\"0\" y2=\"-7\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgHut(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Round hut variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"2\" ry=\"1.5\" fill=\"${c.hut}\"/>`\n      + `<polygon points=\"-2.2,-1.5 0,-5 2.2,-1.5\" fill=\"${c.roofB}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With porch variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-2\" y=\"-3\" width=\"4\" height=\"3\" fill=\"${c.hut}\"/>`\n      + `<polygon points=\"-2.5,-3 0,-5.5 2.5,-3\" fill=\"${c.roofB}\"/>`\n      + `<rect x=\"2.5\" y=\"-1.5\" width=\"2\" height=\"1.5\" fill=\"${c.hut}\" opacity=\"0.6\"/>`\n      + `<line x1=\"2.5\" y1=\"-1.5\" x2=\"4.5\" y2=\"-1.5\" stroke=\"${c.roofB}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"4.5\" y1=\"-1.5\" x2=\"4.5\" y2=\"0\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2\" y=\"-3\" width=\"4\" height=\"3\" fill=\"${c.hut}\"/>`\n    + `<polygon points=\"-2.5,-3 0,-5.5 2.5,-3\" fill=\"${c.roofB}\"/>`\n    + `</g>`;\n}\n\nfunction svgHouse(x: number, y: number, c: AssetColors, v: number, roofColor?: string): string {\n  // v=1: blue roof, v=2: green roof+garden\n  const roofOptions = [roofColor || c.roofA, '#4477aa', '#448844'];\n  const roof = roofOptions[v] || roofOptions[0];\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-2.5,0 0,1.2 2.5,0 2.5,-3 0,-1.8 -2.5,-3\" fill=\"${c.wall}\"/>`\n    + `<polygon points=\"-2.5,0 0,1.2 0,-1.8 -2.5,-3\" fill=\"${c.wallShade}\"/>`\n    + `<polygon points=\"0,-6 -3.2,-2.8 0,-1.5 3.2,-2.8\" fill=\"${roof}\"/>`\n    + `<rect x=\"1\" y=\"-6.5\" width=\"1\" height=\"2\" fill=\"${c.chimney}\"/>`\n    + `</g>`;\n}\n\nfunction svgHouseB(x: number, y: number, c: AssetColors, v: number): string {\n  return svgHouse(x, y, c, v, c.roofB);\n}\n\nfunction svgChurch(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Bell tower variant — wider tower with bell\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<polygon points=\"-2,0 0,1 2,0 2,-5 0,-4 -2,-5\" fill=\"${c.church}\"/>`\n      + `<polygon points=\"-2,0 0,1 0,-4 -2,-5\" fill=\"${c.wallShade}\"/>`\n      + `<rect x=\"-1\" y=\"-8.5\" width=\"2\" height=\"3.5\" fill=\"${c.church}\"/>`\n      + `<polygon points=\"-1.3,-8.5 0,-10.5 1.3,-8.5\" fill=\"${c.roofA}\"/>`\n      + `<circle cx=\"0\" cy=\"-7\" r=\"0.4\" fill=\"${c.blacksmith}\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Small chapel variant — compact, no tower\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-1.5\" y=\"-3\" width=\"3\" height=\"3\" fill=\"${c.church}\"/>`\n      + `<polygon points=\"-2,-3 0,-5 2,-3\" fill=\"${c.roofA}\"/>`\n      + `<line x1=\"0\" y1=\"-5.5\" x2=\"0\" y2=\"-5\" stroke=\"${c.wall}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"-0.5\" y1=\"-5.2\" x2=\"0.5\" y2=\"-5.2\" stroke=\"${c.wall}\" stroke-width=\"0.4\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-2,0 0,1 2,0 2,-5 0,-4 -2,-5\" fill=\"${c.church}\"/>`\n    + `<polygon points=\"-2,0 0,1 0,-4 -2,-5\" fill=\"${c.wallShade}\"/>`\n    + `<polygon points=\"0,-10 -2.5,-5 0,-3.8 2.5,-5\" fill=\"${c.roofA}\"/>`\n    + `<line x1=\"0\" y1=\"-12\" x2=\"0\" y2=\"-10\" stroke=\"${c.wall}\" stroke-width=\"0.5\"/>`\n    + `<line x1=\"-1\" y1=\"-11\" x2=\"1\" y2=\"-11\" stroke=\"${c.wall}\" stroke-width=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgWindmill(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-1.5,0 1.5,0 1,-7 -1,-7\" fill=\"${c.windmill}\"/>`\n    // Animated blades via SMIL\n    + `<g>`\n    + `<line x1=\"0\" y1=\"-11\" x2=\"0\" y2=\"-3\" stroke=\"${c.windBlade}\" stroke-width=\"0.5\"/>`\n    + `<line x1=\"-4\" y1=\"-7\" x2=\"4\" y2=\"-7\" stroke=\"${c.windBlade}\" stroke-width=\"0.5\"/>`\n    + `<animateTransform attributeName=\"transform\" type=\"rotate\" from=\"0 0 -7\" to=\"360 0 -7\" dur=\"8s\" repeatCount=\"indefinite\"/>`\n    + `</g>`\n    + `<circle cx=\"0\" cy=\"-7\" r=\"0.7\" fill=\"${c.roofA}\"/>`\n    + `</g>`;\n}\n\nfunction svgWell(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"2\" ry=\"1\" fill=\"${c.well}\" stroke=\"${c.fence}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"-1.5\" y1=\"-0.5\" x2=\"-1.5\" y2=\"-4\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"1.5\" y1=\"-0.5\" x2=\"1.5\" y2=\"-4\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `<polygon points=\"0,-5.5 -2.2,-3.8 2.2,-3.8\" fill=\"${c.roofB}\"/>`\n    + `</g>`;\n}\n\n// Town assets\n\nfunction svgMarket(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // With cart variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-3\" y=\"-3\" width=\"6\" height=\"3\" fill=\"${c.market}\"/>`\n      + `<polygon points=\"-3.5,-3 0,-5 3.5,-3\" fill=\"${c.marketAwning}\"/>`\n      + `<rect x=\"-2\" y=\"-1.5\" width=\"1\" height=\"0.8\" fill=\"${c.barrel}\" rx=\"0.2\"/>`\n      + `<rect x=\"4\" y=\"-1.5\" width=\"2.5\" height=\"1.2\" fill=\"${c.cart}\"/>`\n      + `<circle cx=\"4.5\" cy=\"0\" r=\"0.5\" fill=\"${c.trunk}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Open stall variant — no back wall, posts only\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"-3\" y1=\"0\" x2=\"-3\" y2=\"-4\" stroke=\"${c.trunk}\" stroke-width=\"0.5\"/>`\n      + `<line x1=\"3\" y1=\"0\" x2=\"3\" y2=\"-4\" stroke=\"${c.trunk}\" stroke-width=\"0.5\"/>`\n      + `<polygon points=\"-3.5,-4 0,-5.5 3.5,-4\" fill=\"${c.marketAwning}\"/>`\n      + `<rect x=\"-2.5\" y=\"-1\" width=\"5\" height=\"0.8\" fill=\"${c.trunk}\" opacity=\"0.4\"/>`\n      + `<rect x=\"-2\" y=\"-1.5\" width=\"1\" height=\"0.8\" fill=\"${c.barrel}\" rx=\"0.2\"/>`\n      + `<rect x=\"0.5\" y=\"-1.5\" width=\"1\" height=\"0.8\" fill=\"${c.wheat}\" rx=\"0.2\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-3\" y=\"-3\" width=\"6\" height=\"3\" fill=\"${c.market}\"/>`\n    + `<polygon points=\"-3.5,-3 0,-5 3.5,-3\" fill=\"${c.marketAwning}\"/>`\n    // Goods display\n    + `<rect x=\"-2\" y=\"-1.5\" width=\"1\" height=\"0.8\" fill=\"${c.barrel}\" rx=\"0.2\"/>`\n    + `<rect x=\"0.5\" y=\"-1.5\" width=\"1\" height=\"0.8\" fill=\"${c.wheat}\" rx=\"0.2\"/>`\n    + `</g>`;\n}\n\nfunction svgInn(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // With dormer variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<polygon points=\"-3,0 0,1.5 3,0 3,-4 0,-2.5 -3,-4\" fill=\"${c.inn}\"/>`\n      + `<polygon points=\"-3,0 0,1.5 0,-2.5 -3,-4\" fill=\"${c.wallShade}\"/>`\n      + `<polygon points=\"0,-7 -3.5,-3.8 0,-2.2 3.5,-3.8\" fill=\"${c.roofB}\"/>`\n      + `<rect x=\"-1\" y=\"-5.5\" width=\"1.5\" height=\"1.5\" fill=\"${c.wall}\"/>`\n      + `<polygon points=\"-1,-5.5 -0.25,-6.5 0.5,-5.5\" fill=\"${c.roofB}\"/>`\n      + `<rect x=\"3\" y=\"-5\" width=\"2\" height=\"1.5\" fill=\"${c.innSign}\" rx=\"0.3\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Outdoor seating variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<polygon points=\"-3,0 0,1.5 3,0 3,-4 0,-2.5 -3,-4\" fill=\"${c.inn}\"/>`\n      + `<polygon points=\"-3,0 0,1.5 0,-2.5 -3,-4\" fill=\"${c.wallShade}\"/>`\n      + `<polygon points=\"0,-7 -3.5,-3.8 0,-2.2 3.5,-3.8\" fill=\"${c.roofB}\"/>`\n      + `<rect x=\"3\" y=\"-5\" width=\"2\" height=\"1.5\" fill=\"${c.innSign}\" rx=\"0.3\"/>`\n      + `<rect x=\"3.5\" y=\"-1.5\" width=\"2\" height=\"0.5\" fill=\"${c.trunk}\" opacity=\"0.6\"/>`\n      + `<rect x=\"4\" y=\"-1\" width=\"0.5\" height=\"1\" fill=\"${c.trunk}\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-3,0 0,1.5 3,0 3,-4 0,-2.5 -3,-4\" fill=\"${c.inn}\"/>`\n    + `<polygon points=\"-3,0 0,1.5 0,-2.5 -3,-4\" fill=\"${c.wallShade}\"/>`\n    + `<polygon points=\"0,-7 -3.5,-3.8 0,-2.2 3.5,-3.8\" fill=\"${c.roofB}\"/>`\n    // Sign\n    + `<rect x=\"3\" y=\"-5\" width=\"2\" height=\"1.5\" fill=\"${c.innSign}\" rx=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgBlacksmith(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2.5\" y=\"-3\" width=\"5\" height=\"3\" fill=\"${c.blacksmith}\"/>`\n    + `<polygon points=\"-3,-3 0,-5 3,-3\" fill=\"${c.roofA}\"/>`\n    // Anvil\n    + `<polygon points=\"-1,-0.5 1,-0.5 1.5,-1.5 -1.5,-1.5\" fill=\"${c.anvil}\"/>`\n    // Smoke from forge\n    + `<circle cx=\"1.5\" cy=\"-5.5\" r=\"0.8\" fill=\"${c.smoke}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgCastle(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    // Main body\n    + `<rect x=\"-3\" y=\"-6\" width=\"6\" height=\"6\" fill=\"${c.castle}\"/>`\n    // Battlements\n    + `<rect x=\"-3\" y=\"-7\" width=\"1.5\" height=\"1.2\" fill=\"${c.castle}\"/>`\n    + `<rect x=\"-0.75\" y=\"-7\" width=\"1.5\" height=\"1.2\" fill=\"${c.castle}\"/>`\n    + `<rect x=\"1.5\" y=\"-7\" width=\"1.5\" height=\"1.2\" fill=\"${c.castle}\"/>`\n    // Tower\n    + `<rect x=\"-1\" y=\"-10\" width=\"2\" height=\"3.5\" fill=\"${c.tower}\"/>`\n    + `<polygon points=\"-1.3,-10 0,-12 1.3,-10\" fill=\"${c.castleRoof}\"/>`\n    // Gate\n    + `<rect x=\"-0.8\" y=\"-2\" width=\"1.6\" height=\"2\" fill=\"${c.blacksmith}\" rx=\"0.8\" ry=\"0\"/>`\n    + `</g>`;\n}\n\nfunction svgTower(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-1.5\" y=\"-8\" width=\"3\" height=\"8\" fill=\"${c.tower}\"/>`\n    + `<polygon points=\"-2,-8 0,-11 2,-8\" fill=\"${c.castleRoof}\"/>`\n    // Window\n    + `<rect x=\"-0.5\" y=\"-6\" width=\"1\" height=\"1.2\" fill=\"${c.blacksmith}\" rx=\"0.5\" ry=\"0\"/>`\n    + `</g>`;\n}\n\nfunction svgBridge(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<path d=\"M-4,0 Q0,-2 4,0\" fill=\"${c.bridge}\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"-3\" y1=\"-0.8\" x2=\"-3\" y2=\"-2.5\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"3\" y1=\"-0.8\" x2=\"3\" y2=\"-2.5\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"-3\" y1=\"-2.5\" x2=\"3\" y2=\"-2.5\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\n// Cross-level decoration assets\n\nfunction svgCart(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2\" y=\"-2\" width=\"3.5\" height=\"2\" fill=\"${c.cart}\"/>`\n    + `<circle cx=\"-1.5\" cy=\"0\" r=\"0.8\" fill=\"${c.trunk}\" stroke=\"${c.fence}\" stroke-width=\"0.2\"/>`\n    + `<circle cx=\"1\" cy=\"0\" r=\"0.8\" fill=\"${c.trunk}\" stroke=\"${c.fence}\" stroke-width=\"0.2\"/>`\n    + `<line x1=\"2\" y1=\"-1\" x2=\"3.5\" y2=\"-0.5\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `</g>`;\n}\n\nfunction svgBarrel(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.3\" rx=\"1.2\" ry=\"0.5\" fill=\"${c.barrel}\"/>`\n    + `<rect x=\"-1.2\" y=\"-2.5\" width=\"2.4\" height=\"2.2\" fill=\"${c.barrel}\" rx=\"0.3\"/>`\n    + `<ellipse cx=\"0\" cy=\"-2.5\" rx=\"1.2\" ry=\"0.5\" fill=\"${c.cart}\"/>`\n    + `</g>`;\n}\n\nfunction svgTorch(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Ground stake variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-3\" stroke=\"${c.torch}\" stroke-width=\"0.4\"/>`\n      + `<ellipse cx=\"0\" cy=\"-3.5\" rx=\"0.6\" ry=\"0.8\" fill=\"${c.torchFlame}\" opacity=\"0.8\"/>`\n      + `<ellipse cx=\"0\" cy=\"-3.7\" rx=\"0.3\" ry=\"0.5\" fill=\"#ffdd44\" opacity=\"0.9\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Streetlamp variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-5\" stroke=\"${c.torch}\" stroke-width=\"0.4\"/>`\n      + `<path d=\"M0,-5 Q1,-5.5 1,-5\" stroke=\"${c.torch}\" fill=\"none\" stroke-width=\"0.3\"/>`\n      + `<rect x=\"0.5\" y=\"-6\" width=\"1\" height=\"0.8\" fill=\"${c.lantern}\"/>`\n      + `<rect x=\"0.65\" y=\"-5.8\" width=\"0.7\" height=\"0.4\" fill=\"${c.lanternGlow}\" opacity=\"0.8\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-4\" stroke=\"${c.torch}\" stroke-width=\"0.5\"/>`\n    + `<ellipse cx=\"0\" cy=\"-4.5\" rx=\"0.8\" ry=\"1\" fill=\"${c.torchFlame}\" opacity=\"0.8\"/>`\n    + `<ellipse cx=\"0\" cy=\"-4.8\" rx=\"0.4\" ry=\"0.6\" fill=\"#ffdd44\" opacity=\"0.9\"/>`\n    + `</g>`;\n}\n\nfunction svgFlag(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Blue pennant variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-8\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n      + `<polygon points=\"0,-8 2.5,-6.5 0,-5\" fill=\"#4477bb\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Banner variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-8\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"-8\" x2=\"2.5\" y2=\"-8\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n      + `<rect x=\"0\" y=\"-8\" width=\"2.5\" height=\"3\" fill=\"${c.flag}\" opacity=\"0.9\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-8\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `<polygon points=\"0,-8 3.5,-7 0,-5.5\" fill=\"${c.flag}\"/>`\n    + `</g>`;\n}\n\nfunction svgCobblePath(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Lined variant — neat row\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"-2\" cy=\"-0.3\" rx=\"0.8\" ry=\"0.35\" fill=\"${c.cobble}\" opacity=\"0.6\"/>`\n      + `<ellipse cx=\"-0.5\" cy=\"-0.3\" rx=\"0.7\" ry=\"0.3\" fill=\"${c.cobble}\" opacity=\"0.55\"/>`\n      + `<ellipse cx=\"1\" cy=\"-0.3\" rx=\"0.8\" ry=\"0.35\" fill=\"${c.cobble}\" opacity=\"0.5\"/>`\n      + `<ellipse cx=\"2.5\" cy=\"-0.3\" rx=\"0.7\" ry=\"0.3\" fill=\"${c.cobble}\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Crossroads variant — X pattern\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-0.3\" rx=\"0.8\" ry=\"0.35\" fill=\"${c.cobble}\" opacity=\"0.6\"/>`\n      + `<ellipse cx=\"-1.5\" cy=\"-0.8\" rx=\"0.7\" ry=\"0.3\" fill=\"${c.cobble}\" opacity=\"0.5\"/>`\n      + `<ellipse cx=\"1.5\" cy=\"-0.8\" rx=\"0.7\" ry=\"0.3\" fill=\"${c.cobble}\" opacity=\"0.5\"/>`\n      + `<ellipse cx=\"-1.5\" cy=\"0.2\" rx=\"0.7\" ry=\"0.3\" fill=\"${c.cobble}\" opacity=\"0.5\"/>`\n      + `<ellipse cx=\"1.5\" cy=\"0.2\" rx=\"0.7\" ry=\"0.3\" fill=\"${c.cobble}\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"-1\" cy=\"-0.3\" rx=\"1\" ry=\"0.4\" fill=\"${c.cobble}\" opacity=\"0.6\"/>`\n    + `<ellipse cx=\"1\" cy=\"0\" rx=\"0.8\" ry=\"0.35\" fill=\"${c.cobble}\" opacity=\"0.5\"/>`\n    + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"0.7\" ry=\"0.3\" fill=\"${c.cobble}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgSmoke(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<circle cx=\"0\" cy=\"-5\" r=\"1\" fill=\"${c.smoke}\">`\n    + `<animate attributeName=\"cy\" values=\"-5;-8;-5\" dur=\"4s\" repeatCount=\"indefinite\"/>`\n    + `<animate attributeName=\"opacity\" values=\"0.5;0.1;0.5\" dur=\"4s\" repeatCount=\"indefinite\"/>`\n    + `</circle>`\n    + `<circle cx=\"0.5\" cy=\"-6\" r=\"0.7\" fill=\"${c.smoke}\">`\n    + `<animate attributeName=\"cy\" values=\"-6;-9;-6\" dur=\"3.5s\" repeatCount=\"indefinite\"/>`\n    + `<animate attributeName=\"opacity\" values=\"0.4;0.08;0.4\" dur=\"3.5s\" repeatCount=\"indefinite\"/>`\n    + `</circle>`\n    + `</g>`;\n}\n\n// Biome blend assets\n\nfunction svgReeds(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"-1\" y1=\"0\" x2=\"-1.3\" y2=\"-4\" stroke=\"${c.reeds}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0.2\" y2=\"-4.5\" stroke=\"${c.reeds}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"1\" y1=\"0\" x2=\"0.8\" y2=\"-3.8\" stroke=\"${c.reeds}\" stroke-width=\"0.4\"/>`\n    + `<ellipse cx=\"-1.3\" cy=\"-4.3\" rx=\"0.3\" ry=\"0.8\" fill=\"${c.trunk}\"/>`\n    + `<ellipse cx=\"0.2\" cy=\"-4.8\" rx=\"0.3\" ry=\"0.8\" fill=\"${c.trunk}\"/>`\n    + `</g>`;\n}\n\nfunction svgFountain(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"2.5\" ry=\"1\" fill=\"${c.fountain}\" stroke=\"${c.boulder}\" stroke-width=\"0.3\"/>`\n    + `<ellipse cx=\"0\" cy=\"-0.3\" rx=\"2\" ry=\"0.7\" fill=\"${c.fountainWater}\" opacity=\"0.6\"/>`\n    + `<rect x=\"-0.4\" y=\"-3\" width=\"0.8\" height=\"2.5\" fill=\"${c.fountain}\"/>`\n    + `<line x1=\"0\" y1=\"-3\" x2=\"0\" y2=\"-4.5\" stroke=\"${c.fountainWater}\" stroke-width=\"0.4\" opacity=\"0.7\">`\n    + `<animate attributeName=\"y2\" values=\"-4.5;-5.2;-4.5\" dur=\"2s\" repeatCount=\"indefinite\"/>`\n    + `</line>`\n    + `<circle cx=\"-0.5\" cy=\"-3.5\" r=\"0.3\" fill=\"${c.fountainWater}\" opacity=\"0.4\"/>`\n    + `<circle cx=\"0.5\" cy=\"-3.8\" r=\"0.3\" fill=\"${c.fountainWater}\" opacity=\"0.4\"/>`\n    + `</g>`;\n}\n\nfunction svgCanal(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-3\" y=\"-1\" width=\"6\" height=\"1\" fill=\"${c.canal}\"/>`\n    + `<rect x=\"-2.5\" y=\"-0.7\" width=\"5\" height=\"0.5\" fill=\"${c.fountainWater}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgWatermill(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2\" y=\"-4\" width=\"4\" height=\"4\" fill=\"${c.wall}\"/>`\n    + `<polygon points=\"-2.5,-4 0,-6 2.5,-4\" fill=\"${c.roofB}\"/>`\n    + `<g>`\n    + `<circle cx=\"3\" cy=\"-2\" r=\"2\" fill=\"none\" stroke=\"${c.trunk}\" stroke-width=\"0.5\"/>`\n    + `<line x1=\"3\" y1=\"-4\" x2=\"3\" y2=\"0\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"1\" y1=\"-2\" x2=\"5\" y2=\"-2\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n    + `<animateTransform attributeName=\"transform\" type=\"rotate\" from=\"0 3 -2\" to=\"360 3 -2\" dur=\"6s\" repeatCount=\"indefinite\"/>`\n    + `</g>`\n    + `</g>`;\n}\n\nfunction svgGardenTree(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Cone topiary variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-2.5\" stroke=\"${c.trunk}\" stroke-width=\"0.5\"/>`\n      + `<polygon points=\"0,-7 -1.5,-2.5 1.5,-2.5\" fill=\"${c.gardenTree}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Flowering pink variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-2.5\" stroke=\"${c.trunk}\" stroke-width=\"0.5\"/>`\n      + `<circle cx=\"0\" cy=\"-4\" r=\"2\" fill=\"${c.gardenTree}\"/>`\n      + `<circle cx=\"-0.8\" cy=\"-4.5\" r=\"0.4\" fill=\"${c.flower}\" opacity=\"0.8\"/>`\n      + `<circle cx=\"0.5\" cy=\"-3.5\" r=\"0.35\" fill=\"${c.flower}\" opacity=\"0.7\"/>`\n      + `<circle cx=\"0.8\" cy=\"-4.8\" r=\"0.3\" fill=\"${c.flower}\" opacity=\"0.6\"/>`\n      + `<circle cx=\"-0.3\" cy=\"-3.2\" r=\"0.3\" fill=\"${c.flower}\" opacity=\"0.7\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-2.5\" stroke=\"${c.trunk}\" stroke-width=\"0.5\"/>`\n    + `<circle cx=\"0\" cy=\"-4\" r=\"2\" fill=\"${c.gardenTree}\"/>`\n    + `<circle cx=\"-0.8\" cy=\"-3.5\" r=\"1.2\" fill=\"${c.leaf}\" opacity=\"0.6\"/>`\n    + `</g>`;\n}\n\nfunction svgPondLily(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.3\" rx=\"1.5\" ry=\"0.6\" fill=\"${c.pine}\" opacity=\"0.7\"/>`\n    + `<circle cx=\"0.3\" cy=\"-0.5\" r=\"0.4\" fill=\"${c.flower}\"/>`\n    + `</g>`;\n}\n\n// ── New Water Assets ────────────────────────────────────────\n\nfunction svgKelp(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<path d=\"M0,0 Q-1,-2 0,-4 Q1,-6 0,-7\" stroke=\"${c.fern}\" fill=\"none\" stroke-width=\"0.6\" opacity=\"0.7\"/>`\n    + `<path d=\"M1,0 Q2,-1.5 1,-3.5 Q0,-5 1,-6\" stroke=\"${c.fern}\" fill=\"none\" stroke-width=\"0.5\" opacity=\"0.6\"/>`\n    + `</g>`;\n}\n\nfunction svgCoral(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<path d=\"M0,0 Q-1,-2 -2,-3 M0,0 Q0,-2.5 -0.5,-4 M0,0 Q1,-2 2,-3\" stroke=\"${c.coral}\" fill=\"none\" stroke-width=\"0.8\"/>`\n    + `<circle cx=\"-2\" cy=\"-3\" r=\"0.5\" fill=\"${c.coral}\"/>`\n    + `<circle cx=\"-0.5\" cy=\"-4\" r=\"0.5\" fill=\"${c.coral}\"/>`\n    + `<circle cx=\"2\" cy=\"-3\" r=\"0.5\" fill=\"${c.coral}\"/>`\n    + `</g>`;\n}\n\nfunction svgJellyfish(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-2\" rx=\"2\" ry=\"1.5\" fill=\"${c.jellyfish}\" opacity=\"0.7\">`\n    + `<animate attributeName=\"cy\" values=\"-2;-3;-2\" dur=\"3s\" repeatCount=\"indefinite\"/>`\n    + `</ellipse>`\n    + `<path d=\"M-1.5,-0.5 Q-1.2,-1.5 -0.8,0\" stroke=\"${c.jellyfish}\" fill=\"none\" stroke-width=\"0.3\" opacity=\"0.5\"/>`\n    + `<path d=\"M-0.3,-0.5 Q0,-1.5 0.3,0\" stroke=\"${c.jellyfish}\" fill=\"none\" stroke-width=\"0.3\" opacity=\"0.5\"/>`\n    + `<path d=\"M0.8,-0.5 Q1.2,-1.5 1.5,0\" stroke=\"${c.jellyfish}\" fill=\"none\" stroke-width=\"0.3\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgTurtle(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<g>`\n    + `<ellipse cx=\"0\" cy=\"-1\" rx=\"2\" ry=\"1.2\" fill=\"${c.turtle}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-1.3\" rx=\"1.5\" ry=\"0.8\" fill=\"${c.moss}\" opacity=\"0.5\"/>`\n    + `<circle cx=\"-2\" cy=\"-1.2\" r=\"0.5\" fill=\"${c.turtle}\"/>`\n    + `<circle cx=\"-2.3\" cy=\"-1.3\" r=\"0.12\" fill=\"#222\"/>`\n    + `<animateTransform attributeName=\"transform\" type=\"translate\" values=\"0,0;3,0;0,0\" dur=\"8s\" repeatCount=\"indefinite\"/>`\n    + `</g>`\n    + `</g>`;\n}\n\nfunction svgBuoy(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.3\" rx=\"1.2\" ry=\"0.5\" fill=\"${c.waterLight}\" opacity=\"0.3\"/>`\n    + `<rect x=\"-0.6\" y=\"-2.5\" width=\"1.2\" height=\"2.2\" fill=\"${c.buoy}\" rx=\"0.3\"/>`\n    + `<rect x=\"-0.6\" y=\"-1.8\" width=\"1.2\" height=\"0.5\" fill=\"#fff\"/>`\n    + `<line x1=\"0\" y1=\"-2.5\" x2=\"0\" y2=\"-3.5\" stroke=\"${c.buoy}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgSailboat(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-3.5,0 -2.5,-1.5 3.5,-1.5 4,0\" fill=\"${c.boat}\"/>`\n    + `<line x1=\"0\" y1=\"-1.5\" x2=\"0\" y2=\"-7\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `<polygon points=\"0,-6.5 0,-2 3,-2.5\" fill=\"${c.sail}\" opacity=\"0.9\"/>`\n    + `<polygon points=\"0,-6 0,-2.5 -2,-3\" fill=\"${c.sail}\" opacity=\"0.7\"/>`\n    + `</g>`;\n}\n\nfunction svgLighthouse(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-1.5,0 1.5,0 1,-8 -1,-8\" fill=\"${c.lighthouse}\"/>`\n    + `<rect x=\"-1.5\" y=\"-1\" width=\"3\" height=\"1\" fill=\"${c.rock}\"/>`\n    + `<rect x=\"-0.8\" y=\"-9\" width=\"1.6\" height=\"1.2\" fill=\"${c.lighthouse}\" stroke=\"${c.rock}\" stroke-width=\"0.2\"/>`\n    + `<polygon points=\"-1,-9 0,-10.5 1,-9\" fill=\"${c.buoy}\"/>`\n    + `<circle cx=\"0\" cy=\"-8.4\" r=\"0.4\" fill=\"${c.lanternGlow}\" opacity=\"0.8\"/>`\n    + `</g>`;\n}\n\nfunction svgCrab(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"1.5\" ry=\"1\" fill=\"${c.crab}\"/>`\n    + `<path d=\"M-1.5,-0.8 L-2.5,-1.8 L-2.8,-1.2\" stroke=\"${c.crab}\" fill=\"none\" stroke-width=\"0.4\"/>`\n    + `<path d=\"M1.5,-0.8 L2.5,-1.8 L2.8,-1.2\" stroke=\"${c.crab}\" fill=\"none\" stroke-width=\"0.4\"/>`\n    + `<circle cx=\"-0.5\" cy=\"-1.2\" r=\"0.15\" fill=\"#222\"/>`\n    + `<circle cx=\"0.5\" cy=\"-1.2\" r=\"0.15\" fill=\"#222\"/>`\n    + `</g>`;\n}\n\n// ── New Shore/Wetland Assets ────────────────────────────────\n\nfunction svgDriftwood(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<path d=\"M-3,-0.3 Q-1,-1 1,-0.5 Q2.5,-0.2 3.5,0\" stroke=\"${c.driftwood}\" fill=\"none\" stroke-width=\"0.8\" stroke-linecap=\"round\"/>`\n    + `<path d=\"M1,-0.5 Q1.5,-1.5 2,-1.8\" stroke=\"${c.driftwood}\" fill=\"none\" stroke-width=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgSandcastle(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2\" y=\"-2\" width=\"4\" height=\"2\" fill=\"${c.sandcastle}\"/>`\n    + `<rect x=\"-1\" y=\"-3.5\" width=\"2\" height=\"1.8\" fill=\"${c.sandcastle}\"/>`\n    + `<rect x=\"-0.3\" y=\"-4.5\" width=\"0.6\" height=\"1.2\" fill=\"${c.sandcastle}\"/>`\n    + `<line x1=\"0\" y1=\"-4.5\" x2=\"0.8\" y2=\"-4.5\" stroke=\"${c.buoy}\" stroke-width=\"0.2\"/>`\n    + `</g>`;\n}\n\nfunction svgTidePools(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"-1\" cy=\"-0.3\" rx=\"1.5\" ry=\"0.6\" fill=\"${c.tidePools}\" opacity=\"0.5\"/>`\n    + `<ellipse cx=\"1.2\" cy=\"-0.5\" rx=\"1\" ry=\"0.4\" fill=\"${c.tidePools}\" opacity=\"0.4\"/>`\n    + `<circle cx=\"-1.5\" cy=\"-0.5\" r=\"0.25\" fill=\"${c.rock}\"/>`\n    + `<circle cx=\"0.8\" cy=\"-0.3\" r=\"0.2\" fill=\"${c.rock}\"/>`\n    + `</g>`;\n}\n\nfunction svgHeron(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-3\" stroke=\"${c.heron}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"0.5\" y1=\"0\" x2=\"0.5\" y2=\"-3\" stroke=\"${c.heron}\" stroke-width=\"0.3\"/>`\n    + `<ellipse cx=\"0.3\" cy=\"-4\" rx=\"1\" ry=\"1.5\" fill=\"${c.heron}\"/>`\n    + `<circle cx=\"-0.2\" cy=\"-5.5\" r=\"0.6\" fill=\"${c.heron}\"/>`\n    + `<line x1=\"-0.8\" y1=\"-5.4\" x2=\"-1.8\" y2=\"-5.2\" stroke=\"${c.wheat}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgShellfish(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"-1\" cy=\"-0.3\" rx=\"0.8\" ry=\"0.5\" fill=\"${c.shellfish}\"/>`\n    + `<ellipse cx=\"0.5\" cy=\"-0.2\" rx=\"0.6\" ry=\"0.4\" fill=\"${c.shellfish}\" opacity=\"0.8\"/>`\n    + `<ellipse cx=\"1.5\" cy=\"-0.5\" rx=\"0.7\" ry=\"0.45\" fill=\"${c.shellfish}\" opacity=\"0.7\"/>`\n    + `</g>`;\n}\n\nfunction svgCattail(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\" class=\"sway-gentle\">`\n    + `<line x1=\"-0.5\" y1=\"0\" x2=\"-0.7\" y2=\"-4.5\" stroke=\"${c.cattail}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"0.5\" y1=\"0\" x2=\"0.3\" y2=\"-5\" stroke=\"${c.cattail}\" stroke-width=\"0.3\"/>`\n    + `<ellipse cx=\"-0.7\" cy=\"-5\" rx=\"0.3\" ry=\"0.9\" fill=\"${c.trunk}\"/>`\n    + `<ellipse cx=\"0.3\" cy=\"-5.5\" rx=\"0.3\" ry=\"0.9\" fill=\"${c.trunk}\"/>`\n    + `</g>`;\n}\n\nfunction svgFrog(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"1\" ry=\"0.7\" fill=\"${c.frog}\"/>`\n    + `<circle cx=\"-0.5\" cy=\"-1.1\" r=\"0.3\" fill=\"${c.frog}\"/>`\n    + `<circle cx=\"0.5\" cy=\"-1.1\" r=\"0.3\" fill=\"${c.frog}\"/>`\n    + `<circle cx=\"-0.5\" cy=\"-1.2\" r=\"0.12\" fill=\"#222\"/>`\n    + `<circle cx=\"0.5\" cy=\"-1.2\" r=\"0.12\" fill=\"#222\"/>`\n    + `</g>`;\n}\n\nfunction svgLily(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.2\" rx=\"1.8\" ry=\"0.7\" fill=\"${c.pine}\" opacity=\"0.6\"/>`\n    + `<path d=\"M0,-0.4 Q-0.3,-1.2 0,-1 Q0.3,-1.2 0,-0.4\" fill=\"${c.lily}\" opacity=\"0.9\"/>`\n    + `<circle cx=\"0\" cy=\"-0.7\" r=\"0.2\" fill=\"${c.flowerCenter}\"/>`\n    + `</g>`;\n}\n\n// ── New Grassland Assets ────────────────────────────────────\n\nfunction svgRabbit(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Hopping variant — legs extended\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1\" rx=\"1\" ry=\"0.7\" fill=\"${c.rabbit}\"/>`\n      + `<circle cx=\"-0.8\" cy=\"-1.6\" r=\"0.45\" fill=\"${c.rabbit}\"/>`\n      + `<ellipse cx=\"-1\" cy=\"-2.3\" rx=\"0.18\" ry=\"0.5\" fill=\"${c.rabbit}\"/>`\n      + `<ellipse cx=\"-0.6\" cy=\"-2.3\" rx=\"0.18\" ry=\"0.5\" fill=\"${c.rabbit}\"/>`\n      + `<circle cx=\"-1\" cy=\"-1.7\" r=\"0.1\" fill=\"#222\"/>`\n      + `<line x1=\"0.8\" y1=\"-0.5\" x2=\"1.5\" y2=\"0.2\" stroke=\"${c.rabbit}\" stroke-width=\"0.3\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Pair variant — two rabbits\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"-0.5\" cy=\"-0.8\" rx=\"1\" ry=\"0.7\" fill=\"${c.rabbit}\"/>`\n      + `<circle cx=\"-1.3\" cy=\"-1.4\" r=\"0.4\" fill=\"${c.rabbit}\"/>`\n      + `<ellipse cx=\"-1.5\" cy=\"-2\" rx=\"0.15\" ry=\"0.45\" fill=\"${c.rabbit}\"/>`\n      + `<ellipse cx=\"-1.1\" cy=\"-2\" rx=\"0.15\" ry=\"0.45\" fill=\"${c.rabbit}\"/>`\n      + `<ellipse cx=\"1.5\" cy=\"-0.6\" rx=\"0.8\" ry=\"0.5\" fill=\"${c.rabbit}\" opacity=\"0.8\"/>`\n      + `<circle cx=\"0.9\" cy=\"-1\" r=\"0.3\" fill=\"${c.rabbit}\" opacity=\"0.8\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"1.2\" ry=\"0.8\" fill=\"${c.rabbit}\"/>`\n    + `<circle cx=\"-0.8\" cy=\"-1.5\" r=\"0.5\" fill=\"${c.rabbit}\"/>`\n    + `<ellipse cx=\"-1.1\" cy=\"-2.3\" rx=\"0.2\" ry=\"0.6\" fill=\"${c.rabbit}\"/>`\n    + `<ellipse cx=\"-0.6\" cy=\"-2.3\" rx=\"0.2\" ry=\"0.6\" fill=\"${c.rabbit}\"/>`\n    + `<circle cx=\"-1\" cy=\"-1.6\" r=\"0.1\" fill=\"#222\"/>`\n    + `</g>`;\n}\n\nfunction svgFox(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Curled up variant — sleeping\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"1.5\" ry=\"0.8\" fill=\"${c.fox}\"/>`\n      + `<circle cx=\"-1\" cy=\"-1.2\" r=\"0.5\" fill=\"${c.fox}\"/>`\n      + `<polygon points=\"-1.3,-1.7 -1.5,-2.1 -1,-1.8\" fill=\"${c.fox}\"/>`\n      + `<polygon points=\"-0.7,-1.7 -0.5,-2.1 -1,-1.8\" fill=\"${c.fox}\"/>`\n      + `<path d=\"M1.5,-0.5 Q1.2,-0.2 0.5,-0.5\" stroke=\"${c.fox}\" fill=\"none\" stroke-width=\"0.5\"/>`\n      + `<circle cx=\"0.5\" cy=\"-0.5\" r=\"0.25\" fill=\"#fff\" opacity=\"0.8\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Trotting variant — legs moving\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"1.8\" ry=\"0.9\" fill=\"${c.fox}\"/>`\n      + `<circle cx=\"-1.5\" cy=\"-2.3\" r=\"0.55\" fill=\"${c.fox}\"/>`\n      + `<polygon points=\"-1.8,-2.8 -2,-3.3 -1.5,-2.9\" fill=\"${c.fox}\"/>`\n      + `<polygon points=\"-1.2,-2.8 -1,-3.3 -1.5,-2.9\" fill=\"${c.fox}\"/>`\n      + `<circle cx=\"-1.7\" cy=\"-2.4\" r=\"0.1\" fill=\"#222\"/>`\n      + `<line x1=\"-0.8\" y1=\"-0.6\" x2=\"-1.3\" y2=\"0.3\" stroke=\"${c.fox}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"0.8\" y1=\"-0.6\" x2=\"1.3\" y2=\"0.3\" stroke=\"${c.fox}\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M1.8,-1.3 Q2.5,-1.5 3,-1\" stroke=\"${c.fox}\" fill=\"none\" stroke-width=\"0.5\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-1.2\" rx=\"1.8\" ry=\"1\" fill=\"${c.fox}\"/>`\n    + `<circle cx=\"-1.5\" cy=\"-2\" r=\"0.6\" fill=\"${c.fox}\"/>`\n    + `<polygon points=\"-1.8,-2.6 -2,-3.2 -1.5,-2.7\" fill=\"${c.fox}\"/>`\n    + `<polygon points=\"-1.2,-2.6 -1,-3.2 -1.5,-2.7\" fill=\"${c.fox}\"/>`\n    + `<circle cx=\"-1.7\" cy=\"-2.1\" r=\"0.1\" fill=\"#222\"/>`\n    + `<path d=\"M1.8,-1 Q2.5,-0.8 3,-1.5\" stroke=\"${c.fox}\" fill=\"none\" stroke-width=\"0.6\"/>`\n    + `<circle cx=\"3\" cy=\"-1.5\" r=\"0.3\" fill=\"#fff\" opacity=\"0.8\"/>`\n    + `</g>`;\n}\n\nfunction svgButterfly(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<g>`\n    + `<ellipse cx=\"-1\" cy=\"-3.5\" rx=\"1\" ry=\"0.7\" fill=\"${c.butterfly}\" opacity=\"0.8\"/>`\n    + `<ellipse cx=\"1\" cy=\"-3.5\" rx=\"1\" ry=\"0.7\" fill=\"${c.butterflyWing}\" opacity=\"0.8\"/>`\n    + `<ellipse cx=\"-0.6\" cy=\"-2.8\" rx=\"0.6\" ry=\"0.4\" fill=\"${c.butterflyWing}\" opacity=\"0.7\"/>`\n    + `<ellipse cx=\"0.6\" cy=\"-2.8\" rx=\"0.6\" ry=\"0.4\" fill=\"${c.butterfly}\" opacity=\"0.7\"/>`\n    + `<line x1=\"0\" y1=\"-2.5\" x2=\"0\" y2=\"-4\" stroke=\"${c.bird}\" stroke-width=\"0.2\"/>`\n    + `<animateTransform attributeName=\"transform\" type=\"translate\" values=\"0,0;2,-1;-1,0.5;0,0\" dur=\"6s\" repeatCount=\"indefinite\"/>`\n    + `</g>`\n    + `</g>`;\n}\n\nfunction svgBeehive(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"-5\" x2=\"0\" y2=\"-7\" stroke=\"${c.trunk}\" stroke-width=\"0.5\"/>`\n    + `<path d=\"M-1,-5 Q1,-4.5 1,-5\" stroke=\"${c.trunk}\" fill=\"none\" stroke-width=\"0.3\"/>`\n    + `<ellipse cx=\"0\" cy=\"-3.5\" rx=\"1.2\" ry=\"1.8\" fill=\"${c.beehive}\"/>`\n    + `<line x1=\"-1.2\" y1=\"-3.5\" x2=\"1.2\" y2=\"-3.5\" stroke=\"${c.trunk}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n    + `<line x1=\"-1\" y1=\"-2.5\" x2=\"1\" y2=\"-2.5\" stroke=\"${c.trunk}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n    + `<circle cx=\"0\" cy=\"-1.8\" r=\"0.25\" fill=\"${c.trunk}\"/>`\n    + `</g>`;\n}\n\nfunction svgWildflowerPatch(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<circle cx=\"-1.5\" cy=\"-1.5\" r=\"0.5\" fill=\"${c.flower}\"/>`\n    + `<circle cx=\"0\" cy=\"-1.8\" r=\"0.6\" fill=\"${c.wildflower}\"/>`\n    + `<circle cx=\"1.2\" cy=\"-1.3\" r=\"0.5\" fill=\"${c.butterflyWing}\"/>`\n    + `<circle cx=\"-0.5\" cy=\"-1\" r=\"0.4\" fill=\"${c.flower}\" opacity=\"0.8\"/>`\n    + `<circle cx=\"0.8\" cy=\"-2\" r=\"0.35\" fill=\"${c.wildflower}\" opacity=\"0.7\"/>`\n    + `<line x1=\"-1.5\" y1=\"-1\" x2=\"-1.5\" y2=\"0\" stroke=\"${c.pine}\" stroke-width=\"0.2\"/>`\n    + `<line x1=\"0\" y1=\"-1.2\" x2=\"0\" y2=\"0\" stroke=\"${c.pine}\" stroke-width=\"0.2\"/>`\n    + `<line x1=\"1.2\" y1=\"-0.8\" x2=\"1.2\" y2=\"0\" stroke=\"${c.pine}\" stroke-width=\"0.2\"/>`\n    + `</g>`;\n}\n\nfunction svgTallGrass(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\" class=\"sway-gentle\">`\n    + `<line x1=\"-1\" y1=\"0\" x2=\"-1.3\" y2=\"-3.5\" stroke=\"${c.tallGrass}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0.2\" y2=\"-4\" stroke=\"${c.tallGrass}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"1\" y1=\"0\" x2=\"0.8\" y2=\"-3.2\" stroke=\"${c.tallGrass}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"-0.5\" y1=\"0\" x2=\"-0.8\" y2=\"-3.8\" stroke=\"${c.tallGrass}\" stroke-width=\"0.3\" opacity=\"0.7\"/>`\n    + `</g>`;\n}\n\nfunction svgBirch(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Cluster of 3 variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"-2\" y1=\"0\" x2=\"-2\" y2=\"-5.5\" stroke=\"${c.birchBark}\" stroke-width=\"0.5\"/>`\n      + `<circle cx=\"-2\" cy=\"-6.5\" r=\"1.5\" fill=\"${c.leaf}\" opacity=\"0.7\"/>`\n      + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-7\" stroke=\"${c.birchBark}\" stroke-width=\"0.6\"/>`\n      + `<circle cx=\"0\" cy=\"-8\" r=\"1.8\" fill=\"${c.leaf}\" opacity=\"0.8\"/>`\n      + `<line x1=\"2\" y1=\"0\" x2=\"2\" y2=\"-5\" stroke=\"${c.birchBark}\" stroke-width=\"0.5\"/>`\n      + `<circle cx=\"2\" cy=\"-6\" r=\"1.3\" fill=\"${c.leaf}\" opacity=\"0.6\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Leaning variant\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<path d=\"M0,0 Q-1,-3.5 -0.5,-7\" stroke=\"${c.birchBark}\" fill=\"none\" stroke-width=\"0.7\"/>`\n      + `<line x1=\"-0.7\" y1=\"-2\" x2=\"-0.3\" y2=\"-2\" stroke=\"${c.trunk}\" stroke-width=\"0.2\" opacity=\"0.5\"/>`\n      + `<line x1=\"-0.5\" y1=\"-4.5\" x2=\"-0.1\" y2=\"-4.5\" stroke=\"${c.trunk}\" stroke-width=\"0.2\" opacity=\"0.5\"/>`\n      + `<circle cx=\"-0.5\" cy=\"-8.5\" r=\"2\" fill=\"${c.leaf}\" opacity=\"0.8\"/>`\n      + `<circle cx=\"-1.5\" cy=\"-8\" r=\"1.3\" fill=\"${c.leaf}\" opacity=\"0.6\"/>`\n      + `</g>`;\n  }\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-7\" stroke=\"${c.birchBark}\" stroke-width=\"0.7\"/>`\n    + `<line x1=\"-0.2\" y1=\"-2\" x2=\"0.2\" y2=\"-2\" stroke=\"${c.trunk}\" stroke-width=\"0.2\" opacity=\"0.5\"/>`\n    + `<line x1=\"-0.2\" y1=\"-4\" x2=\"0.2\" y2=\"-4\" stroke=\"${c.trunk}\" stroke-width=\"0.2\" opacity=\"0.5\"/>`\n    + `<circle cx=\"0\" cy=\"-8.5\" r=\"2.2\" fill=\"${c.leaf}\" opacity=\"0.8\"/>`\n    + `<circle cx=\"-1\" cy=\"-8\" r=\"1.5\" fill=\"${c.leaf}\" opacity=\"0.6\"/>`\n    + `</g>`;\n}\n\nfunction svgHaybale(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-1\" rx=\"2\" ry=\"1\" fill=\"${c.haybale}\"/>`\n    + `<rect x=\"-2\" y=\"-1\" width=\"4\" height=\"1\" fill=\"${c.haybale}\"/>`\n    + `<ellipse cx=\"0\" cy=\"0\" rx=\"2\" ry=\"0.6\" fill=\"${c.haybale}\" opacity=\"0.7\"/>`\n    + `<line x1=\"-1.5\" y1=\"-0.5\" x2=\"1.5\" y2=\"-0.5\" stroke=\"${c.wheat}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n    + `</g>`;\n}\n\n// ── New Forest Assets ───────────────────────────────────────\n\nfunction svgOwl(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-2\" rx=\"1.2\" ry=\"1.5\" fill=\"${c.owl}\"/>`\n    + `<circle cx=\"-0.4\" cy=\"-2.5\" r=\"0.5\" fill=\"#fff\"/>`\n    + `<circle cx=\"0.4\" cy=\"-2.5\" r=\"0.5\" fill=\"#fff\"/>`\n    + `<circle cx=\"-0.4\" cy=\"-2.5\" r=\"0.2\" fill=\"#222\"/>`\n    + `<circle cx=\"0.4\" cy=\"-2.5\" r=\"0.2\" fill=\"#222\"/>`\n    + `<polygon points=\"0,-2.1 -0.2,-1.8 0.2,-1.8\" fill=\"${c.wheat}\"/>`\n    + `</g>`;\n}\n\nfunction svgSquirrel(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"0.8\" ry=\"0.6\" fill=\"${c.squirrel}\"/>`\n    + `<circle cx=\"-0.6\" cy=\"-1.3\" r=\"0.4\" fill=\"${c.squirrel}\"/>`\n    + `<circle cx=\"-0.7\" cy=\"-1.4\" r=\"0.1\" fill=\"#222\"/>`\n    + `<path d=\"M0.8,-0.8 Q1.5,-1.5 1.2,-2.2\" stroke=\"${c.squirrel}\" fill=\"none\" stroke-width=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgMoss(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"-1\" cy=\"-0.2\" rx=\"1.5\" ry=\"0.5\" fill=\"${c.moss}\" opacity=\"0.7\"/>`\n    + `<ellipse cx=\"1\" cy=\"-0.3\" rx=\"1.2\" ry=\"0.4\" fill=\"${c.moss}\" opacity=\"0.6\"/>`\n    + `<ellipse cx=\"0\" cy=\"-0.1\" rx=\"0.8\" ry=\"0.3\" fill=\"${c.moss}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgFern(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<path d=\"M0,0 Q-2,-2 -3,-3.5\" stroke=\"${c.fern}\" fill=\"none\" stroke-width=\"0.4\"/>`\n    + `<path d=\"M0,0 Q0,-2.5 0,-4\" stroke=\"${c.fern}\" fill=\"none\" stroke-width=\"0.4\"/>`\n    + `<path d=\"M0,0 Q2,-2 3,-3.5\" stroke=\"${c.fern}\" fill=\"none\" stroke-width=\"0.4\"/>`\n    + `<circle cx=\"-1\" cy=\"-1.5\" r=\"0.3\" fill=\"${c.fern}\" opacity=\"0.6\"/>`\n    + `<circle cx=\"1\" cy=\"-1.5\" r=\"0.3\" fill=\"${c.fern}\" opacity=\"0.6\"/>`\n    + `<circle cx=\"0\" cy=\"-2.5\" r=\"0.3\" fill=\"${c.fern}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgDeadTree(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-6\" stroke=\"${c.deadTree}\" stroke-width=\"0.8\"/>`\n    + `<line x1=\"0\" y1=\"-4\" x2=\"-2\" y2=\"-5.5\" stroke=\"${c.deadTree}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"0\" y1=\"-3\" x2=\"1.5\" y2=\"-4.5\" stroke=\"${c.deadTree}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"0\" y1=\"-5\" x2=\"-1\" y2=\"-6.5\" stroke=\"${c.deadTree}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgLog(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-3\" y=\"-1\" width=\"6\" height=\"1\" fill=\"${c.log}\" rx=\"0.5\"/>`\n    + `<ellipse cx=\"-3\" cy=\"-0.5\" rx=\"0.5\" ry=\"0.5\" fill=\"${c.trunk}\"/>`\n    + `<ellipse cx=\"3\" cy=\"-0.5\" rx=\"0.5\" ry=\"0.5\" fill=\"${c.trunk}\"/>`\n    + `</g>`;\n}\n\nfunction svgBerryBush(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"2.2\" ry=\"1.5\" fill=\"${c.berryBush}\"/>`\n    + `<circle cx=\"-0.8\" cy=\"-1.8\" r=\"0.3\" fill=\"${c.berry}\"/>`\n    + `<circle cx=\"0.5\" cy=\"-2\" r=\"0.3\" fill=\"${c.berry}\"/>`\n    + `<circle cx=\"0\" cy=\"-1.2\" r=\"0.25\" fill=\"${c.berry}\"/>`\n    + `<circle cx=\"1.2\" cy=\"-1.5\" r=\"0.25\" fill=\"${c.berry}\"/>`\n    + `</g>`;\n}\n\nfunction svgSpider(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"-2.5\" y1=\"-4\" x2=\"2.5\" y2=\"-1\" stroke=\"${c.spiderWeb}\" fill=\"none\" stroke-width=\"0.15\"/>`\n    + `<line x1=\"-2.5\" y1=\"-1\" x2=\"2.5\" y2=\"-4\" stroke=\"${c.spiderWeb}\" fill=\"none\" stroke-width=\"0.15\"/>`\n    + `<line x1=\"0\" y1=\"-5\" x2=\"0\" y2=\"0\" stroke=\"${c.spiderWeb}\" fill=\"none\" stroke-width=\"0.15\"/>`\n    + `<path d=\"M-1.5,-1.5 Q0,-2 1.5,-1.5\" stroke=\"${c.spiderWeb}\" fill=\"none\" stroke-width=\"0.12\"/>`\n    + `<path d=\"M-1,-3 Q0,-3.5 1,-3\" stroke=\"${c.spiderWeb}\" fill=\"none\" stroke-width=\"0.12\"/>`\n    + `<circle cx=\"0\" cy=\"-2.5\" r=\"0.4\" fill=\"${c.bird}\"/>`\n    + `</g>`;\n}\n\n// ── New Farm Assets ─────────────────────────────────────────\n\nfunction svgSilo(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-1.2\" y=\"-7\" width=\"2.4\" height=\"7\" fill=\"${c.silo}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-7\" rx=\"1.2\" ry=\"0.5\" fill=\"${c.silo}\" opacity=\"0.8\"/>`\n    + `<polygon points=\"-1.2,-7 0,-8.5 1.2,-7\" fill=\"${c.roofA}\"/>`\n    + `</g>`;\n}\n\nfunction svgPigpen(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2.5\" y=\"-1\" width=\"5\" height=\"1\" fill=\"${c.fence}\" opacity=\"0.5\"/>`\n    + `<ellipse cx=\"0\" cy=\"-1\" rx=\"1.2\" ry=\"0.8\" fill=\"${c.pig}\"/>`\n    + `<circle cx=\"-1\" cy=\"-1.3\" r=\"0.4\" fill=\"${c.pig}\"/>`\n    + `<ellipse cx=\"-1.3\" cy=\"-1.2\" rx=\"0.25\" ry=\"0.15\" fill=\"#eaa\"/>`\n    + `</g>`;\n}\n\nfunction svgTrough(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2\" y=\"-1\" width=\"4\" height=\"0.8\" fill=\"${c.trough}\"/>`\n    + `<line x1=\"-1.5\" y1=\"-0.2\" x2=\"-1.5\" y2=\"0.5\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"1.5\" y1=\"-0.2\" x2=\"1.5\" y2=\"0.5\" stroke=\"${c.trunk}\" stroke-width=\"0.3\"/>`\n    + `<rect x=\"-1.8\" y=\"-0.8\" width=\"3.6\" height=\"0.5\" fill=\"${c.tidePools}\" opacity=\"0.4\"/>`\n    + `</g>`;\n}\n\nfunction svgHaystack(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-2,0 2,0 1.5,-3 -1.5,-3\" fill=\"${c.haystack}\"/>`\n    + `<polygon points=\"-1.5,-3 0,-4.5 1.5,-3\" fill=\"${c.haystack}\"/>`\n    + `</g>`;\n}\n\nfunction svgOrchard(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-3\" stroke=\"${c.trunk}\" stroke-width=\"0.6\"/>`\n    + `<circle cx=\"0\" cy=\"-5\" r=\"2.5\" fill=\"${c.orchard}\"/>`\n    + `<circle cx=\"-1\" cy=\"-4.5\" r=\"0.35\" fill=\"${c.orchardFruit}\"/>`\n    + `<circle cx=\"0.8\" cy=\"-5.2\" r=\"0.35\" fill=\"${c.orchardFruit}\"/>`\n    + `<circle cx=\"0\" cy=\"-3.8\" r=\"0.3\" fill=\"${c.orchardFruit}\"/>`\n    + `</g>`;\n}\n\nfunction svgBeeFarm(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-1.5\" y=\"-2.5\" width=\"3\" height=\"2.5\" fill=\"${c.beeFarm}\"/>`\n    + `<rect x=\"-1.5\" y=\"-2.5\" width=\"3\" height=\"0.8\" fill=\"${c.beeFarm}\" stroke=\"${c.trunk}\" stroke-width=\"0.2\"/>`\n    + `<rect x=\"-1.5\" y=\"-1.7\" width=\"3\" height=\"0.8\" fill=\"${c.beeFarm}\" stroke=\"${c.trunk}\" stroke-width=\"0.2\"/>`\n    + `<polygon points=\"-1.5,-2.5 0,-3.5 1.5,-2.5\" fill=\"${c.roofB}\"/>`\n    + `</g>`;\n}\n\nfunction svgPumpkin(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"1.5\" ry=\"1\" fill=\"${c.pumpkin}\"/>`\n    + `<ellipse cx=\"-0.5\" cy=\"-0.8\" rx=\"0.8\" ry=\"1\" fill=\"${c.pumpkin}\" opacity=\"0.6\"/>`\n    + `<ellipse cx=\"0.5\" cy=\"-0.8\" rx=\"0.8\" ry=\"1\" fill=\"${c.pumpkin}\" opacity=\"0.6\"/>`\n    + `<line x1=\"0\" y1=\"-1.8\" x2=\"0.3\" y2=\"-2.3\" stroke=\"${c.pine}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\n// ── New Village Assets ──────────────────────────────────────\n\nfunction svgTavern(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-2.5,0 0,1.2 2.5,0 2.5,-3.5 0,-2.3 -2.5,-3.5\" fill=\"${c.tavern}\"/>`\n    + `<polygon points=\"-2.5,0 0,1.2 0,-2.3 -2.5,-3.5\" fill=\"${c.wallShade}\"/>`\n    + `<polygon points=\"0,-6 -3,-3.3 0,-2 3,-3.3\" fill=\"${c.roofB}\"/>`\n    + `<rect x=\"3\" y=\"-5\" width=\"1.5\" height=\"1.2\" fill=\"${c.tavernSign}\" rx=\"0.2\"/>`\n    + `<circle cx=\"3.75\" cy=\"-4.4\" r=\"0.3\" fill=\"${c.wheat}\"/>`\n    + `</g>`;\n}\n\nfunction svgBakery(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2.5\" y=\"-3.5\" width=\"5\" height=\"3.5\" fill=\"${c.bakery}\"/>`\n    + `<polygon points=\"-3,-3.5 0,-5.5 3,-3.5\" fill=\"${c.roofA}\"/>`\n    + `<rect x=\"1.5\" y=\"-6.5\" width=\"0.8\" height=\"1.5\" fill=\"${c.chimney}\"/>`\n    + `<circle cx=\"1.9\" cy=\"-7.5\" r=\"0.6\" fill=\"${c.smoke}\">`\n    + `<animate attributeName=\"cy\" values=\"-7.5;-9.5;-7.5\" dur=\"3s\" repeatCount=\"indefinite\"/>`\n    + `<animate attributeName=\"opacity\" values=\"0.4;0.1;0.4\" dur=\"3s\" repeatCount=\"indefinite\"/>`\n    + `</circle>`\n    + `</g>`;\n}\n\nfunction svgStable(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-3\" y=\"-3\" width=\"6\" height=\"3\" fill=\"${c.stable}\"/>`\n    + `<polygon points=\"-3.5,-3 0,-5 3.5,-3\" fill=\"${c.roofB}\"/>`\n    + `<rect x=\"-1\" y=\"-2\" width=\"2\" height=\"2\" fill=\"${c.trunk}\" opacity=\"0.6\"/>`\n    + `</g>`;\n}\n\nfunction svgGarden(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-3\" y=\"-0.3\" width=\"6\" height=\"0.3\" fill=\"${c.gardenFence}\" opacity=\"0.5\"/>`\n    + `<line x1=\"-3\" y1=\"-0.3\" x2=\"-3\" y2=\"-1.5\" stroke=\"${c.gardenFence}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"3\" y1=\"-0.3\" x2=\"3\" y2=\"-1.5\" stroke=\"${c.gardenFence}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"-3\" y1=\"-1\" x2=\"3\" y2=\"-1\" stroke=\"${c.gardenFence}\" stroke-width=\"0.2\"/>`\n    + `<circle cx=\"-1.5\" cy=\"-0.8\" r=\"0.4\" fill=\"${c.flower}\"/>`\n    + `<circle cx=\"0\" cy=\"-0.6\" r=\"0.35\" fill=\"${c.wildflower}\"/>`\n    + `<circle cx=\"1.5\" cy=\"-0.7\" r=\"0.4\" fill=\"${c.butterflyWing}\"/>`\n    + `</g>`;\n}\n\nfunction svgLaundry(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\" class=\"sway-slow\">`\n    + `<line x1=\"-3\" y1=\"0\" x2=\"-3\" y2=\"-4\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"3\" y1=\"0\" x2=\"3\" y2=\"-4\" stroke=\"${c.trunk}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"-3\" y1=\"-3.5\" x2=\"3\" y2=\"-3.5\" stroke=\"${c.trunk}\" stroke-width=\"0.2\"/>`\n    + `<rect x=\"-2\" y=\"-3.5\" width=\"1.5\" height=\"2\" fill=\"${c.laundry}\" rx=\"0.1\"/>`\n    + `<rect x=\"0\" y=\"-3.5\" width=\"1.2\" height=\"1.8\" fill=\"${c.sail}\" rx=\"0.1\"/>`\n    + `</g>`;\n}\n\nfunction svgDoghouse(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-1.5\" y=\"-2\" width=\"3\" height=\"2\" fill=\"${c.doghouse}\"/>`\n    + `<polygon points=\"-1.8,-2 0,-3.2 1.8,-2\" fill=\"${c.roofA}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"0.5\" ry=\"0.6\" fill=\"${c.trunk}\" opacity=\"0.6\"/>`\n    + `<ellipse cx=\"2.5\" cy=\"-0.5\" rx=\"0.7\" ry=\"0.5\" fill=\"${c.deer}\"/>`\n    + `</g>`;\n}\n\nfunction svgShrine(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-0.8\" y=\"-3\" width=\"1.6\" height=\"3\" fill=\"${c.shrine}\"/>`\n    + `<polygon points=\"-1.2,-3 0,-4.2 1.2,-3\" fill=\"${c.shrine}\"/>`\n    + `<rect x=\"-0.3\" y=\"-2.5\" width=\"0.6\" height=\"0.6\" fill=\"${c.fountain}\" rx=\"0.1\"/>`\n    + `</g>`;\n}\n\nfunction svgWagon(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-3\" y=\"-3\" width=\"5\" height=\"2.5\" fill=\"${c.wagon}\"/>`\n    + `<path d=\"M-3,-3 Q-1.5,-5 2,-3\" stroke=\"${c.wagon}\" fill=\"${c.sail}\" opacity=\"0.5\" stroke-width=\"0.3\"/>`\n    + `<circle cx=\"-2\" cy=\"0\" r=\"0.8\" fill=\"${c.trunk}\" stroke=\"${c.fence}\" stroke-width=\"0.2\"/>`\n    + `<circle cx=\"1.5\" cy=\"0\" r=\"0.8\" fill=\"${c.trunk}\" stroke=\"${c.fence}\" stroke-width=\"0.2\"/>`\n    + `</g>`;\n}\n\n// ── New Town/City Assets ────────────────────────────────────\n\nfunction svgCathedral(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-3,0 0,1.5 3,0 3,-6 0,-4.5 -3,-6\" fill=\"${c.cathedral}\"/>`\n    + `<polygon points=\"-3,0 0,1.5 0,-4.5 -3,-6\" fill=\"${c.wallShade}\"/>`\n    + `<polygon points=\"0,-10 -3.5,-5.5 0,-4 3.5,-5.5\" fill=\"${c.roofA}\"/>`\n    + `<circle cx=\"0\" cy=\"-7\" r=\"1\" fill=\"${c.cathedralWindow}\" opacity=\"0.7\"/>`\n    + `<line x1=\"0\" y1=\"-12\" x2=\"0\" y2=\"-10\" stroke=\"${c.wall}\" stroke-width=\"0.5\"/>`\n    + `<line x1=\"-0.8\" y1=\"-11\" x2=\"0.8\" y2=\"-11\" stroke=\"${c.wall}\" stroke-width=\"0.4\"/>`\n    + `</g>`;\n}\n\nfunction svgLibrary(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2.5\" y=\"-4\" width=\"5\" height=\"4\" fill=\"${c.library}\"/>`\n    + `<polygon points=\"-3,-4 0,-6 3,-4\" fill=\"${c.roofB}\"/>`\n    + `<rect x=\"-1.5\" y=\"-3.5\" width=\"1\" height=\"1.5\" fill=\"${c.blacksmith}\" rx=\"0.2\"/>`\n    + `<rect x=\"0.5\" y=\"-3.5\" width=\"1\" height=\"1.5\" fill=\"${c.blacksmith}\" rx=\"0.2\"/>`\n    + `</g>`;\n}\n\nfunction svgClocktower(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-1.5\" y=\"-10\" width=\"3\" height=\"10\" fill=\"${c.clocktower}\"/>`\n    + `<polygon points=\"-2,-10 0,-12.5 2,-10\" fill=\"${c.castleRoof}\"/>`\n    + `<circle cx=\"0\" cy=\"-8\" r=\"1.2\" fill=\"${c.clockFace}\"/>`\n    + `<g>`\n    + `<line x1=\"0\" y1=\"-8\" x2=\"0\" y2=\"-9\" stroke=\"${c.bird}\" stroke-width=\"0.3\"/>`\n    + `<animateTransform attributeName=\"transform\" type=\"rotate\" values=\"-15 0 -8;15 0 -8;-15 0 -8\" dur=\"4s\" repeatCount=\"indefinite\"/>`\n    + `</g>`\n    + `<line x1=\"0\" y1=\"-8\" x2=\"0.6\" y2=\"-7.5\" stroke=\"${c.bird}\" stroke-width=\"0.2\"/>`\n    + `</g>`;\n}\n\nfunction svgStatue(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-1\" y=\"-1.5\" width=\"2\" height=\"1.5\" fill=\"${c.rock}\"/>`\n    + `<rect x=\"-0.6\" y=\"-4\" width=\"1.2\" height=\"2.5\" fill=\"${c.statue}\"/>`\n    + `<circle cx=\"0\" cy=\"-4.5\" r=\"0.6\" fill=\"${c.statue}\"/>`\n    + `</g>`;\n}\n\nfunction svgPark(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"2\" y1=\"0\" x2=\"2\" y2=\"-3\" stroke=\"${c.trunk}\" stroke-width=\"0.5\"/>`\n    + `<circle cx=\"2\" cy=\"-4.5\" r=\"2\" fill=\"${c.gardenTree}\"/>`\n    + `<rect x=\"-3\" y=\"-1\" width=\"3\" height=\"0.5\" fill=\"${c.parkBench}\"/>`\n    + `<line x1=\"-3\" y1=\"-1\" x2=\"-3\" y2=\"0\" stroke=\"${c.parkBench}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"0\" y1=\"-1\" x2=\"0\" y2=\"0\" stroke=\"${c.parkBench}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgWarehouse(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-3.5\" y=\"-3.5\" width=\"7\" height=\"3.5\" fill=\"${c.warehouse}\"/>`\n    + `<polygon points=\"-4,-3.5 0,-5.5 4,-3.5\" fill=\"${c.roofA}\" opacity=\"0.8\"/>`\n    + `<rect x=\"-1\" y=\"-2\" width=\"2\" height=\"2\" fill=\"${c.blacksmith}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgGatehouse(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2\" y=\"-6\" width=\"4\" height=\"6\" fill=\"${c.gatehouse}\"/>`\n    + `<rect x=\"-1\" y=\"-4\" width=\"2\" height=\"4\" fill=\"${c.blacksmith}\" rx=\"1\" ry=\"0\"/>`\n    + `<rect x=\"-3\" y=\"-7\" width=\"2\" height=\"1.5\" fill=\"${c.tower}\"/>`\n    + `<rect x=\"1\" y=\"-7\" width=\"2\" height=\"1.5\" fill=\"${c.tower}\"/>`\n    + `</g>`;\n}\n\nfunction svgManor(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-3.5,0 0,1.8 3.5,0 3.5,-4.5 0,-2.7 -3.5,-4.5\" fill=\"${c.manor}\"/>`\n    + `<polygon points=\"-3.5,0 0,1.8 0,-2.7 -3.5,-4.5\" fill=\"${c.wallShade}\"/>`\n    + `<polygon points=\"0,-7.5 -4,-4.2 0,-2.5 4,-4.2\" fill=\"${c.roofA}\"/>`\n    + `<rect x=\"1.5\" y=\"-7.5\" width=\"1\" height=\"1.5\" fill=\"${c.chimney}\"/>`\n    + `<rect x=\"-3.5\" y=\"-0.5\" width=\"1\" height=\"0.5\" fill=\"${c.manorGarden}\"/>`\n    + `</g>`;\n}\n\n// ── New Cross-level Assets ──────────────────────────────────\n\nfunction svgSignpost(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-5\" stroke=\"${c.signpost}\" stroke-width=\"0.5\"/>`\n    + `<rect x=\"0\" y=\"-5\" width=\"2.5\" height=\"0.8\" fill=\"${c.signpost}\" rx=\"0.1\"/>`\n    + `<rect x=\"-2.5\" y=\"-4\" width=\"2.5\" height=\"0.8\" fill=\"${c.signpost}\" rx=\"0.1\"/>`\n    + `</g>`;\n}\n\nfunction svgLantern(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"-4\" stroke=\"${c.lantern}\" stroke-width=\"0.4\"/>`\n    + `<rect x=\"-0.5\" y=\"-5\" width=\"1\" height=\"1\" fill=\"${c.lantern}\"/>`\n    + `<rect x=\"-0.3\" y=\"-4.8\" width=\"0.6\" height=\"0.6\" fill=\"${c.lanternGlow}\" opacity=\"0.8\"/>`\n    + `<circle cx=\"0\" cy=\"-4.5\" r=\"1\" fill=\"${c.lanternGlow}\" opacity=\"0.15\"/>`\n    + `</g>`;\n}\n\nfunction svgWoodpile(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2\" y=\"-1.5\" width=\"4\" height=\"1.5\" fill=\"${c.woodpile}\"/>`\n    + `<rect x=\"-1.8\" y=\"-2.5\" width=\"3.6\" height=\"1\" fill=\"${c.woodpile}\"/>`\n    + `<ellipse cx=\"-2\" cy=\"-0.75\" rx=\"0.4\" ry=\"0.75\" fill=\"${c.trunk}\"/>`\n    + `<ellipse cx=\"2\" cy=\"-0.75\" rx=\"0.4\" ry=\"0.75\" fill=\"${c.trunk}\"/>`\n    + `</g>`;\n}\n\nfunction svgPuddle(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.2\" rx=\"2\" ry=\"0.7\" fill=\"${c.puddle}\" opacity=\"0.4\"/>`\n    + `<ellipse cx=\"0.3\" cy=\"-0.3\" rx=\"1.2\" ry=\"0.4\" fill=\"${c.puddle}\" opacity=\"0.25\"/>`\n    + `</g>`;\n}\n\nfunction svgCampfire(x: number, y: number, c: AssetColors, v: number): string {\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.2\" rx=\"1.5\" ry=\"0.5\" fill=\"${c.rock}\" opacity=\"0.5\"/>`\n    + `<line x1=\"-1\" y1=\"-0.3\" x2=\"0\" y2=\"-0.8\" stroke=\"${c.campfire}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"1\" y1=\"-0.3\" x2=\"0\" y2=\"-0.8\" stroke=\"${c.campfire}\" stroke-width=\"0.4\"/>`\n    + `<ellipse cx=\"0\" cy=\"-1.8\" rx=\"0.8\" ry=\"1.2\" fill=\"${c.campfireFlame}\" opacity=\"0.8\">`\n    + `<animate attributeName=\"opacity\" values=\"0.8;0.5;0.8\" dur=\"1.5s\" repeatCount=\"indefinite\"/>`\n    + `</ellipse>`\n    + `<ellipse cx=\"0\" cy=\"-2\" rx=\"0.4\" ry=\"0.7\" fill=\"${c.lanternGlow}\" opacity=\"0.9\"/>`\n    + `</g>`;\n}\n\n// ── Seasonal SVG Renderers ───────────────────────────────────\n\n// ── Winter Assets ──────────────────────────────────────────\n\nfunction svgSnowPine(x: number, y: number, c: AssetColors, v: number): string {\n  const snow = c.snowCap;\n  const trunk = c.trunk;\n  if (v === 1) {\n    // Heavy snow\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-0.5\" y=\"-1\" width=\"1\" height=\"3\" fill=\"${trunk}\"/>`\n      + `<polygon points=\"0,-8 -3,-2 3,-2\" fill=\"${c.pine}\" opacity=\"0.6\"/>`\n      + `<polygon points=\"0,-8 -3,-2 3,-2\" fill=\"${snow}\" opacity=\"0.55\"/>`\n      + `<polygon points=\"0,-6 -2.5,-1.5 2.5,-1.5\" fill=\"${snow}\" opacity=\"0.6\"/>`\n      + `<ellipse cx=\"0\" cy=\"-8\" rx=\"1.5\" ry=\"0.5\" fill=\"${snow}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Frosted blue\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-0.5\" y=\"-1\" width=\"1\" height=\"3\" fill=\"${trunk}\"/>`\n      + `<polygon points=\"0,-7.5 -3.5,-1 3.5,-1\" fill=\"${c.ice}\" opacity=\"0.5\"/>`\n      + `<polygon points=\"0,-7.5 -2.5,-2.5 2.5,-2.5\" fill=\"${snow}\" opacity=\"0.4\"/>`\n      + `<ellipse cx=\"0\" cy=\"-7.5\" rx=\"1.2\" ry=\"0.4\" fill=\"${snow}\"/>`\n      + `</g>`;\n  }\n  // Light snow (default)\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-0.5\" y=\"-1\" width=\"1\" height=\"3\" fill=\"${trunk}\"/>`\n    + `<polygon points=\"0,-7 -3,-1 3,-1\" fill=\"${c.pine}\"/>`\n    + `<polygon points=\"0,-7 -1.5,-4 1.5,-4\" fill=\"${snow}\" opacity=\"0.45\"/>`\n    + `<ellipse cx=\"0.5\" cy=\"-6\" rx=\"1\" ry=\"0.3\" fill=\"${snow}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgSnowDeciduous(x: number, y: number, c: AssetColors, v: number): string {\n  const branch = c.bareBranch;\n  const snow = c.snowCap;\n  if (v === 1) {\n    // Thin/tall\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"2\" x2=\"0\" y2=\"-5\" stroke=\"${branch}\" stroke-width=\"0.8\"/>`\n      + `<line x1=\"0\" y1=\"-2\" x2=\"-2\" y2=\"-4\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"-3\" x2=\"1.5\" y2=\"-5\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"-1\" x2=\"2\" y2=\"-2.5\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n      + `<ellipse cx=\"-1.5\" cy=\"-4.2\" rx=\"1\" ry=\"0.4\" fill=\"${snow}\" opacity=\"0.6\"/>`\n      + `<ellipse cx=\"1.2\" cy=\"-5.2\" rx=\"0.8\" ry=\"0.3\" fill=\"${snow}\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Wide/old\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-0.6\" y=\"-1\" width=\"1.2\" height=\"3.5\" fill=\"${branch}\"/>`\n      + `<line x1=\"0\" y1=\"-1\" x2=\"-3\" y2=\"-3.5\" stroke=\"${branch}\" stroke-width=\"0.6\"/>`\n      + `<line x1=\"0\" y1=\"-1.5\" x2=\"2.5\" y2=\"-4\" stroke=\"${branch}\" stroke-width=\"0.6\"/>`\n      + `<line x1=\"0\" y1=\"0\" x2=\"-2.5\" y2=\"-1.5\" stroke=\"${branch}\" stroke-width=\"0.5\"/>`\n      + `<line x1=\"0\" y1=\"0\" x2=\"3\" y2=\"-2\" stroke=\"${branch}\" stroke-width=\"0.5\"/>`\n      + `<ellipse cx=\"-2.5\" cy=\"-3.7\" rx=\"1.2\" ry=\"0.5\" fill=\"${snow}\" opacity=\"0.55\"/>`\n      + `<ellipse cx=\"2\" cy=\"-4.2\" rx=\"1\" ry=\"0.4\" fill=\"${snow}\" opacity=\"0.5\"/>`\n      + `<ellipse cx=\"0\" cy=\"-2\" rx=\"1.5\" ry=\"0.4\" fill=\"${snow}\" opacity=\"0.4\"/>`\n      + `</g>`;\n  }\n  // Single tree\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"2\" x2=\"0\" y2=\"-4\" stroke=\"${branch}\" stroke-width=\"0.7\"/>`\n    + `<line x1=\"0\" y1=\"-1.5\" x2=\"-2.5\" y2=\"-3.5\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"0\" y1=\"-2.5\" x2=\"2\" y2=\"-4.5\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"0\" y1=\"-0.5\" x2=\"2\" y2=\"-2\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n    + `<ellipse cx=\"-2\" cy=\"-3.7\" rx=\"1\" ry=\"0.35\" fill=\"${snow}\" opacity=\"0.5\"/>`\n    + `<ellipse cx=\"1.8\" cy=\"-4.7\" rx=\"0.8\" ry=\"0.3\" fill=\"${snow}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgSnowman(x: number, y: number, c: AssetColors, v: number): string {\n  const body = c.snowCap;\n  const coal = c.snowmanCoal;\n  const carrot = c.snowmanCarrot;\n  const scarf = c.scarfRed;\n  if (v === 1) {\n    // With broom\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<circle cx=\"0\" cy=\"0\" r=\"2.2\" fill=\"${body}\"/>`\n      + `<circle cx=\"0\" cy=\"-2.8\" r=\"1.6\" fill=\"${body}\"/>`\n      + `<circle cx=\"0\" cy=\"-4.8\" r=\"1.1\" fill=\"${body}\"/>`\n      + `<circle cx=\"-0.4\" cy=\"-5\" r=\"0.2\" fill=\"${coal}\"/>`\n      + `<circle cx=\"0.4\" cy=\"-5\" r=\"0.2\" fill=\"${coal}\"/>`\n      + `<polygon points=\"0,-4.8 1.2,-4.6 0,-4.5\" fill=\"${carrot}\"/>`\n      + `<rect x=\"-1\" y=\"-3.6\" width=\"2\" height=\"0.4\" rx=\"0.2\" fill=\"${scarf}\"/>`\n      + `<line x1=\"2\" y1=\"-3\" x2=\"3.5\" y2=\"-6\" stroke=\"${c.bareBranch}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"3.2\" y1=\"-5.5\" x2=\"3.8\" y2=\"-6.5\" stroke=\"${c.bareBranch}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"3.2\" y1=\"-5.5\" x2=\"3.8\" y2=\"-5.2\" stroke=\"${c.bareBranch}\" stroke-width=\"0.3\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Melting\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0.5\" rx=\"2.8\" ry=\"1.5\" fill=\"${body}\"/>`\n      + `<circle cx=\"0\" cy=\"-1.5\" r=\"1.8\" fill=\"${body}\"/>`\n      + `<circle cx=\"0\" cy=\"-3.2\" r=\"1\" fill=\"${body}\"/>`\n      + `<circle cx=\"-0.3\" cy=\"-3.4\" r=\"0.15\" fill=\"${coal}\"/>`\n      + `<circle cx=\"0.3\" cy=\"-3.4\" r=\"0.15\" fill=\"${coal}\"/>`\n      + `<polygon points=\"0,-3.2 1,-3 0,-2.9\" fill=\"${carrot}\"/>`\n      + `<ellipse cx=\"0\" cy=\"1.5\" rx=\"3\" ry=\"0.5\" fill=\"${c.ice}\" opacity=\"0.3\"/>`\n      + `</g>`;\n  }\n  // Classic\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<circle cx=\"0\" cy=\"0\" r=\"2\" fill=\"${body}\"/>`\n    + `<circle cx=\"0\" cy=\"-2.5\" r=\"1.5\" fill=\"${body}\"/>`\n    + `<circle cx=\"0\" cy=\"-4.3\" r=\"1\" fill=\"${body}\"/>`\n    + `<circle cx=\"-0.35\" cy=\"-4.5\" r=\"0.18\" fill=\"${coal}\"/>`\n    + `<circle cx=\"0.35\" cy=\"-4.5\" r=\"0.18\" fill=\"${coal}\"/>`\n    + `<polygon points=\"0,-4.3 1.2,-4.1 0,-4\" fill=\"${carrot}\"/>`\n    + `<circle cx=\"0\" cy=\"-2.2\" r=\"0.15\" fill=\"${coal}\"/>`\n    + `<circle cx=\"0\" cy=\"-2.7\" r=\"0.15\" fill=\"${coal}\"/>`\n    + `<rect x=\"-1\" y=\"-3.2\" width=\"2\" height=\"0.35\" rx=\"0.15\" fill=\"${scarf}\"/>`\n    + `<rect x=\"-1.2\" y=\"-5.5\" width=\"2.4\" height=\"0.5\" fill=\"${coal}\"/>`\n    + `<rect x=\"-0.8\" y=\"-6\" width=\"1.6\" height=\"0.6\" fill=\"${coal}\"/>`\n    + `</g>`;\n}\n\nfunction svgSnowdrift(x: number, y: number, c: AssetColors, v: number): string {\n  const snow = c.snowCap;\n  if (v === 1) {\n    // Large\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"3.5\" ry=\"1.2\" fill=\"${snow}\"/>`\n      + `<ellipse cx=\"-1\" cy=\"-0.5\" rx=\"2\" ry=\"0.8\" fill=\"${c.frostWhite}\" opacity=\"0.6\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Wind-shaped\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<path d=\"M-3,0 Q-1,-1.5 2,-0.5 Q3,0 3.5,0.3\" fill=\"${snow}\" stroke=\"none\"/>`\n      + `<ellipse cx=\"0\" cy=\"0.2\" rx=\"3\" ry=\"0.6\" fill=\"${snow}\" opacity=\"0.8\"/>`\n      + `</g>`;\n  }\n  // Small\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"0\" rx=\"2\" ry=\"0.8\" fill=\"${snow}\"/>`\n    + `<ellipse cx=\"0.3\" cy=\"-0.3\" rx=\"1.2\" ry=\"0.5\" fill=\"${c.frostWhite}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgIgloo(x: number, y: number, c: AssetColors, v: number): string {\n  const block = c.igloo;\n  const ice = c.ice;\n  if (v === 1) {\n    // With entrance\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<path d=\"M-3.5,0.5 Q-3.5,-3 0,-3.5 Q3.5,-3 3.5,0.5 Z\" fill=\"${block}\"/>`\n      + `<path d=\"M-1,0.5 Q-1,-0.5 0,-0.8 Q1,-0.5 1,0.5 Z\" fill=\"${ice}\" opacity=\"0.5\"/>`\n      + `<line x1=\"-2\" y1=\"-1\" x2=\"2\" y2=\"-1\" stroke=\"${ice}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n      + `<line x1=\"-2.5\" y1=\"0\" x2=\"2.5\" y2=\"0\" stroke=\"${ice}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n      + `<path d=\"M2,0.5 Q2.5,0.3 3,0.5 Q3,-0.2 2.5,-0.3 Q2,-0.2 2,0.5 Z\" fill=\"${block}\" opacity=\"0.8\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Half-built\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<path d=\"M-3,0.5 Q-3,-1.5 0,-2 Q2,-1.5 2,0.5 Z\" fill=\"${block}\"/>`\n      + `<rect x=\"2.5\" y=\"-0.5\" width=\"1\" height=\"0.5\" fill=\"${block}\" opacity=\"0.7\"/>`\n      + `<rect x=\"2\" y=\"0\" width=\"1.2\" height=\"0.5\" fill=\"${block}\" opacity=\"0.6\"/>`\n      + `<line x1=\"-1.5\" y1=\"0\" x2=\"1.5\" y2=\"0\" stroke=\"${ice}\" stroke-width=\"0.2\" opacity=\"0.3\"/>`\n      + `</g>`;\n  }\n  // Classic\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<path d=\"M-3,0.5 Q-3,-3 0,-3.5 Q3,-3 3,0.5 Z\" fill=\"${block}\"/>`\n    + `<line x1=\"-2\" y1=\"-1\" x2=\"2\" y2=\"-1\" stroke=\"${ice}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n    + `<line x1=\"-2.5\" y1=\"0\" x2=\"2.5\" y2=\"0\" stroke=\"${ice}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n    + `<line x1=\"-1\" y1=\"-2\" x2=\"1\" y2=\"-2\" stroke=\"${ice}\" stroke-width=\"0.2\" opacity=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgFrozenPond(x: number, y: number, c: AssetColors, v: number): string {\n  const ice = c.ice;\n  const crack = c.frozenWater;\n  if (v === 1) {\n    // With cracks\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"3\" ry=\"1.2\" fill=\"${ice}\" opacity=\"0.7\"/>`\n      + `<line x1=\"-1\" y1=\"-0.3\" x2=\"1.5\" y2=\"0.5\" stroke=\"${crack}\" stroke-width=\"0.3\" opacity=\"0.5\"/>`\n      + `<line x1=\"0\" y1=\"-0.5\" x2=\"0.5\" y2=\"0.8\" stroke=\"${crack}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n      + `<ellipse cx=\"0.5\" cy=\"-0.2\" rx=\"0.8\" ry=\"0.3\" fill=\"#fff\" opacity=\"0.2\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Thin ice\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"2.5\" ry=\"1\" fill=\"${ice}\" opacity=\"0.5\"/>`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"1.5\" ry=\"0.6\" fill=\"${crack}\" opacity=\"0.3\"/>`\n      + `<ellipse cx=\"0.3\" cy=\"-0.1\" rx=\"0.5\" ry=\"0.2\" fill=\"#fff\" opacity=\"0.15\"/>`\n      + `</g>`;\n  }\n  // Solid\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"0\" rx=\"3\" ry=\"1.2\" fill=\"${ice}\" opacity=\"0.7\"/>`\n    + `<ellipse cx=\"0.5\" cy=\"-0.2\" rx=\"1.2\" ry=\"0.5\" fill=\"#fff\" opacity=\"0.15\"/>`\n    + `</g>`;\n}\n\nfunction svgIcicle(x: number, y: number, c: AssetColors, v: number): string {\n  const ice = c.icicle;\n  if (v === 1) {\n    // Cluster\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<polygon points=\"-1.5,-1 -1.2,-1 -1,-3\" fill=\"${ice}\" opacity=\"0.7\"/>`\n      + `<polygon points=\"-0.3,-1 0,-1 0.2,-3.5\" fill=\"${ice}\" opacity=\"0.8\"/>`\n      + `<polygon points=\"0.8,-1 1.1,-1 1.2,-2.5\" fill=\"${ice}\" opacity=\"0.7\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Thick\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<polygon points=\"-0.5,-1 0.5,-1 0.2,-3.5 -0.2,-3.5\" fill=\"${ice}\" opacity=\"0.8\"/>`\n      + `<ellipse cx=\"0\" cy=\"-1\" rx=\"0.6\" ry=\"0.2\" fill=\"${ice}\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  // Single\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<polygon points=\"-0.2,-1 0.2,-1 0,-3\" fill=\"${ice}\" opacity=\"0.8\"/>`\n    + `</g>`;\n}\n\nfunction svgSled(x: number, y: number, c: AssetColors, v: number): string {\n  const wood = c.sledWood;\n  const runner = c.sledRunner;\n  if (v === 1) {\n    // With gifts\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-2.5\" y=\"-1\" width=\"5\" height=\"0.5\" rx=\"0.2\" fill=\"${wood}\"/>`\n      + `<path d=\"M-2.5,-0.5 Q-3,-0.5 -3,0 L-2.5,0.2\" fill=\"none\" stroke=\"${runner}\" stroke-width=\"0.4\"/>`\n      + `<path d=\"M2.5,-0.5 Q3,-0.5 3,0 L2.5,0.2\" fill=\"none\" stroke=\"${runner}\" stroke-width=\"0.4\"/>`\n      + `<rect x=\"-1.5\" y=\"-2.2\" width=\"1.5\" height=\"1.2\" fill=\"${c.scarfRed}\" rx=\"0.2\"/>`\n      + `<rect x=\"0.3\" y=\"-1.8\" width=\"1\" height=\"0.8\" fill=\"${c.sproutGreen || '#4a8828'}\" rx=\"0.2\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With runner marks\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-2.5\" y=\"-1\" width=\"5\" height=\"0.5\" rx=\"0.2\" fill=\"${wood}\"/>`\n      + `<path d=\"M-2.5,-0.5 Q-3,-0.5 -3,0 L-2.5,0.2\" fill=\"none\" stroke=\"${runner}\" stroke-width=\"0.4\"/>`\n      + `<path d=\"M2.5,-0.5 Q3,-0.5 3,0 L2.5,0.2\" fill=\"none\" stroke=\"${runner}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"-3\" y1=\"0.3\" x2=\"3\" y2=\"0.3\" stroke=\"${runner}\" stroke-width=\"0.15\" opacity=\"0.3\"/>`\n      + `<line x1=\"-3\" y1=\"0.5\" x2=\"3\" y2=\"0.5\" stroke=\"${runner}\" stroke-width=\"0.15\" opacity=\"0.2\"/>`\n      + `</g>`;\n  }\n  // Empty\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2.5\" y=\"-1\" width=\"5\" height=\"0.5\" rx=\"0.2\" fill=\"${wood}\"/>`\n    + `<path d=\"M-2.5,-0.5 Q-3,-0.5 -3,0 L-2.5,0.2\" fill=\"none\" stroke=\"${runner}\" stroke-width=\"0.4\"/>`\n    + `<path d=\"M2.5,-0.5 Q3,-0.5 3,0 L2.5,0.2\" fill=\"none\" stroke=\"${runner}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"-2\" y1=\"-1\" x2=\"-2\" y2=\"-0.5\" stroke=\"${wood}\" stroke-width=\"0.3\"/>`\n    + `<line x1=\"2\" y1=\"-1\" x2=\"2\" y2=\"-0.5\" stroke=\"${wood}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgSnowCoveredRock(x: number, y: number, c: AssetColors, v: number): string {\n  const rock = c.rock;\n  const snow = c.snowCap;\n  if (v === 1) {\n    // Large\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"2.5\" ry=\"1.2\" fill=\"${rock}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"2\" ry=\"0.6\" fill=\"${snow}\" opacity=\"0.7\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Boulder\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"3\" ry=\"1.5\" fill=\"${c.boulder}\"/>`\n      + `<ellipse cx=\"-0.5\" cy=\"-0.5\" rx=\"2\" ry=\"1\" fill=\"${rock}\"/>`\n      + `<ellipse cx=\"-0.3\" cy=\"-1\" rx=\"2\" ry=\"0.7\" fill=\"${snow}\" opacity=\"0.6\"/>`\n      + `</g>`;\n  }\n  // Small\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"0\" rx=\"1.5\" ry=\"0.8\" fill=\"${rock}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"1.2\" ry=\"0.4\" fill=\"${snow}\" opacity=\"0.6\"/>`\n    + `</g>`;\n}\n\nfunction svgBareBush(x: number, y: number, c: AssetColors, v: number): string {\n  const branch = c.bareBranch;\n  const frost = c.frostWhite;\n  if (v === 1) {\n    // Wide\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"-2\" y2=\"-2\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"2\" y2=\"-1.5\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-2.5\" stroke=\"${branch}\" stroke-width=\"0.5\"/>`\n      + `<line x1=\"-1\" y1=\"-1.2\" x2=\"-2.5\" y2=\"-2\" stroke=\"${branch}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"1\" y1=\"-0.8\" x2=\"2.5\" y2=\"-1.5\" stroke=\"${branch}\" stroke-width=\"0.3\"/>`\n      + `<circle cx=\"-2\" cy=\"-2\" r=\"0.3\" fill=\"${frost}\" opacity=\"0.4\"/>`\n      + `<circle cx=\"2\" cy=\"-1.5\" r=\"0.3\" fill=\"${frost}\" opacity=\"0.4\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With berries\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"-1.5\" y2=\"-2\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"1.5\" y2=\"-1.8\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-2.5\" stroke=\"${branch}\" stroke-width=\"0.5\"/>`\n      + `<circle cx=\"-1\" cy=\"-1.8\" r=\"0.25\" fill=\"${c.scarfRed}\"/>`\n      + `<circle cx=\"0.5\" cy=\"-2\" r=\"0.25\" fill=\"${c.scarfRed}\"/>`\n      + `<circle cx=\"1\" cy=\"-1.2\" r=\"0.25\" fill=\"${c.scarfRed}\"/>`\n      + `</g>`;\n  }\n  // Small\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0.5\" x2=\"-1.5\" y2=\"-1.5\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"0\" y1=\"0.5\" x2=\"1.5\" y2=\"-1.5\" stroke=\"${branch}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-2\" stroke=\"${branch}\" stroke-width=\"0.5\"/>`\n    + `<circle cx=\"0\" cy=\"-2\" r=\"0.3\" fill=\"${frost}\" opacity=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgWinterBird(x: number, y: number, c: AssetColors, v: number): string {\n  if (v === 1) {\n    // Robin\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1\" rx=\"1.2\" ry=\"0.8\" fill=\"${c.winterBirdBrown}\"/>`\n      + `<circle cx=\"-0.8\" cy=\"-1.5\" r=\"0.5\" fill=\"${c.winterBirdBrown}\"/>`\n      + `<circle cx=\"-1\" cy=\"-1.6\" r=\"0.12\" fill=\"#fff\"/>`\n      + `<circle cx=\"-1\" cy=\"-1.6\" r=\"0.06\" fill=\"#222\"/>`\n      + `<polygon points=\"-1.3,-1.5 -1.8,-1.4 -1.3,-1.3\" fill=\"${c.snowmanCarrot}\"/>`\n      + `<ellipse cx=\"0.3\" cy=\"-0.8\" rx=\"0.6\" ry=\"0.4\" fill=\"${c.scarfRed}\" opacity=\"0.7\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Sparrow\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-1\" rx=\"1\" ry=\"0.7\" fill=\"${c.winterBirdBrown}\" opacity=\"0.8\"/>`\n      + `<circle cx=\"-0.6\" cy=\"-1.4\" r=\"0.45\" fill=\"${c.winterBirdBrown}\" opacity=\"0.9\"/>`\n      + `<circle cx=\"-0.8\" cy=\"-1.5\" r=\"0.1\" fill=\"#222\"/>`\n      + `<polygon points=\"-1,-1.4 -1.5,-1.3 -1,-1.2\" fill=\"${c.snowmanCarrot}\" opacity=\"0.8\"/>`\n      + `</g>`;\n  }\n  // Cardinal red\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-1\" rx=\"1.2\" ry=\"0.8\" fill=\"${c.winterBirdRed}\"/>`\n    + `<circle cx=\"-0.8\" cy=\"-1.5\" r=\"0.55\" fill=\"${c.winterBirdRed}\"/>`\n    + `<polygon points=\"-0.6,-2 -0.5,-2.5 -0.3,-2\" fill=\"${c.winterBirdRed}\"/>`\n    + `<circle cx=\"-1\" cy=\"-1.6\" r=\"0.12\" fill=\"#fff\"/>`\n    + `<circle cx=\"-1\" cy=\"-1.6\" r=\"0.06\" fill=\"#222\"/>`\n    + `<polygon points=\"-1.3,-1.5 -1.8,-1.4 -1.3,-1.3\" fill=\"${c.snowmanCarrot}\"/>`\n    + `<circle cx=\"-0.5\" cy=\"-1.3\" r=\"0.25\" fill=\"#222\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgFirewood(x: number, y: number, c: AssetColors, v: number): string {\n  const log = c.firewoodLog;\n  const snow = c.snowCap;\n  if (v === 1) {\n    // Large stack\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"-0.8\" cy=\"0\" rx=\"0.6\" ry=\"0.35\" fill=\"${log}\"/>`\n      + `<ellipse cx=\"0.8\" cy=\"0\" rx=\"0.6\" ry=\"0.35\" fill=\"${log}\"/>`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"0.6\" ry=\"0.35\" fill=\"${log}\"/>`\n      + `<ellipse cx=\"-0.4\" cy=\"-0.6\" rx=\"0.6\" ry=\"0.35\" fill=\"${log}\"/>`\n      + `<ellipse cx=\"0.4\" cy=\"-0.6\" rx=\"0.6\" ry=\"0.35\" fill=\"${log}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-1.2\" rx=\"0.6\" ry=\"0.35\" fill=\"${log}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"1.5\" ry=\"0.3\" fill=\"${snow}\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // In shelter\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"-2\" y1=\"0.5\" x2=\"-2\" y2=\"-2\" stroke=\"${c.bareBranch}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"2\" y1=\"0.5\" x2=\"2\" y2=\"-2\" stroke=\"${c.bareBranch}\" stroke-width=\"0.4\"/>`\n      + `<line x1=\"-2.2\" y1=\"-2\" x2=\"2.2\" y2=\"-2\" stroke=\"${c.bareBranch}\" stroke-width=\"0.5\"/>`\n      + `<ellipse cx=\"-0.5\" cy=\"0\" rx=\"0.5\" ry=\"0.3\" fill=\"${log}\"/>`\n      + `<ellipse cx=\"0.5\" cy=\"0\" rx=\"0.5\" ry=\"0.3\" fill=\"${log}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"0.5\" ry=\"0.3\" fill=\"${log}\"/>`\n      + `</g>`;\n  }\n  // Small pile\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"-0.5\" cy=\"0\" rx=\"0.5\" ry=\"0.3\" fill=\"${log}\"/>`\n    + `<ellipse cx=\"0.5\" cy=\"0\" rx=\"0.5\" ry=\"0.3\" fill=\"${log}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"0.5\" ry=\"0.3\" fill=\"${log}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-0.8\" rx=\"1\" ry=\"0.2\" fill=\"${snow}\" opacity=\"0.4\"/>`\n    + `</g>`;\n}\n\n// ── Spring Assets ──────────────────────────────────────────\n\nfunction svgCherryBlossom(x: number, y: number, c: AssetColors, v: number): string {\n  const pink = v === 2 ? c.cherryPetalWhite : c.cherryPetalPink;\n  const trunk = c.cherryTrunk;\n  if (v === 1) {\n    // Early bloom (sparse)\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-0.5\" y=\"-1\" width=\"1\" height=\"3\" fill=\"${trunk}\"/>`\n      + `<line x1=\"0\" y1=\"-1\" x2=\"-2\" y2=\"-3\" stroke=\"${c.cherryBranch}\" stroke-width=\"0.5\"/>`\n      + `<line x1=\"0\" y1=\"-1.5\" x2=\"2\" y2=\"-3.5\" stroke=\"${c.cherryBranch}\" stroke-width=\"0.5\"/>`\n      + `<circle cx=\"-2\" cy=\"-3.2\" r=\"1\" fill=\"${pink}\" opacity=\"0.5\"/>`\n      + `<circle cx=\"2\" cy=\"-3.7\" r=\"0.8\" fill=\"${pink}\" opacity=\"0.4\"/>`\n      + `<circle cx=\"0\" cy=\"-3\" r=\"0.6\" fill=\"${pink}\" opacity=\"0.3\"/>`\n      + `</g>`;\n  }\n  // Full bloom pink (or white for v=2)\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-0.5\" y=\"-1\" width=\"1\" height=\"3\" fill=\"${trunk}\"/>`\n    + `<line x1=\"0\" y1=\"-1\" x2=\"-2.5\" y2=\"-3\" stroke=\"${c.cherryBranch}\" stroke-width=\"0.5\"/>`\n    + `<line x1=\"0\" y1=\"-1.5\" x2=\"2.5\" y2=\"-3.5\" stroke=\"${c.cherryBranch}\" stroke-width=\"0.5\"/>`\n    + `<line x1=\"0\" y1=\"-2\" x2=\"0\" y2=\"-4\" stroke=\"${c.cherryBranch}\" stroke-width=\"0.5\"/>`\n    + `<circle cx=\"-2\" cy=\"-3.5\" r=\"1.5\" fill=\"${pink}\" opacity=\"0.7\"/>`\n    + `<circle cx=\"2\" cy=\"-4\" r=\"1.3\" fill=\"${pink}\" opacity=\"0.65\"/>`\n    + `<circle cx=\"0\" cy=\"-4.5\" r=\"1.4\" fill=\"${pink}\" opacity=\"0.7\"/>`\n    + `<circle cx=\"-0.5\" cy=\"-3\" r=\"1\" fill=\"${pink}\" opacity=\"0.5\"/>`\n    + `<circle cx=\"1\" cy=\"-3\" r=\"0.8\" fill=\"${pink}\" opacity=\"0.45\"/>`\n    + `</g>`;\n}\n\nfunction svgCherryBlossomSmall(x: number, y: number, c: AssetColors, v: number): string {\n  const pink = c.cherryPetalPink;\n  const trunk = c.cherryTrunk;\n  if (v === 1) {\n    // Bush-sized\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-0.3\" y=\"-0.5\" width=\"0.6\" height=\"2\" fill=\"${trunk}\"/>`\n      + `<circle cx=\"0\" cy=\"-1.5\" r=\"1.5\" fill=\"${pink}\" opacity=\"0.6\"/>`\n      + `<circle cx=\"-0.5\" cy=\"-1\" r=\"0.8\" fill=\"${pink}\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Weeping style\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-0.3\" y=\"-0.5\" width=\"0.6\" height=\"2\" fill=\"${trunk}\"/>`\n      + `<circle cx=\"0\" cy=\"-2\" r=\"1.2\" fill=\"${pink}\" opacity=\"0.6\"/>`\n      + `<path d=\"M-1,-1.5 Q-2,0 -1.5,0.5\" stroke=\"${c.cherryBranch}\" fill=\"none\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M1,-1.5 Q2,0 1.5,0.5\" stroke=\"${c.cherryBranch}\" fill=\"none\" stroke-width=\"0.3\"/>`\n      + `<circle cx=\"-1.5\" cy=\"0\" r=\"0.5\" fill=\"${pink}\" opacity=\"0.4\"/>`\n      + `<circle cx=\"1.5\" cy=\"0\" r=\"0.5\" fill=\"${pink}\" opacity=\"0.4\"/>`\n      + `</g>`;\n  }\n  // Sapling\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-0.3\" y=\"-0.5\" width=\"0.6\" height=\"2\" fill=\"${trunk}\"/>`\n    + `<circle cx=\"0\" cy=\"-1.5\" r=\"1\" fill=\"${pink}\" opacity=\"0.55\"/>`\n    + `</g>`;\n}\n\nfunction svgCherryPetals(x: number, y: number, c: AssetColors, v: number): string {\n  const pink = c.cherryPetalPink;\n  if (v === 1) {\n    // Piled\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"2\" ry=\"0.6\" fill=\"${pink}\" opacity=\"0.4\"/>`\n      + `<ellipse cx=\"0.5\" cy=\"-0.2\" rx=\"1\" ry=\"0.3\" fill=\"${pink}\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Swirling\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"-0.5\" cy=\"-0.5\" rx=\"0.3\" ry=\"0.15\" fill=\"${pink}\" opacity=\"0.6\" transform=\"rotate(-20,-0.5,-0.5)\"/>`\n      + `<ellipse cx=\"0.8\" cy=\"-1\" rx=\"0.3\" ry=\"0.15\" fill=\"${pink}\" opacity=\"0.5\" transform=\"rotate(30,0.8,-1)\"/>`\n      + `<ellipse cx=\"0\" cy=\"-1.5\" rx=\"0.25\" ry=\"0.12\" fill=\"${pink}\" opacity=\"0.55\" transform=\"rotate(-45,0,-1.5)\"/>`\n      + `<ellipse cx=\"-0.3\" cy=\"0.2\" rx=\"0.25\" ry=\"0.12\" fill=\"${pink}\" opacity=\"0.4\"/>`\n      + `</g>`;\n  }\n  // Scattered\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"-1\" cy=\"0\" rx=\"0.3\" ry=\"0.15\" fill=\"${pink}\" opacity=\"0.5\"/>`\n    + `<ellipse cx=\"0.5\" cy=\"0.3\" rx=\"0.25\" ry=\"0.12\" fill=\"${pink}\" opacity=\"0.45\"/>`\n    + `<ellipse cx=\"1.2\" cy=\"-0.2\" rx=\"0.3\" ry=\"0.15\" fill=\"${pink}\" opacity=\"0.4\"/>`\n    + `<ellipse cx=\"-0.3\" cy=\"-0.3\" rx=\"0.2\" ry=\"0.1\" fill=\"${pink}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgTulip(x: number, y: number, c: AssetColors, v: number): string {\n  const colors = [c.tulipRed, c.tulipYellow, c.tulipPurple];\n  const color = colors[v] || c.tulipRed;\n  const stem = c.tulipStem;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-2\" stroke=\"${stem}\" stroke-width=\"0.4\"/>`\n    + `<path d=\"M-0.6,-2 Q0,-3.5 0.6,-2\" fill=\"${color}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-2\" rx=\"0.5\" ry=\"0.2\" fill=\"${color}\" opacity=\"0.7\"/>`\n    + `<path d=\"M0.5,-0.5 Q1.5,-1 1.2,-0.2\" fill=\"${stem}\" opacity=\"0.6\"/>`\n    + `</g>`;\n}\n\nfunction svgTulipField(x: number, y: number, c: AssetColors, v: number): string {\n  const stem = c.tulipStem;\n  if (v === 1) {\n    // Single color row\n    const col = c.tulipRed;\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"-1.5\" y1=\"0.5\" x2=\"-1.5\" y2=\"-1.5\" stroke=\"${stem}\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M-2,-1.5 Q-1.5,-2.8 -1,-1.5\" fill=\"${col}\"/>`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-1.8\" stroke=\"${stem}\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M-0.5,-1.8 Q0,-3 0.5,-1.8\" fill=\"${col}\"/>`\n      + `<line x1=\"1.5\" y1=\"0.5\" x2=\"1.5\" y2=\"-1.3\" stroke=\"${stem}\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M1,-1.3 Q1.5,-2.5 2,-1.3\" fill=\"${col}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With greenery\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0.3\" rx=\"2.5\" ry=\"0.5\" fill=\"${stem}\" opacity=\"0.3\"/>`\n      + `<line x1=\"-1\" y1=\"0.3\" x2=\"-1\" y2=\"-1.5\" stroke=\"${stem}\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M-1.4,-1.5 Q-1,-2.5 -0.6,-1.5\" fill=\"${c.tulipYellow}\"/>`\n      + `<line x1=\"0.8\" y1=\"0.3\" x2=\"0.8\" y2=\"-1.8\" stroke=\"${stem}\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M0.4,-1.8 Q0.8,-3 1.2,-1.8\" fill=\"${c.tulipPurple}\"/>`\n      + `</g>`;\n  }\n  // Mixed colors\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"-1.5\" y1=\"0.5\" x2=\"-1.5\" y2=\"-1.5\" stroke=\"${stem}\" stroke-width=\"0.3\"/>`\n    + `<path d=\"M-2,-1.5 Q-1.5,-2.8 -1,-1.5\" fill=\"${c.tulipRed}\"/>`\n    + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-1.8\" stroke=\"${stem}\" stroke-width=\"0.3\"/>`\n    + `<path d=\"M-0.5,-1.8 Q0,-3 0.5,-1.8\" fill=\"${c.tulipYellow}\"/>`\n    + `<line x1=\"1.5\" y1=\"0.5\" x2=\"1.5\" y2=\"-1.3\" stroke=\"${stem}\" stroke-width=\"0.3\"/>`\n    + `<path d=\"M1,-1.3 Q1.5,-2.5 2,-1.3\" fill=\"${c.tulipPurple}\"/>`\n    + `</g>`;\n}\n\nfunction svgSprout(x: number, y: number, c: AssetColors, v: number): string {\n  const green = c.sproutGreen;\n  if (v === 1) {\n    // Pair\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"-0.5\" y1=\"0.5\" x2=\"-0.5\" y2=\"-0.5\" stroke=\"${green}\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M-0.5,-0.5 Q-0.5,-1.2 0,-1\" fill=\"${green}\"/>`\n      + `<line x1=\"0.5\" y1=\"0.5\" x2=\"0.5\" y2=\"-0.3\" stroke=\"${green}\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M0.5,-0.3 Q0.5,-1 1,-0.8\" fill=\"${green}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With tiny leaf\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-0.8\" stroke=\"${green}\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M0,-0.8 Q0,-1.5 0.5,-1.2\" fill=\"${green}\"/>`\n      + `<path d=\"M0,-0.3 Q0.5,-0.5 0.3,-0.1\" fill=\"${green}\" opacity=\"0.6\"/>`\n      + `</g>`;\n  }\n  // Single\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-0.5\" stroke=\"${green}\" stroke-width=\"0.3\"/>`\n    + `<path d=\"M0,-0.5 Q0,-1.3 0.5,-1\" fill=\"${green}\"/>`\n    + `</g>`;\n}\n\nfunction svgNest(x: number, y: number, c: AssetColors, v: number): string {\n  const brown = c.nestBrown;\n  const egg1 = c.eggBlue;\n  const egg2 = c.eggWhite;\n  if (v === 1) {\n    // 3 eggs\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"1.8\" ry=\"0.7\" fill=\"${brown}\"/>`\n      + `<ellipse cx=\"0\" cy=\"-0.2\" rx=\"1.3\" ry=\"0.4\" fill=\"${brown}\" opacity=\"0.7\"/>`\n      + `<ellipse cx=\"-0.5\" cy=\"-0.4\" rx=\"0.3\" ry=\"0.4\" fill=\"${egg1}\"/>`\n      + `<ellipse cx=\"0.2\" cy=\"-0.4\" rx=\"0.3\" ry=\"0.4\" fill=\"${egg1}\"/>`\n      + `<ellipse cx=\"0.8\" cy=\"-0.3\" rx=\"0.3\" ry=\"0.35\" fill=\"${egg2}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With baby bird\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"1.8\" ry=\"0.7\" fill=\"${brown}\"/>`\n      + `<ellipse cx=\"-0.5\" cy=\"-0.4\" rx=\"0.3\" ry=\"0.4\" fill=\"${egg1}\"/>`\n      + `<circle cx=\"0.5\" cy=\"-0.8\" r=\"0.5\" fill=\"${c.winterBirdBrown || '#8a6040'}\"/>`\n      + `<polygon points=\"0.5,-0.8 0.9,-0.7 0.5,-0.6\" fill=\"${c.snowmanCarrot || '#e07020'}\" opacity=\"0.8\"/>`\n      + `<circle cx=\"0.35\" cy=\"-0.9\" r=\"0.08\" fill=\"#222\"/>`\n      + `</g>`;\n  }\n  // 2 eggs\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"0\" rx=\"1.5\" ry=\"0.6\" fill=\"${brown}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-0.2\" rx=\"1\" ry=\"0.35\" fill=\"${brown}\" opacity=\"0.7\"/>`\n    + `<ellipse cx=\"-0.3\" cy=\"-0.4\" rx=\"0.3\" ry=\"0.4\" fill=\"${egg1}\"/>`\n    + `<ellipse cx=\"0.3\" cy=\"-0.4\" rx=\"0.3\" ry=\"0.4\" fill=\"${egg2}\"/>`\n    + `</g>`;\n}\n\nfunction svgLamb(x: number, y: number, c: AssetColors, v: number): string {\n  const wool = c.lambWool;\n  const head = c.winterBirdBrown || '#6a5040';\n  if (v === 1) {\n    // Playing\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"1.5\" ry=\"1\" fill=\"${wool}\"/>`\n      + `<circle cx=\"-1.2\" cy=\"-1.2\" r=\"0.5\" fill=\"${head}\"/>`\n      + `<circle cx=\"-1.4\" cy=\"-1.3\" r=\"0.08\" fill=\"#222\"/>`\n      + `<line x1=\"-0.5\" y1=\"0.5\" x2=\"-0.8\" y2=\"1.2\" stroke=\"${head}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"0.5\" y1=\"0.5\" x2=\"0.3\" y2=\"1.2\" stroke=\"${head}\" stroke-width=\"0.3\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With mother (larger sheep nearby)\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"2\" cy=\"-0.8\" rx=\"2\" ry=\"1.3\" fill=\"${c.sheep || wool}\"/>`\n      + `<circle cx=\"0.5\" cy=\"-1.5\" r=\"0.6\" fill=\"#444\"/>`\n      + `<ellipse cx=\"-1.5\" cy=\"-0.3\" rx=\"1.2\" ry=\"0.8\" fill=\"${wool}\"/>`\n      + `<circle cx=\"-2.3\" cy=\"-0.8\" r=\"0.4\" fill=\"${head}\"/>`\n      + `<circle cx=\"-2.5\" cy=\"-0.9\" r=\"0.06\" fill=\"#222\"/>`\n      + `</g>`;\n  }\n  // Standing\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-0.5\" rx=\"1.3\" ry=\"0.9\" fill=\"${wool}\"/>`\n    + `<circle cx=\"-1\" cy=\"-1\" r=\"0.45\" fill=\"${head}\"/>`\n    + `<circle cx=\"-1.2\" cy=\"-1.1\" r=\"0.07\" fill=\"#222\"/>`\n    + `<line x1=\"-0.5\" y1=\"0.3\" x2=\"-0.5\" y2=\"1\" stroke=\"${head}\" stroke-width=\"0.25\"/>`\n    + `<line x1=\"0.5\" y1=\"0.3\" x2=\"0.5\" y2=\"1\" stroke=\"${head}\" stroke-width=\"0.25\"/>`\n    + `</g>`;\n}\n\nfunction svgCrocus(x: number, y: number, c: AssetColors, v: number): string {\n  const colors = [c.crocusPurple, c.crocusYellow, c.cherryPetalWhite];\n  const color = colors[v] || c.crocusPurple;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-0.5\" stroke=\"${c.tulipStem || '#5a9a40'}\" stroke-width=\"0.3\"/>`\n    + `<path d=\"M-0.4,-0.5 Q0,-1.5 0.4,-0.5\" fill=\"${color}\"/>`\n    + `<line x1=\"0\" y1=\"-0.8\" x2=\"0\" y2=\"-1.2\" stroke=\"${c.crocusYellow}\" stroke-width=\"0.2\"/>`\n    + `</g>`;\n}\n\nfunction svgRainPuddle(x: number, y: number, c: AssetColors, v: number): string {\n  const water = c.poolWater || c.water;\n  if (v === 1) {\n    // With reflection\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"2\" ry=\"0.8\" fill=\"${water}\" opacity=\"0.4\"/>`\n      + `<ellipse cx=\"0.3\" cy=\"-0.1\" rx=\"0.8\" ry=\"0.3\" fill=\"#fff\" opacity=\"0.1\"/>`\n      + `<circle cx=\"-0.5\" cy=\"-0.2\" r=\"0.4\" fill=\"${water}\" opacity=\"0.15\" stroke=\"${water}\" stroke-width=\"0.2\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // In mud\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"1.8\" ry=\"0.7\" fill=\"${c.gardenSoil || '#5a4030'}\" opacity=\"0.3\"/>`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"1.5\" ry=\"0.5\" fill=\"${water}\" opacity=\"0.35\"/>`\n      + `</g>`;\n  }\n  // Small\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"0\" rx=\"1.5\" ry=\"0.6\" fill=\"${water}\" opacity=\"0.35\"/>`\n    + `<ellipse cx=\"0.2\" cy=\"-0.1\" rx=\"0.6\" ry=\"0.25\" fill=\"#fff\" opacity=\"0.1\"/>`\n    + `</g>`;\n}\n\nfunction svgBirdhouse(x: number, y: number, c: AssetColors, v: number): string {\n  const wood = c.birdhouseWood;\n  if (v === 1) {\n    // Painted\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-2\" stroke=\"${wood}\" stroke-width=\"0.5\"/>`\n      + `<rect x=\"-1\" y=\"-3.5\" width=\"2\" height=\"1.5\" fill=\"${c.parasolBlue || '#4080d0'}\"/>`\n      + `<polygon points=\"-1.2,-3.5 0,-4.5 1.2,-3.5\" fill=\"${c.tulipRed || '#e04050'}\"/>`\n      + `<circle cx=\"0\" cy=\"-3\" r=\"0.3\" fill=\"#333\"/>`\n      + `<line x1=\"0\" y1=\"-2.7\" x2=\"0.5\" y2=\"-2.5\" stroke=\"${wood}\" stroke-width=\"0.3\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With bird\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-2\" stroke=\"${wood}\" stroke-width=\"0.5\"/>`\n      + `<rect x=\"-1\" y=\"-3.5\" width=\"2\" height=\"1.5\" fill=\"${wood}\"/>`\n      + `<polygon points=\"-1.2,-3.5 0,-4.5 1.2,-3.5\" fill=\"${wood}\" opacity=\"0.8\"/>`\n      + `<circle cx=\"0\" cy=\"-3\" r=\"0.3\" fill=\"#333\"/>`\n      + `<circle cx=\"1.2\" cy=\"-3.8\" r=\"0.4\" fill=\"${c.winterBirdBrown || '#8a6040'}\"/>`\n      + `<ellipse cx=\"1.2\" cy=\"-3.5\" rx=\"0.5\" ry=\"0.3\" fill=\"${c.winterBirdBrown || '#8a6040'}\"/>`\n      + `</g>`;\n  }\n  // Classic\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-2\" stroke=\"${wood}\" stroke-width=\"0.5\"/>`\n    + `<rect x=\"-1\" y=\"-3.5\" width=\"2\" height=\"1.5\" fill=\"${wood}\"/>`\n    + `<polygon points=\"-1.2,-3.5 0,-4.5 1.2,-3.5\" fill=\"${wood}\" opacity=\"0.8\"/>`\n    + `<circle cx=\"0\" cy=\"-3\" r=\"0.3\" fill=\"#333\"/>`\n    + `<line x1=\"0\" y1=\"-2.7\" x2=\"0.5\" y2=\"-2.5\" stroke=\"${wood}\" stroke-width=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgGardenBed(x: number, y: number, c: AssetColors, v: number): string {\n  const soil = c.gardenSoil;\n  const green = c.sproutGreen;\n  if (v === 1) {\n    // Sprouts showing\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-2.5\" y=\"-0.3\" width=\"5\" height=\"1\" rx=\"0.3\" fill=\"${soil}\"/>`\n      + `<line x1=\"-1.5\" y1=\"-0.3\" x2=\"-1.5\" y2=\"-1\" stroke=\"${green}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"0\" y1=\"-0.3\" x2=\"0\" y2=\"-0.8\" stroke=\"${green}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"1.5\" y1=\"-0.3\" x2=\"1.5\" y2=\"-1.1\" stroke=\"${green}\" stroke-width=\"0.3\"/>`\n      + `<path d=\"M-1.5,-1 Q-1.5,-1.5 -1,-1.2\" fill=\"${green}\"/>`\n      + `<path d=\"M1.5,-1.1 Q1.5,-1.6 2,-1.3\" fill=\"${green}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With fence\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-2.5\" y=\"-0.3\" width=\"5\" height=\"1\" rx=\"0.3\" fill=\"${soil}\"/>`\n      + `<line x1=\"-2.5\" y1=\"-0.8\" x2=\"2.5\" y2=\"-0.8\" stroke=\"${c.fence}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"-2\" y1=\"-1.3\" x2=\"-2\" y2=\"0\" stroke=\"${c.fence}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"2\" y1=\"-1.3\" x2=\"2\" y2=\"0\" stroke=\"${c.fence}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"0\" y1=\"-0.3\" x2=\"0\" y2=\"-0.7\" stroke=\"${green}\" stroke-width=\"0.3\"/>`\n      + `</g>`;\n  }\n  // Just planted\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2\" y=\"-0.3\" width=\"4\" height=\"0.8\" rx=\"0.3\" fill=\"${soil}\"/>`\n    + `<line x1=\"-1\" y1=\"-0.1\" x2=\"-1\" y2=\"-0.1\" stroke=\"${soil}\" stroke-width=\"0.8\"/>`\n    + `<line x1=\"0.5\" y1=\"-0.1\" x2=\"0.5\" y2=\"-0.1\" stroke=\"${soil}\" stroke-width=\"0.8\"/>`\n    + `</g>`;\n}\n\n// ── Summer Assets ──────────────────────────────────────────\n\nfunction svgParasol(x: number, y: number, c: AssetColors, v: number): string {\n  const colors = [c.parasolRed, c.parasolBlue, c.parasolYellow];\n  const color = colors[v] || c.parasolRed;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-4\" stroke=\"${c.bareBranch || '#6a5a4a'}\" stroke-width=\"0.4\"/>`\n    + `<path d=\"M-3,-4 Q0,-6 3,-4 L0,-4.5 Z\" fill=\"${color}\"/>`\n    + `<path d=\"M-1.5,-4.2 Q0,-5 1.5,-4.2\" fill=\"${c.parasolStripe}\" opacity=\"0.3\"/>`\n    + `</g>`;\n}\n\nfunction svgBeachTowel(x: number, y: number, c: AssetColors, v: number): string {\n  const colors = [c.beachTowelA, c.beachTowelB, c.parasolYellow];\n  const color = colors[v] || c.beachTowelA;\n  if (v === 2) {\n    // With sunglasses\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-2.5\" y=\"-0.3\" width=\"5\" height=\"1.5\" rx=\"0.3\" fill=\"${color}\" opacity=\"0.8\"/>`\n      + `<circle cx=\"-0.3\" cy=\"0.2\" r=\"0.35\" fill=\"#333\" opacity=\"0.6\"/>`\n      + `<circle cx=\"0.4\" cy=\"0.2\" r=\"0.35\" fill=\"#333\" opacity=\"0.6\"/>`\n      + `<line x1=\"-0.3\" y1=\"0.2\" x2=\"0.4\" y2=\"0.2\" stroke=\"#333\" stroke-width=\"0.15\"/>`\n      + `</g>`;\n  }\n  // Striped or solid\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2.5\" y=\"-0.3\" width=\"5\" height=\"1.5\" rx=\"0.3\" fill=\"${color}\" opacity=\"0.8\"/>`\n    + (v === 0 ? `<line x1=\"-2.5\" y1=\"0.3\" x2=\"2.5\" y2=\"0.3\" stroke=\"${c.parasolStripe}\" stroke-width=\"0.3\" opacity=\"0.4\"/>` : '')\n    + `</g>`;\n}\n\nfunction svgSandcastleSummer(x: number, y: number, c: AssetColors, v: number): string {\n  const sand = c.sandcastleWall;\n  if (v === 1) {\n    // With flag\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-1.5\" y=\"-1\" width=\"3\" height=\"1.5\" fill=\"${sand}\"/>`\n      + `<rect x=\"-0.8\" y=\"-2\" width=\"1.6\" height=\"1\" fill=\"${sand}\"/>`\n      + `<rect x=\"-0.4\" y=\"-2.8\" width=\"0.8\" height=\"0.8\" fill=\"${sand}\"/>`\n      + `<line x1=\"0\" y1=\"-2.8\" x2=\"0\" y2=\"-3.5\" stroke=\"${c.bareBranch || '#6a5a4a'}\" stroke-width=\"0.2\"/>`\n      + `<polygon points=\"0,-3.5 0.8,-3.2 0,-2.9\" fill=\"${c.scarfRed || '#cc3030'}\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Elaborate\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-2\" y=\"-0.5\" width=\"4\" height=\"1\" fill=\"${sand}\"/>`\n      + `<rect x=\"-1.5\" y=\"-1.5\" width=\"1.2\" height=\"1\" fill=\"${sand}\"/>`\n      + `<rect x=\"0.3\" y=\"-1.5\" width=\"1.2\" height=\"1\" fill=\"${sand}\"/>`\n      + `<rect x=\"-0.5\" y=\"-2.5\" width=\"1\" height=\"1\" fill=\"${sand}\"/>`\n      + `<polygon points=\"-1.5,-1.5 -0.9,-2 -0.3,-1.5\" fill=\"${sand}\" opacity=\"0.8\"/>`\n      + `<polygon points=\"0.3,-1.5 0.9,-2 1.5,-1.5\" fill=\"${sand}\" opacity=\"0.8\"/>`\n      + `</g>`;\n  }\n  // Simple\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-1.2\" y=\"-0.5\" width=\"2.4\" height=\"1\" fill=\"${sand}\"/>`\n    + `<rect x=\"-0.6\" y=\"-1.3\" width=\"1.2\" height=\"0.8\" fill=\"${sand}\"/>`\n    + `<polygon points=\"-0.6,-1.3 0,-1.8 0.6,-1.3\" fill=\"${sand}\" opacity=\"0.8\"/>`\n    + `</g>`;\n}\n\nfunction svgSurfboard(x: number, y: number, c: AssetColors, v: number): string {\n  const body = c.surfboardBody;\n  const stripe = c.surfboardStripe;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<ellipse cx=\"0\" cy=\"-2\" rx=\"0.8\" ry=\"3\" fill=\"${body}\" transform=\"rotate(${v === 1 ? -10 : v === 2 ? 10 : 5})\"/>`\n    + `<line x1=\"0\" y1=\"-3.5\" x2=\"0\" y2=\"-0.5\" stroke=\"${stripe}\" stroke-width=\"0.3\" opacity=\"0.6\" transform=\"rotate(${v === 1 ? -10 : v === 2 ? 10 : 5})\"/>`\n    + `</g>`;\n}\n\nfunction svgIceCreamCartAsset(x: number, y: number, c: AssetColors, v: number): string {\n  const cart = c.iceCreamCart;\n  const umbrella = c.iceCreamUmbrella;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-1.5\" y=\"-1.5\" width=\"3\" height=\"2\" rx=\"0.3\" fill=\"${cart}\"/>`\n    + `<circle cx=\"-1\" cy=\"0.8\" r=\"0.4\" fill=\"#555\"/>`\n    + `<circle cx=\"1\" cy=\"0.8\" r=\"0.4\" fill=\"#555\"/>`\n    + `<line x1=\"0\" y1=\"-1.5\" x2=\"0\" y2=\"-3.5\" stroke=\"${c.bareBranch || '#6a5a4a'}\" stroke-width=\"0.3\"/>`\n    + `<path d=\"M-2,-3.5 Q0,-4.5 2,-3.5\" fill=\"${umbrella}\"/>`\n    + (v === 1 ? `<polygon points=\"1.5,-2 2.5,-2.3 1.5,-2.5\" fill=\"${c.scarfRed || '#cc3030'}\"/>` : '')\n    + (v === 2 ? `<rect x=\"-0.5\" y=\"-2.5\" width=\"1\" height=\"0.8\" rx=\"0.2\" fill=\"${c.sunflowerPetal || '#f0c820'}\"/>` : '')\n    + `</g>`;\n}\n\nfunction svgHammock(x: number, y: number, c: AssetColors, v: number): string {\n  const fabric = c.hammockFabric;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"-3\" y1=\"0\" x2=\"-3\" y2=\"-3\" stroke=\"${c.bareBranch || '#6a5a4a'}\" stroke-width=\"0.5\"/>`\n    + `<line x1=\"3\" y1=\"0\" x2=\"3\" y2=\"-3\" stroke=\"${c.bareBranch || '#6a5a4a'}\" stroke-width=\"0.5\"/>`\n    + `<path d=\"M-3,-2.5 Q0,-0.5 3,-2.5\" fill=\"none\" stroke=\"${fabric}\" stroke-width=\"0.8\"/>`\n    + `<path d=\"M-2.5,-2.2 Q0,-0.2 2.5,-2.2\" fill=\"${fabric}\" opacity=\"0.5\"/>`\n    + (v === 2 ? `<rect x=\"-1\" y=\"-1.8\" width=\"2\" height=\"1\" rx=\"0.3\" fill=\"${c.beachTowelA || '#e05050'}\" opacity=\"0.4\"/>` : '')\n    + `</g>`;\n}\n\nfunction svgSunflower(x: number, y: number, c: AssetColors, v: number): string {\n  const petal = c.sunflowerPetal;\n  const center = c.sunflowerCenter;\n  const stem = c.tulipStem || '#5a9a40';\n  const count = v === 2 ? 3 : v === 1 ? 2 : 1;\n  const parts: string[] = [];\n  for (let i = 0; i < count; i++) {\n    const ox = i * 1.5 - (count - 1) * 0.75;\n    const h = 3 + i * 0.5;\n    parts.push(\n      `<line x1=\"${ox}\" y1=\"0.5\" x2=\"${ox}\" y2=\"${-h}\" stroke=\"${stem}\" stroke-width=\"0.4\"/>`,\n      `<circle cx=\"${ox}\" cy=\"${-h}\" r=\"0.6\" fill=\"${center}\"/>`,\n    );\n    for (let p = 0; p < 8; p++) {\n      const angle = (p / 8) * Math.PI * 2;\n      const px = ox + Math.cos(angle) * 1.2;\n      const py = -h + Math.sin(angle) * 1.2;\n      parts.push(`<ellipse cx=\"${px.toFixed(1)}\" cy=\"${py.toFixed(1)}\" rx=\"0.5\" ry=\"0.25\" fill=\"${petal}\" transform=\"rotate(${(p * 45).toFixed(0)},${px.toFixed(1)},${py.toFixed(1)})\"/>`);\n    }\n  }\n  return `<g transform=\"translate(${x},${y})\">${parts.join('')}</g>`;\n}\n\nfunction svgWatermelon(x: number, y: number, c: AssetColors, v: number): string {\n  const rind = c.watermelonRind;\n  const flesh = c.watermelonFlesh;\n  const seed = c.watermelonSeed;\n  if (v === 0) {\n    // Whole\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<ellipse cx=\"0\" cy=\"0\" rx=\"1.5\" ry=\"1\" fill=\"${rind}\"/>`\n      + `<line x1=\"-1\" y1=\"0\" x2=\"1\" y2=\"0\" stroke=\"${rind}\" stroke-width=\"0.15\" opacity=\"0.5\"/>`\n      + `</g>`;\n  }\n  if (v === 1) {\n    // Half\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<path d=\"M-1.5,0 A1.5,1 0 0 1 1.5,0 Z\" fill=\"${rind}\"/>`\n      + `<path d=\"M-1.2,0 A1.2,0.8 0 0 1 1.2,0 Z\" fill=\"${flesh}\"/>`\n      + `<circle cx=\"-0.3\" cy=\"-0.2\" r=\"0.12\" fill=\"${seed}\"/>`\n      + `<circle cx=\"0.4\" cy=\"-0.3\" r=\"0.12\" fill=\"${seed}\"/>`\n      + `</g>`;\n  }\n  // Slice\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<path d=\"M-1,0 Q0,-1.5 1,0 Z\" fill=\"${rind}\"/>`\n    + `<path d=\"M-0.8,0 Q0,-1.2 0.8,0 Z\" fill=\"${flesh}\"/>`\n    + `<circle cx=\"-0.2\" cy=\"-0.3\" r=\"0.1\" fill=\"${seed}\"/>`\n    + `<circle cx=\"0.3\" cy=\"-0.4\" r=\"0.1\" fill=\"${seed}\"/>`\n    + `</g>`;\n}\n\nfunction svgSprinkler(x: number, y: number, c: AssetColors, v: number): string {\n  const metal = c.sprinklerMetal;\n  const water = c.poolWater || c.water;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"0.5\" x2=\"0\" y2=\"-0.5\" stroke=\"${metal}\" stroke-width=\"0.5\"/>`\n    + `<circle cx=\"0\" cy=\"-0.8\" r=\"0.4\" fill=\"${metal}\"/>`\n    + `<line x1=\"-1.5\" y1=\"-2\" x2=\"0\" y2=\"-0.8\" stroke=\"${water}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n    + `<line x1=\"1.5\" y1=\"-2\" x2=\"0\" y2=\"-0.8\" stroke=\"${water}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n    + `<line x1=\"0\" y1=\"-2.5\" x2=\"0\" y2=\"-0.8\" stroke=\"${water}\" stroke-width=\"0.2\" opacity=\"0.4\"/>`\n    + (v === 2 ? `<path d=\"M-1.5,-2 Q0,-1.5 1.5,-2\" fill=\"none\" stroke=\"${water}\" stroke-width=\"0.15\" opacity=\"0.3\"/>` : '')\n    + `</g>`;\n}\n\nfunction svgLemonade(x: number, y: number, c: AssetColors, v: number): string {\n  const stand = c.lemonadeStand;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-2\" y=\"-1.5\" width=\"4\" height=\"2\" fill=\"${stand}\"/>`\n    + `<line x1=\"-2\" y1=\"-1.5\" x2=\"-2\" y2=\"0.8\" stroke=\"${c.bareBranch || '#6a5a4a'}\" stroke-width=\"0.4\"/>`\n    + `<line x1=\"2\" y1=\"-1.5\" x2=\"2\" y2=\"0.8\" stroke=\"${c.bareBranch || '#6a5a4a'}\" stroke-width=\"0.4\"/>`\n    + (v >= 1 ? `<rect x=\"-1\" y=\"-2\" width=\"2\" height=\"0.5\" rx=\"0.2\" fill=\"${stand}\" opacity=\"0.8\"/>` : '')\n    + `<circle cx=\"0\" cy=\"-0.8\" r=\"0.4\" fill=\"${c.sunflowerPetal || '#f0c820'}\" opacity=\"0.7\"/>`\n    + `</g>`;\n}\n\nfunction svgFirefliesAsset(x: number, y: number, c: AssetColors, v: number): string {\n  const glow = c.lanternGlow || '#ffc840';\n  const count = v === 0 ? 3 : v === 1 ? 6 : 1;\n  const parts: string[] = [];\n  if (v === 2) {\n    // Jar\n    parts.push(`<rect x=\"-0.5\" y=\"-2\" width=\"1\" height=\"1.5\" rx=\"0.2\" fill=\"#fff\" opacity=\"0.15\"/>`);\n    parts.push(`<circle cx=\"0\" cy=\"-1.5\" r=\"0.2\" fill=\"${glow}\" opacity=\"0.8\"/>`);\n    parts.push(`<circle cx=\"-0.2\" cy=\"-1\" r=\"0.15\" fill=\"${glow}\" opacity=\"0.6\"/>`);\n  } else {\n    for (let i = 0; i < count; i++) {\n      const fx = (i - count / 2) * 1.5;\n      const fy = -1 - i * 0.5;\n      parts.push(`<circle cx=\"${fx}\" cy=\"${fy}\" r=\"0.2\" fill=\"${glow}\" opacity=\"0.7\"/>`);\n      parts.push(`<circle cx=\"${fx}\" cy=\"${fy}\" r=\"0.5\" fill=\"${glow}\" opacity=\"0.15\"/>`);\n    }\n  }\n  return `<g transform=\"translate(${x},${y})\">${parts.join('')}</g>`;\n}\n\nfunction svgSwimmingPool(x: number, y: number, c: AssetColors, v: number): string {\n  const water = c.poolWater;\n  const edge = c.poolEdge;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-3\" y=\"-1\" width=\"6\" height=\"2.5\" rx=\"0.5\" fill=\"${edge}\"/>`\n    + `<rect x=\"-2.5\" y=\"-0.5\" width=\"5\" height=\"1.5\" rx=\"0.3\" fill=\"${water}\" opacity=\"0.7\"/>`\n    + (v === 1 ? `<ellipse cx=\"0.5\" cy=\"0\" rx=\"0.8\" ry=\"0.3\" fill=\"${c.parasolYellow || '#e8c820'}\" opacity=\"0.5\"/>` : '')\n    + (v === 2 ? `<line x1=\"2.5\" y1=\"-1\" x2=\"2.5\" y2=\"-2.5\" stroke=\"${edge}\" stroke-width=\"0.3\"/>` : '')\n    + `</g>`;\n}\n\n// ── Autumn Assets ──────────────────────────────────────────\n\nfunction svgAutumnMaple(x: number, y: number, c: AssetColors, v: number): string {\n  const colors = [c.mapleRed, c.mapleCrimson, c.mapleOrange];\n  const color = colors[v] || c.mapleRed;\n  const trunk = c.trunk;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-0.5\" y=\"-1\" width=\"1\" height=\"3\" fill=\"${trunk}\"/>`\n    + `<circle cx=\"0\" cy=\"-3.5\" r=\"2.5\" fill=\"${color}\" opacity=\"0.75\"/>`\n    + `<circle cx=\"-1.5\" cy=\"-2.5\" r=\"1.5\" fill=\"${color}\" opacity=\"0.6\"/>`\n    + `<circle cx=\"1.5\" cy=\"-2.5\" r=\"1.5\" fill=\"${color}\" opacity=\"0.6\"/>`\n    + `<circle cx=\"0\" cy=\"-5\" r=\"1.2\" fill=\"${color}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgAutumnOak(x: number, y: number, c: AssetColors, v: number): string {\n  const colors = [c.oakGold, c.oakBrown, c.oakGold];\n  const color = colors[v] || c.oakGold;\n  const mix = v === 2 ? c.sproutGreen || '#80d050' : color;\n  const trunk = c.trunk;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-0.6\" y=\"-1\" width=\"1.2\" height=\"3.5\" fill=\"${trunk}\"/>`\n    + `<circle cx=\"0\" cy=\"-3\" r=\"2.8\" fill=\"${color}\" opacity=\"0.7\"/>`\n    + `<circle cx=\"-1\" cy=\"-4\" r=\"1.5\" fill=\"${color}\" opacity=\"0.6\"/>`\n    + `<circle cx=\"1.5\" cy=\"-3.5\" r=\"1.3\" fill=\"${mix}\" opacity=\"0.55\"/>`\n    + `</g>`;\n}\n\nfunction svgAutumnBirch(x: number, y: number, c: AssetColors, v: number): string {\n  const yellow = c.birchYellow;\n  const bark = c.birchBark;\n  if (v === 2) {\n    // Half-bare\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-0.4\" y=\"-1\" width=\"0.8\" height=\"4\" fill=\"${bark}\"/>`\n      + `<line x1=\"0\" y1=\"-2\" x2=\"-2\" y2=\"-3.5\" stroke=\"${bark}\" stroke-width=\"0.3\"/>`\n      + `<line x1=\"0\" y1=\"-3\" x2=\"1.5\" y2=\"-4\" stroke=\"${bark}\" stroke-width=\"0.3\"/>`\n      + `<circle cx=\"-1.5\" cy=\"-3.8\" r=\"1\" fill=\"${yellow}\" opacity=\"0.4\"/>`\n      + `<circle cx=\"1\" cy=\"-4.2\" r=\"0.8\" fill=\"${yellow}\" opacity=\"0.35\"/>`\n      + `</g>`;\n  }\n  // Bright yellow / pale gold\n  const opacity = v === 1 ? 0.55 : 0.7;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-0.4\" y=\"-1\" width=\"0.8\" height=\"4\" fill=\"${bark}\"/>`\n    + `<circle cx=\"0\" cy=\"-3\" r=\"2\" fill=\"${yellow}\" opacity=\"${opacity}\"/>`\n    + `<circle cx=\"-1\" cy=\"-2\" r=\"1.2\" fill=\"${yellow}\" opacity=\"${opacity * 0.8}\"/>`\n    + `<circle cx=\"1\" cy=\"-3.5\" r=\"1\" fill=\"${yellow}\" opacity=\"${opacity * 0.7}\"/>`\n    + `</g>`;\n}\n\nfunction svgAutumnGinkgo(x: number, y: number, c: AssetColors, v: number): string {\n  const yellow = c.ginkgoYellow;\n  const trunk = c.trunk;\n  if (v === 1) {\n    // Half-fallen\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-0.4\" y=\"-1\" width=\"0.8\" height=\"3\" fill=\"${trunk}\"/>`\n      + `<circle cx=\"0\" cy=\"-3\" r=\"1.8\" fill=\"${yellow}\" opacity=\"0.55\"/>`\n      + `<ellipse cx=\"0\" cy=\"0.5\" rx=\"2\" ry=\"0.4\" fill=\"${yellow}\" opacity=\"0.3\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // Golden carpet\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<rect x=\"-0.4\" y=\"-1\" width=\"0.8\" height=\"3\" fill=\"${trunk}\"/>`\n      + `<circle cx=\"0\" cy=\"-3\" r=\"1.5\" fill=\"${yellow}\" opacity=\"0.4\"/>`\n      + `<ellipse cx=\"0\" cy=\"0.5\" rx=\"3\" ry=\"0.8\" fill=\"${yellow}\" opacity=\"0.35\"/>`\n      + `</g>`;\n  }\n  // Full yellow\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-0.4\" y=\"-1\" width=\"0.8\" height=\"3\" fill=\"${trunk}\"/>`\n    + `<circle cx=\"0\" cy=\"-3.2\" r=\"2\" fill=\"${yellow}\" opacity=\"0.7\"/>`\n    + `<circle cx=\"-0.8\" cy=\"-2.5\" r=\"1\" fill=\"${yellow}\" opacity=\"0.5\"/>`\n    + `<circle cx=\"0.8\" cy=\"-2.5\" r=\"1\" fill=\"${yellow}\" opacity=\"0.5\"/>`\n    + `</g>`;\n}\n\nfunction svgFallenLeaves(x: number, y: number, c: AssetColors, v: number): string {\n  const colors = v === 0\n    ? [c.fallenLeafRed, c.fallenLeafOrange]\n    : v === 1\n      ? [c.fallenLeafGold, c.fallenLeafBrown]\n      : [c.fallenLeafRed, c.fallenLeafGold, c.fallenLeafOrange];\n  const parts: string[] = [];\n  for (let i = 0; i < colors.length; i++) {\n    const lx = (i - colors.length / 2) * 1.2;\n    const ly = (i % 2) * 0.3;\n    const rot = (i * 35) - 20;\n    parts.push(`<ellipse cx=\"${lx}\" cy=\"${ly}\" rx=\"0.6\" ry=\"0.25\" fill=\"${colors[i]}\" opacity=\"0.7\" transform=\"rotate(${rot},${lx},${ly})\"/>`);\n  }\n  return `<g transform=\"translate(${x},${y})\">${parts.join('')}</g>`;\n}\n\nfunction svgLeafSwirl(x: number, y: number, c: AssetColors, v: number): string {\n  const colors = v === 1\n    ? [c.fallenLeafRed, c.mapleRed]\n    : v === 2\n      ? [c.fallenLeafGold, c.oakGold]\n      : [c.fallenLeafRed, c.fallenLeafOrange, c.fallenLeafGold];\n  const parts: string[] = [];\n  for (let i = 0; i < colors.length; i++) {\n    const angle = (i / colors.length) * Math.PI * 2;\n    const radius = 1 + i * 0.3;\n    const lx = Math.cos(angle) * radius;\n    const ly = -1.5 + Math.sin(angle) * radius * 0.5;\n    parts.push(`<ellipse cx=\"${lx.toFixed(1)}\" cy=\"${ly.toFixed(1)}\" rx=\"0.4\" ry=\"0.2\" fill=\"${colors[i]}\" opacity=\"0.65\" transform=\"rotate(${(i * 60).toFixed(0)},${lx.toFixed(1)},${ly.toFixed(1)})\"/>`);\n  }\n  return `<g transform=\"translate(${x},${y})\">${parts.join('')}</g>`;\n}\n\nfunction svgAcorn(x: number, y: number, c: AssetColors, v: number): string {\n  const body = c.acornBody;\n  const cap = c.acornCap;\n  const count = v === 1 ? 2 : 1;\n  const parts: string[] = [];\n  for (let i = 0; i < count; i++) {\n    const ax = i * 1 - (count - 1) * 0.5;\n    if (v === 2) {\n      // Cap separated\n      parts.push(`<ellipse cx=\"${ax}\" cy=\"0\" rx=\"0.4\" ry=\"0.5\" fill=\"${body}\"/>`);\n      parts.push(`<ellipse cx=\"${ax + 0.5}\" cy=\"0.1\" rx=\"0.4\" ry=\"0.25\" fill=\"${cap}\"/>`);\n    } else {\n      parts.push(`<ellipse cx=\"${ax}\" cy=\"0\" rx=\"0.4\" ry=\"0.5\" fill=\"${body}\"/>`);\n      parts.push(`<path d=\"M${ax - 0.45},-0.15 Q${ax},-0.45 ${ax + 0.45},-0.15\" fill=\"${cap}\"/>`);\n      parts.push(`<line x1=\"${ax}\" y1=\"-0.35\" x2=\"${ax}\" y2=\"-0.55\" stroke=\"${cap}\" stroke-width=\"0.15\"/>`);\n    }\n  }\n  return `<g transform=\"translate(${x},${y})\">${parts.join('')}</g>`;\n}\n\nfunction svgCornStalkAsset(x: number, y: number, c: AssetColors, v: number): string {\n  const stalk = c.cornStalkColor;\n  const ear = c.cornEar;\n  const count = v === 1 ? 3 : 1;\n  const parts: string[] = [];\n  for (let i = 0; i < count; i++) {\n    const sx = i * 1.2 - (count - 1) * 0.6;\n    parts.push(`<line x1=\"${sx}\" y1=\"0.5\" x2=\"${sx}\" y2=\"-3\" stroke=\"${stalk}\" stroke-width=\"0.4\"/>`);\n    if (v === 2 || v === 0) {\n      parts.push(`<ellipse cx=\"${sx + 0.5}\" cy=\"-1.5\" rx=\"0.3\" ry=\"0.7\" fill=\"${ear}\"/>`);\n    }\n    parts.push(`<path d=\"M${sx},-2 Q${sx + 1.5},-2.5 ${sx + 1},-1\" fill=\"${stalk}\" opacity=\"0.5\"/>`);\n    parts.push(`<path d=\"M${sx},-1.5 Q${sx - 1.5},-2 ${sx - 1},-0.5\" fill=\"${stalk}\" opacity=\"0.5\"/>`);\n  }\n  return `<g transform=\"translate(${x},${y})\">${parts.join('')}</g>`;\n}\n\nfunction svgScarecrowAutumn(x: number, y: number, c: AssetColors, v: number): string {\n  const hat = c.scarecrowHat || '#5a4020';\n  const body = c.scarecrow || '#8a7040';\n  if (v === 1) {\n    // With crow\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"1\" x2=\"0\" y2=\"-3\" stroke=\"${body}\" stroke-width=\"0.5\"/>`\n      + `<line x1=\"-2\" y1=\"-1.5\" x2=\"2\" y2=\"-1.5\" stroke=\"${body}\" stroke-width=\"0.4\"/>`\n      + `<circle cx=\"0\" cy=\"-3.5\" r=\"0.8\" fill=\"${c.lambWool || '#f0ece5'}\"/>`\n      + `<rect x=\"-1.2\" y=\"-4.5\" width=\"2.4\" height=\"0.5\" fill=\"${hat}\"/>`\n      + `<rect x=\"-0.7\" y=\"-5\" width=\"1.4\" height=\"0.6\" fill=\"${hat}\"/>`\n      + `<circle cx=\"1.8\" cy=\"-2\" r=\"0.4\" fill=\"#333\"/>`\n      + `<polygon points=\"1.8,-2 2.5,-2.1 1.8,-1.8\" fill=\"#333\"/>`\n      + `</g>`;\n  }\n  if (v === 2) {\n    // With pumpkin head\n    return `<g transform=\"translate(${x},${y})\">`\n      + `<line x1=\"0\" y1=\"1\" x2=\"0\" y2=\"-3\" stroke=\"${body}\" stroke-width=\"0.5\"/>`\n      + `<line x1=\"-2\" y1=\"-1.5\" x2=\"2\" y2=\"-1.5\" stroke=\"${body}\" stroke-width=\"0.4\"/>`\n      + `<circle cx=\"0\" cy=\"-3.8\" r=\"1\" fill=\"${c.pumpkin || '#d07020'}\"/>`\n      + `<polygon points=\"-0.3,-3.8 0,-4.3 0.3,-3.8\" fill=\"#333\"/>`\n      + `<polygon points=\"0,-3.5 0.5,-3.3 0,-3.2\" fill=\"#333\"/>`\n      + `</g>`;\n  }\n  // Classic\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<line x1=\"0\" y1=\"1\" x2=\"0\" y2=\"-3\" stroke=\"${body}\" stroke-width=\"0.5\"/>`\n    + `<line x1=\"-2\" y1=\"-1.5\" x2=\"2\" y2=\"-1.5\" stroke=\"${body}\" stroke-width=\"0.4\"/>`\n    + `<circle cx=\"0\" cy=\"-3.5\" r=\"0.8\" fill=\"${c.lambWool || '#f0ece5'}\"/>`\n    + `<rect x=\"-1.2\" y=\"-4.5\" width=\"2.4\" height=\"0.5\" fill=\"${hat}\"/>`\n    + `<rect x=\"-0.7\" y=\"-5\" width=\"1.4\" height=\"0.6\" fill=\"${hat}\"/>`\n    + `<ellipse cx=\"0\" cy=\"-1\" rx=\"1.2\" ry=\"1.5\" fill=\"${body}\" opacity=\"0.5\"/>`\n    + `<ellipse cx=\"-1\" cy=\"-1.8\" rx=\"0.4\" ry=\"0.2\" fill=\"${c.fallenLeafRed || '#c04030'}\"/>`\n    + `</g>`;\n}\n\nfunction svgHarvestBasket(x: number, y: number, c: AssetColors, v: number): string {\n  const basket = c.oakBrown || '#8a6030';\n  const contents = v === 0\n    ? [c.harvestApple, c.harvestApple]\n    : v === 1\n      ? [c.sproutGreen || '#80d050', c.harvestApple, c.sunflowerPetal || '#f0c820']\n      : [c.harvestGrape, c.harvestGrape];\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<path d=\"M-1.5,0 Q-1.8,-1 -1,-1.5 Q0,-1.8 1,-1.5 Q1.8,-1 1.5,0 Z\" fill=\"${basket}\"/>`\n    + `<path d=\"M-1,-1.3 Q0,-2 1,-1.3\" fill=\"none\" stroke=\"${basket}\" stroke-width=\"0.3\"/>`\n    + contents.map((col, i) =>\n      `<circle cx=\"${(i - (contents.length - 1) / 2) * 0.6}\" cy=\"-1\" r=\"0.35\" fill=\"${col}\"/>`,\n    ).join('')\n    + `</g>`;\n}\n\nfunction svgHotDrink(x: number, y: number, c: AssetColors, v: number): string {\n  const mug = c.hotDrinkMug;\n  const steam = c.hotDrinkSteam;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<rect x=\"-0.6\" y=\"-1\" width=\"1.2\" height=\"1.2\" rx=\"0.2\" fill=\"${mug}\"/>`\n    + `<path d=\"M0.6,-0.5 Q1.2,-0.5 1.2,-0.1 Q1.2,0.2 0.6,0.2\" fill=\"none\" stroke=\"${mug}\" stroke-width=\"0.2\"/>`\n    + `<path d=\"M-0.3,-1.2 Q-0.3,-1.8 0,-1.5 Q0.3,-1.8 0.3,-1.2\" fill=\"none\" stroke=\"${steam}\" stroke-width=\"0.2\" opacity=\"0.5\"/>`\n    + (v >= 1 ? `<path d=\"M0,-1.5 Q0.2,-2 0,-2.2\" fill=\"none\" stroke=\"${steam}\" stroke-width=\"0.15\" opacity=\"0.4\"/>` : '')\n    + `</g>`;\n}\n\nfunction svgAutumnWreath(x: number, y: number, c: AssetColors, v: number): string {\n  const green = c.wreathGreen;\n  const berry = c.wreathBerry;\n  return `<g transform=\"translate(${x},${y})\">`\n    + `<circle cx=\"0\" cy=\"-1.5\" r=\"1.5\" fill=\"none\" stroke=\"${green}\" stroke-width=\"0.8\"/>`\n    + `<circle cx=\"0\" cy=\"-1.5\" r=\"1.2\" fill=\"none\" stroke=\"${green}\" stroke-width=\"0.4\" opacity=\"0.5\"/>`\n    + (v >= 1 ? `<circle cx=\"0.8\" cy=\"-0.8\" r=\"0.2\" fill=\"${berry}\"/><circle cx=\"1\" cy=\"-1\" r=\"0.2\" fill=\"${berry}\"/>` : '')\n    + (v === 2 ? `<path d=\"M-0.3,-0.2 Q0,0.2 0.3,-0.2\" fill=\"${c.scarfRed || '#cc3030'}\" opacity=\"0.7\"/>` : '')\n    + `</g>`;\n}\n\n// ── Render Dispatcher ───────────────────────────────────────\n\nconst RENDERERS: Record<AssetType, (x: number, y: number, c: AssetColors, v: number) => string> = {\n  // Water\n  whale: svgWhale,\n  fish: svgFish,\n  fishSchool: svgFishSchool,\n  boat: svgBoat,\n  seagull: svgSeagull,\n  dock: svgDock,\n  waves: svgWaves,\n  kelp: svgKelp,\n  coral: svgCoral,\n  jellyfish: svgJellyfish,\n  turtle: svgTurtle,\n  buoy: svgBuoy,\n  sailboat: svgSailboat,\n  lighthouse: svgLighthouse,\n  crab: svgCrab,\n  // Shore/Wetland\n  rock: svgRock,\n  boulder: svgBoulder,\n  flower: svgFlower,\n  bush: svgBush,\n  driftwood: svgDriftwood,\n  sandcastle: svgSandcastle,\n  tidePools: svgTidePools,\n  heron: svgHeron,\n  shellfish: svgShellfish,\n  cattail: svgCattail,\n  frog: svgFrog,\n  lily: svgLily,\n  // Grassland\n  pine: svgPine,\n  deciduous: svgDeciduous,\n  mushroom: svgMushroom,\n  stump: svgStump,\n  deer: svgDeer,\n  rabbit: svgRabbit,\n  fox: svgFox,\n  butterfly: svgButterfly,\n  beehive: svgBeehive,\n  wildflowerPatch: svgWildflowerPatch,\n  tallGrass: svgTallGrass,\n  birch: svgBirch,\n  haybale: svgHaybale,\n  // Forest\n  willow: svgWillow,\n  palm: svgPalm,\n  bird: svgBird,\n  owl: svgOwl,\n  squirrel: svgSquirrel,\n  moss: svgMoss,\n  fern: svgFern,\n  deadTree: svgDeadTree,\n  log: svgLog,\n  berryBush: svgBerryBush,\n  spider: svgSpider,\n  // Farm\n  wheat: svgWheat,\n  fence: svgFence,\n  scarecrow: svgScarecrow,\n  barn: svgBarn,\n  sheep: svgSheep,\n  cow: svgCow,\n  chicken: svgChicken,\n  horse: svgHorse,\n  ricePaddy: svgRicePaddy,\n  silo: svgSilo,\n  pigpen: svgPigpen,\n  trough: svgTrough,\n  haystack: svgHaystack,\n  orchard: svgOrchard,\n  beeFarm: svgBeeFarm,\n  pumpkin: svgPumpkin,\n  // Village\n  tent: svgTent,\n  hut: svgHut,\n  house: svgHouse,\n  houseB: svgHouseB,\n  church: svgChurch,\n  windmill: svgWindmill,\n  well: svgWell,\n  tavern: svgTavern,\n  bakery: svgBakery,\n  stable: svgStable,\n  garden: svgGarden,\n  laundry: svgLaundry,\n  doghouse: svgDoghouse,\n  shrine: svgShrine,\n  wagon: svgWagon,\n  // Town/City\n  market: svgMarket,\n  inn: svgInn,\n  blacksmith: svgBlacksmith,\n  castle: svgCastle,\n  tower: svgTower,\n  bridge: svgBridge,\n  cathedral: svgCathedral,\n  library: svgLibrary,\n  clocktower: svgClocktower,\n  statue: svgStatue,\n  park: svgPark,\n  warehouse: svgWarehouse,\n  gatehouse: svgGatehouse,\n  manor: svgManor,\n  // Biome blend\n  reeds: svgReeds,\n  fountain: svgFountain,\n  canal: svgCanal,\n  watermill: svgWatermill,\n  gardenTree: svgGardenTree,\n  pondLily: svgPondLily,\n  // Cross-level\n  cart: svgCart,\n  barrel: svgBarrel,\n  torch: svgTorch,\n  flag: svgFlag,\n  cobblePath: svgCobblePath,\n  smoke: svgSmoke,\n  signpost: svgSignpost,\n  lantern: svgLantern,\n  woodpile: svgWoodpile,\n  puddle: svgPuddle,\n  campfire: svgCampfire,\n  // Seasonal: Winter\n  snowPine: svgSnowPine,\n  snowDeciduous: svgSnowDeciduous,\n  snowman: svgSnowman,\n  snowdrift: svgSnowdrift,\n  igloo: svgIgloo,\n  frozenPond: svgFrozenPond,\n  icicle: svgIcicle,\n  sled: svgSled,\n  snowCoveredRock: svgSnowCoveredRock,\n  bareBush: svgBareBush,\n  winterBird: svgWinterBird,\n  firewood: svgFirewood,\n  // Seasonal: Spring\n  cherryBlossom: svgCherryBlossom,\n  cherryBlossomSmall: svgCherryBlossomSmall,\n  cherryPetals: svgCherryPetals,\n  tulip: svgTulip,\n  tulipField: svgTulipField,\n  sprout: svgSprout,\n  nest: svgNest,\n  lamb: svgLamb,\n  crocus: svgCrocus,\n  rainPuddle: svgRainPuddle,\n  birdhouse: svgBirdhouse,\n  gardenBed: svgGardenBed,\n  // Seasonal: Summer\n  parasol: svgParasol,\n  beachTowel: svgBeachTowel,\n  sandcastleSummer: svgSandcastleSummer,\n  surfboard: svgSurfboard,\n  iceCreamCart: svgIceCreamCartAsset,\n  hammock: svgHammock,\n  sunflower: svgSunflower,\n  watermelon: svgWatermelon,\n  sprinkler: svgSprinkler,\n  lemonade: svgLemonade,\n  fireflies: svgFirefliesAsset,\n  swimmingPool: svgSwimmingPool,\n  // Seasonal: Autumn\n  autumnMaple: svgAutumnMaple,\n  autumnOak: svgAutumnOak,\n  autumnBirch: svgAutumnBirch,\n  autumnGinkgo: svgAutumnGinkgo,\n  fallenLeaves: svgFallenLeaves,\n  leafSwirl: svgLeafSwirl,\n  acorn: svgAcorn,\n  cornStalk: svgCornStalkAsset,\n  scarecrowAutumn: svgScarecrowAutumn,\n  harvestBasket: svgHarvestBasket,\n  hotDrink: svgHotDrink,\n  autumnWreath: svgAutumnWreath,\n};\n\n// ── Public API ──────────────────────────────────────────────\n\nexport function renderTerrainAssets(\n  isoCells: IsoCell[],\n  seed: number,\n  palette: TerrainPalette100,\n  variantSeed?: number,\n  biomeMap?: Map<string, BiomeContext>,\n): string {\n  const placed = selectAssets(isoCells, seed, variantSeed, biomeMap);\n  const c = palette.assets;\n\n  const svgParts = placed.map(a => {\n    const renderer = RENDERERS[a.type];\n    return renderer(a.cx + a.ox, a.cy + a.oy, c, a.variant);\n  });\n\n  return `<g class=\"terrain-assets\">${svgParts.join('')}</g>`;\n}\n\n/**\n * Render seasonal terrain assets.\n * Uses per-week seasonal palette and asset pool overrides.\n */\nexport function renderSeasonalTerrainAssets(\n  isoCells: IsoCell[],\n  seed: number,\n  weekPalettes: TerrainPalette100[],\n  variantSeed?: number,\n  biomeMap?: Map<string, BiomeContext>,\n  seasonRotation?: number,\n): string {\n  const placed = selectAssets(isoCells, seed, variantSeed, biomeMap, seasonRotation);\n\n  const svgParts = placed.map(a => {\n    // Use per-week palette for this cell's week\n    const weekIdx = Math.min(a.cell.week, weekPalettes.length - 1);\n    const palette = weekPalettes[weekIdx];\n    const c = palette.assets;\n    const renderer = RENDERERS[a.type];\n    return renderer(a.cx + a.ox, a.cy + a.oy, c, a.variant);\n  });\n\n  return `<g class=\"terrain-assets\">${svgParts.join('')}</g>`;\n}\n\nexport function renderAssetCSS(): string {\n  return [\n    `@keyframes tree-sway { 0% { transform: rotate(-1.5deg); } 50% { transform: rotate(1.5deg); } 100% { transform: rotate(-1.5deg); } }`,\n  ].join('\\n');\n}\n","import { seededRandom } from '../../utils/math.js';\n\n/** Spatial context for a single grid cell, independent of contribution level */\nexport interface BiomeContext {\n  /** Cell is part of a river path */\n  isRiver: boolean;\n  /** Cell is part of a pond/lake */\n  isPond: boolean;\n  /** Cell is adjacent to river or pond (but not water itself) */\n  nearWater: boolean;\n  /** Forest density 0–1 from nearest forest nucleus */\n  forestDensity: number;\n}\n\n/**\n * Generate a biome overlay map for the entire grid.\n * Produces spatial features (rivers, ponds, forests) distributed\n * independently of contribution levels so that water and trees\n * appear naturally across all biome zones.\n *\n * @param weeks - Number of weeks (columns), typically 52\n * @param days - Number of days (rows), typically 7\n * @param seed - Deterministic seed\n * @returns Map keyed by \"week,day\" → BiomeContext\n */\nexport function generateBiomeMap(\n  weeks: number,\n  days: number,\n  seed: number,\n): Map<string, BiomeContext> {\n  const rng = seededRandom(seed);\n  const map = new Map<string, BiomeContext>();\n\n  // Initialize all cells\n  for (let w = 0; w < weeks; w++) {\n    for (let d = 0; d < days; d++) {\n      map.set(`${w},${d}`, {\n        isRiver: false,\n        isPond: false,\n        nearWater: false,\n        forestDensity: 0,\n      });\n    }\n  }\n\n  // ── Layer 1: River Paths ────────────────────────────\n  const NUM_RIVERS = 2;\n  const riverBends: Array<{ w: number; d: number }> = [];\n\n  for (let r = 0; r < NUM_RIVERS; r++) {\n    // Stagger rivers across rows: first in top half, second in bottom half\n    let day = r === 0\n      ? Math.floor(rng() * Math.floor(days / 2))\n      : Math.floor(days / 2) + Math.floor(rng() * Math.ceil(days / 2));\n\n    for (let week = 0; week < weeks; week++) {\n      const ctx = map.get(`${week},${day}`);\n      if (ctx) ctx.isRiver = true;\n\n      // Drift: 60% straight, 20% up, 20% down\n      const drift = rng();\n      const prevDay = day;\n      if (drift < 0.2) day = Math.max(0, day - 1);\n      else if (drift > 0.8) day = Math.min(days - 1, day + 1);\n\n      if (day !== prevDay) {\n        riverBends.push({ w: week, d: day });\n      }\n    }\n  }\n\n  // ── Layer 2: Ponds at River Bends ───────────────────\n  const numPonds = Math.min(riverBends.length, 1 + Math.floor(rng() * 2));\n  const shuffledBends = riverBends\n    .map(b => ({ b, sort: rng() }))\n    .sort((a, b) => a.sort - b.sort)\n    .map(x => x.b);\n\n  for (let p = 0; p < numPonds; p++) {\n    const center = shuffledBends[p];\n    if (!center) break;\n\n    const pondSize = 2 + Math.floor(rng() * 3);\n    const pondCells = [center];\n\n    for (let i = 0; i < pondSize; i++) {\n      const base = pondCells[Math.floor(rng() * pondCells.length)];\n      const dw = Math.floor(rng() * 3) - 1;\n      const dd = Math.floor(rng() * 3) - 1;\n      const nw = base.w + dw;\n      const nd = base.d + dd;\n      if (nw >= 0 && nw < weeks && nd >= 0 && nd < days) {\n        pondCells.push({ w: nw, d: nd });\n      }\n    }\n\n    for (const pc of pondCells) {\n      const ctx = map.get(`${pc.w},${pc.d}`);\n      if (ctx) ctx.isPond = true;\n    }\n  }\n\n  // ── Mark nearWater ──────────────────────────────────\n  for (let w = 0; w < weeks; w++) {\n    for (let d = 0; d < days; d++) {\n      const ctx = map.get(`${w},${d}`)!;\n      if (ctx.isRiver || ctx.isPond) continue;\n\n      const neighbors = [\n        map.get(`${w - 1},${d}`),\n        map.get(`${w + 1},${d}`),\n        map.get(`${w},${d - 1}`),\n        map.get(`${w},${d + 1}`),\n      ];\n      if (neighbors.some(n => n && (n.isRiver || n.isPond))) {\n        ctx.nearWater = true;\n      }\n    }\n  }\n\n  // ── Layer 3: Forest Clusters ────────────────────────\n  const numForests = 4 + Math.floor(rng() * 3);\n  const nuclei: Array<{ w: number; d: number; radius: number }> = [];\n\n  for (let f = 0; f < numForests; f++) {\n    nuclei.push({\n      w: Math.floor(rng() * weeks),\n      d: Math.floor(rng() * days),\n      radius: 2 + rng() * 3,\n    });\n  }\n\n  for (let w = 0; w < weeks; w++) {\n    for (let d = 0; d < days; d++) {\n      const ctx = map.get(`${w},${d}`)!;\n      let maxDensity = 0;\n\n      for (const nucleus of nuclei) {\n        const dist = Math.sqrt((w - nucleus.w) ** 2 + (d - nucleus.d) ** 2);\n        if (dist < nucleus.radius) {\n          const density = 1 - dist / nucleus.radius;\n          if (density > maxDensity) maxDensity = density;\n        }\n      }\n\n      ctx.forestDensity = maxDensity;\n    }\n  }\n\n  return map;\n}\n","import type {\n  Theme,\n  ContributionData,\n  ThemeOptions,\n  ThemeOutput,\n  ColorMode,\n  ThemePalette,\n  PaletteColor,\n} from '../../core/types.js';\nimport { svgRoot, svgStyle } from '../../core/svg.js';\nimport { computeStats } from '../../core/stats.js';\nimport { registerTheme } from '../registry.js';\nimport { contributionGrid, enrichGridCells100, renderTitle, renderStatsBar } from '../shared.js';\nimport { getTerrainPalette100, getSeasonalPalette100 } from './palette.js';\nimport { renderTerrainBlocks, renderSeasonalTerrainBlocks, getIsoCells } from './blocks.js';\nimport { renderTerrainCSS, renderAnimatedOverlays, renderClouds, renderWaterOverlays, renderWaterRipples, renderCelestials, renderSnowParticles, renderFallingPetals, renderFallingLeaves } from './effects.js';\nimport { renderTerrainAssets, renderSeasonalTerrainAssets, renderAssetCSS } from './assets.js';\nimport { generateBiomeMap } from './biomes.js';\nimport { hash } from '../../utils/math.js';\nimport type { Hemisphere } from './seasons.js';\nimport { computeSeasonRotation } from './seasons.js';\nimport type { TerrainPalette100 } from './palette.js';\n\n// ── Theme Definition ─────────────────────────────────────────\n\nconst terrainTheme: Theme = {\n  name: 'terrain',\n  displayName: 'Terrain',\n  description: 'Your contributions build a living world — more code, richer civilization',\n  render(data: ContributionData, options: ThemeOptions): ThemeOutput {\n    const stats = computeStats(data.weeks);\n    const dataWithStats: ContributionData = { ...data, stats };\n    return {\n      dark: renderMode(dataWithStats, options, 'dark'),\n      light: renderMode(dataWithStats, options, 'light'),\n    };\n  },\n};\n\n// ── Mode Renderer ────────────────────────────────────────────\n\n/**\n * Compose all visual layers into a complete SVG for one color mode.\n *\n * Layer order (back to front):\n * 1. Style (CSS animations)\n * 2. Celestials (stars+moon or sun, deepest sky layer)\n * 3. Clouds (behind terrain for depth)\n * 4. Terrain blocks (isometric 3D, seasonally tinted)\n * 5. Water overlays (river/pond shimmer on blocks)\n * 6. Water ripples (static wavy lines on water surfaces)\n * 7. Assets (trees, buildings, animals — seasonal variants)\n * 8. Seasonal particles (snow, petals, leaves)\n * 9. Animated overlays (water shimmer, town sparkle)\n * 10. Title (top-left)\n * 11. Stats bar (bottom)\n */\nfunction renderMode(\n  data: ContributionData,\n  options: ThemeOptions,\n  mode: ColorMode,\n): string {\n  const hemisphere: Hemisphere = options.hemisphere || 'north';\n  const oldestDate = new Date(data.weeks[0]?.days[0]?.date || new Date());\n  const seasonRotation = computeSeasonRotation(oldestDate, hemisphere);\n  const seed = hash(data.username + mode);\n  const variantSeed = hash(data.username + String(data.year));\n\n  // Build per-week seasonal palette array (52 weeks)\n  const weekPalettes: TerrainPalette100[] = [];\n  for (let w = 0; w < 52; w++) {\n    weekPalettes.push(getSeasonalPalette100(mode, w, seasonRotation));\n  }\n\n  // Use mid-year (summer) palette as reference for shared utilities\n  const palette = weekPalettes[26];\n\n  // Build grid cells with 100-level intensity\n  const cells = contributionGrid(data, {\n    cellSize: 11,\n    gap: 2,\n    offsetX: 24,\n    offsetY: 42,\n  });\n  const cells100 = enrichGridCells100(cells, data);\n\n  // Compute isometric layout\n  const originX = 405;\n  const originY = 6;\n\n  // Get isometric cells for effects and assets\n  const isoCells = getIsoCells(cells100, palette, originX, originY);\n\n  // Generate biome overlay (rivers, ponds, forests) with offset seed\n  const biomeMap = generateBiomeMap(52, 7, seed + 7919);\n\n  // Build layers\n  const terrainCSS = renderTerrainCSS(isoCells, biomeMap);\n  const assetCSS = renderAssetCSS();\n  const css = terrainCSS + '\\n' + assetCSS;\n\n  const isDark = mode === 'dark';\n  const celestials = renderCelestials(seed, palette, isDark);\n  const clouds = renderClouds(seed, palette);\n\n  // Use seasonal terrain blocks with per-week palettes\n  const blocks = renderSeasonalTerrainBlocks(\n    cells100, weekPalettes, originX, originY, seasonRotation, biomeMap,\n  );\n\n  const waterOverlays = renderWaterOverlays(isoCells, palette, biomeMap);\n  const waterRipples = renderWaterRipples(isoCells, palette, biomeMap);\n\n  // Use seasonal terrain assets with per-week palettes\n  const assets = renderSeasonalTerrainAssets(\n    isoCells, seed, weekPalettes, variantSeed, biomeMap, seasonRotation,\n  );\n\n  // Seasonal particle effects\n  const snowParticles = renderSnowParticles(isoCells, seed, seasonRotation);\n  const fallingPetals = renderFallingPetals(isoCells, seed, palette, seasonRotation);\n  const fallingLeaves = renderFallingLeaves(isoCells, seed, palette, seasonRotation);\n\n  const overlays = renderAnimatedOverlays(isoCells, palette);\n\n  // Build ThemePalette bridge for shared utilities\n  // Sample 5 anchor levels across the 100-level range\n  const anchorLevels = [0, 20, 45, 70, 95];\n  const levelColors = anchorLevels.map((l): PaletteColor => ({\n    hex: palette.getElevation(l).top,\n    opacity: l === 0 ? 0.5 : 1,\n  })) as [PaletteColor, PaletteColor, PaletteColor, PaletteColor, PaletteColor];\n\n  const themePalette: ThemePalette = {\n    text: palette.text,\n    contribution: { levels: levelColors },\n    background: palette.bg,\n  };\n\n  const title = renderTitle(options.title, themePalette);\n  const statsBar = renderStatsBar(data.stats, themePalette);\n\n  // Assemble\n  const content = [\n    svgStyle(css),\n    celestials,\n    clouds,\n    blocks,\n    waterOverlays,\n    waterRipples,\n    assets,\n    snowParticles,\n    fallingPetals,\n    fallingLeaves,\n    overlays,\n    title,\n    statsBar,\n  ].join('\\n');\n\n  return svgRoot(\n    { width: options.width, height: options.height },\n    content,\n  );\n}\n\n// ── Registration ─────────────────────────────────────────────\n\nregisterTheme(terrainTheme);\nexport { terrainTheme };\n"],"mappings":"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","names":["hash","remove","add","topPoints"]}